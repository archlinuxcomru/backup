


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/19872/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        [РЕШЕНО]Постоянное падение ядра, со случайной ошибкой
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/12/index.html">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>[РЕШЕНО]Постоянное падение ядра, со случайной ошибкой</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>[РЕШЕНО]Постоянное падение ядра, со случайной ошибкой</h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228768"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jah/index.html">
                <span class="post-username">jah</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228768/index.html">#</a>
            2 года, 4 месяца назад
            
                (отредактировано
                
                    2 года, 2 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/jah/topics/index.html">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jah/posts/index.html">
                    8
                </a>
            </div>
            <div>
                Участник с: 02 октября 2019
            </div>
            
        </td>
        <td class="post-content">
            Установленный с горем пополам Арч пришлось перевезти с проц интел + дискретка радеон ,на новый ноутбук полностью AMD (MSI Aplpha15), параллельно стоят еще две системы Windows и Ubuntu. Windows установлена с нуля и нареканий вроде как нет, было пару глюков с зависанием, но после апгрейда прошивок и утилит, работает вроде стабильно. Ubuntu переехала вместе Арчем и чувствует себя более чем адекватно, зависы вроде были замечены, но такого же характера как и на Windows, сейчас бегает более чем нормально, все три системы на одном SSD, и вот проблема свеже перевезенный арч отказывается работать, при запуске доходит до графического режима и может находиться в нем порядочно долго, но стоит залогиниться или попробовать перейти в консольный режим секунд пятнадцать и ноут уходит в глубокий завис иногда это паник кернел иногда просто упс, так как не сразу разобрался и грешил на графику, переустановил кеды и хорг, потом и вовсе все пакеты но результата ноль, попробовал установить арч с нуля, и выяснилось что при базовой установке можно вызвать ошибку командой lspci, первый раз команда отрабатывает с большущей задержкой, и потом &quot;стандартно&quot; 15 сек и завис, даже в консольном режиме, та же система в виртуалке под виндой вполне себя комфортно чувствует, и тут впрос что не так с ядром и что делать, устанавливать другое ядро, или поддержку оборудования как то нужно настроить, заранее всем спасибо.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228771"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228771/index.html">#</a>
            2 года, 4 месяца назад
            
                (отредактировано
                
                    2 года, 4 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Никто гадать не будет. Начни с самого простого:<br />1. Посмотри <strong>логи</strong> (journalctl, dmesg).<br />2. Проверь установлен ли пакет <strong>linux-firmware</strong>.<br />3. Попробуй другое ядро, например <strong>linux-lts</strong>.<br />4. Попробовать сменить <strong>видеодрайвер</strong>.<br />5. <strike>Маловероятно, но</strike> учитывая, что имеется <strike>проблема</strike> задержка при выполнении lspci<br /><blockquote><em>jah</em><br>первый раз команда отрабатывает с большущей задержкой</blockquote>можно попробовать определить <strike>имеется ли</strike> проблемное устройство, для чего выполни следующие действия<br /><pre><code>      lspci | awk &#39;{print $1}&#39; &gt; pci_ids.txt
      reboot
     for i in `cat pci_ids.txt`; do echo &quot; * CHECKING $i&quot;;lspci -s $i; done</code></pre>Если все нормально, то все устройства должны пройти проверку - примерный вывод для каждого устройства<br /><pre><code>* CHECKING 00:02.0
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)</code></pre>6. Можно попробовать отключить быстрый запуск windows.<br /><br />Дальше можно усложнить, например, используя <strong>strace</strong> узнать на каком системном вызове идет затык при выполнении lspci.<br /><br /><strong>EDIT 1</strong> - по п.5 для удобства можно ввести задержку, например, 2с - <strong>for i in `cat pci_ids.txt`; do echo &quot; * CHECKING $i&quot;;lspci -s $i; sleep 2; done</strong><br /><br /><strong>PS</strong> - в части reboot по п.5 - уже правлю несколько раз - и все-таки, если со 2-го раза  команда lspci точно зависает, то лучше выполнить reboot после создания файла pci_ids.txt, а уж после перегрузки дважды запустить команду с CHECKING. В 1-ый запуск смотри на каком устройстве будет большая задержка, а во 2-ой запуск можно предположить/проверить что на этом устройстве все и зависнет .... но это все предположения, возможно все будет по другому - ориентируся по обстоятельствам.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228791"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228791/index.html">#</a>
            2 года, 4 месяца назад
            
                (отредактировано
                
                    2 года, 4 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            И все-таки настораживает зависание системы при запуске lspci. Такое наблюдается, но редко и обусловлено проблемами с железом, точнее при наличии проблем с размещением/чтением конфигурационного пространства PCI (или выход данных за пределы  конфигурационного пространства или ошибки чтения) … и это не зависит от системы. То есть должно наблюдаться и в ubuntu и в windows при запуске lspci (когда происходит считывание информации из регистров PCI).<br />Это к тому, что неплохо бы проверить работу lspci и в ubuntu и в windows более внимательнее.<br /><br />Кроме того, неплохо бы проверить и отработку команды <strong># lspci -xxx</strong><br />из man lspci<br /><pre><code>xxx - Show hexadecimal dump of the whole PCI configuration space. It  is  available  only  to root  as  several PCI devices crash when you try to read some parts of the config space (this behavior probably doesn&#39;t violate the  PCI  standard,  but  it&#39;s  at  least  very stupid). However, such devices are rare, so you needn&#39;t worry much.</code></pre>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228816"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jah/index.html">
                <span class="post-username">jah</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228816/index.html">#</a>
            2 года, 4 месяца назад
            
                (отредактировано
                
                    2 года, 4 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/jah/topics/index.html">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jah/posts/index.html">
                    8
                </a>
            </div>
            <div>
                Участник с: 02 октября 2019
            </div>
            
        </td>
        <td class="post-content">
            Спасибо за помощь в направлении. -&gt; поставил ядро lts и zen, в lts вроде стабильно, и lscpi  в LTS вылетает моментально и стабильно,<br />но в zen повторный пуск lscpi зависает на 03:00.0 Display controller: Advanced Micro Devices, Inc. [AMD/ATI] Navi 14 [Radeon RX 5500/5500M / Pro 5500M] (rev c1)<br />в dmesg удалось поймать ошибку описанную в <a href="https://bbs.archlinux.org/viewtopic.php?id=249563">https://bbs.archlinux.org/viewtopic.php?id=249563</a>,<br />поэтому склоняюсь к тому что проблема все таки в поддержке оборудования так как во всех стектрейсах видел admgpu, хоть и ошибки разные, попробую туда копнуть, но как говорил lts ведет себя более чем адекватно.<br />В Ubuntu с lspci проблем не наблюдается.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/indexbe14.html?next=/forum/topic/19872/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/19872/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:59 GMT -->
</html>
