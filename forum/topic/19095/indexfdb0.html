


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/19095/?page=4 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        (РЕШЕНО) Сломался BTRFS
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/23/index.html">Демоны и загрузка системы</a> <span class="divider">/</span></li>
            
        
        
            <li>(РЕШЕНО) Сломался BTRFS</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>(РЕШЕНО) Сломался BTRFS</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index9ba9.html?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexfdb0.html?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexaf4d.html?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214814"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Shama_comp/index.html">
                <span class="post-username">Shama_comp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214814/index.html">#</a>
            3 года, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Shama_comp/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Shama_comp/posts/index.html">
                    39
                </a>
            </div>
            <div>
                Участник с: 28 июня 2017
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vasek</em><br>возможно ли подключение/восстановление из снапшотов, если системе не монтируется???</blockquote>ну если подтом снапшотов с системой на одном разделе, то не думаю опять упрется в эти КС. Ну если только у бтрфс есть опция позволяющая эту проверку КС выключить при монтирование. А ее как видимо нету.<br />Дополняю свой пост к выше сказаному. Даже наверное можно все на одном харде делать, но только подтом для снапшотов на другой раздел вынести (типо как бут для ext необязательная фича) ну тип когда щелкается монтируется этот раздел, когда отщелкалось отмонтирование.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214817"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Shama_comp/index.html">
                <span class="post-username">Shama_comp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214817/index.html">#</a>
            3 года, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Shama_comp/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Shama_comp/posts/index.html">
                    39
                </a>
            </div>
            <div>
                Участник с: 28 июня 2017
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, а это пробовали?<a href="https://superuser.com/questions/763603/how-to-recover-this-btrfs-error">Тыц</a>. Глядишь поможет. Да как вам помочь хочется, но осознаешь свою без беспомощность перед btrfs. Да и сам я с таким не сталкивался ибо у меня нетбук ну а там какие могут перебои в питание если есть аккумулятор. Сталкивался только с липовыми подтомами, которые я не создавал. Якобы это все SystemD делает.<br /><br />P.S Спасибо за костыль воодушевляет стабильность.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214899"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214899/index.html">#</a>
            3 года, 6 месяцев назад
            
                (отредактировано
                
                    3 года, 6 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nafanja</em><br>btrfs даже под убунтой падает (((<br />ubuntu@ubuntu:~$ sudo btrfs rescue chunk-recover /dev/sda3</blockquote>А не пробовал запустить <strong>btrfs check /dev/…</strong>  с разными опциями, например (и другими)<br /><pre><code>--init-csum-tree           create a new CRC tree
--init-extent-tree          create a new extent tree
--check-data-csum      verify checksums of data blocks</code></pre><br /><strong>EDIT 1</strong> -  и последний вопрос - а не пробовал посмотреть вывод dump-superblock, dump-tree? - в смысле что то выведет или будет ругань<br />- btrfs inspect-internal dump-super /dev/…<br />- btrfs inspect-internal dump-tree /dev/…<br />Если chunk нарушен/не доступен, то возможно достать файлы только по сигнатуре - это утилиты foremost, scalpel или вручную<br /><pre><code>If the chunk tree is unavailable, only raw recovery based on file signatures is possible.</code></pre>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214917"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Shama_comp/index.html">
                <span class="post-username">Shama_comp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214917/index.html">#</a>
            3 года, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Shama_comp/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Shama_comp/posts/index.html">
                    39
                </a>
            </div>
            <div>
                Участник с: 28 июня 2017
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, желаю вам удачи в восстановлении данных. Отписывайтесь если какие-нибудь сдвиги будут. Я буду за темой следить.<br />Мне очень эта тема интересна. Эх блин самая фишка btrfs улетает из выше сказанного экономия первичных разделов и снапшоты когда они действительно нужны.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214948"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214948/index.html">#</a>
            3 года, 6 месяцев назад
            
                (отредактировано
                
                    3 года, 6 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Shama_comp</em><br>в восстановлении данных</blockquote> Для ознакомления с btrfs создал образ ФС btrfs размером 1G, в нем  3 файла с расширениями <strong>txt</strong>, <strong>jpg</strong>, <strong>odt</strong>.<br />Уже который день пытаюсь извлечь эти 3 файла, используя <strong>The Sleuth Kit</strong> for btrfs -  и ни хрена не получается, не могу понять заложенный там принцип указания offset.<br />Сегодня забил на это и использовал старый ручной способ <strong>по сигнатуре</strong> -  на извлечение файла jpg ушло меньше получаса.<br />Так что если прижмет, то важные файлы с большой вероятностью вытащить можно и ручками, имея только образ (dump) системы или для вытаскивания большого количества файлов использовать утилиты, умеющие работать с сигнатурой.<br /><br /><strong>EDIT 1</strong> - но, имхо, если структура btrfs нарушена (не возможно построить дерево), то бесполезна и The Sleuth Kit и приходим к выводу, уже отмеченному выше, восстановление файлов возможно только по сигнатуре (старый хакерский способ).<br /><br /><strong>PS</strong> - в части сообщения &quot;<strong>parent transid verify failed on &#8230; wanted &#8230; found …</strong>&quot;<br />Вот что об этом написано в исходниках<br /><pre><code>we can&#39;t consider a given block up to date unless the transid of the block matches the transid in the parent node&#39;s pointer.  This is how we detect blocks that either didn&#39;t get written at all or got written in the wrong place.</code></pre><br />И еще понравилось одно высказывание из doc btrfs<br /><pre><code>dead metadata = dead volume with no chance of recovery</code></pre>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215043"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215043/index.html">#</a>
            3 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Уточнение в части сообщений<br /><pre><code>parent transid verify failed on … wanted … found …</code></pre>Смысл, насколько я понимаю, такой:   эти сообщения возникают тогда, когда операция записи была прервана, например, в результате отключения питания, что привело к нарушению целостности данных - имеются <strong>незавершенные транзакции</strong>.<br />И, как пишут, btrfs в этой ситуации не дает подключить диск с разрешением на запись и  советуют отбросить незавершенные транзакции, используя <strong>btrfs rescue zero-log</strong>.<br />Вот что об использовании этой команды пишется  в <strong>man  btrfs rescue 8</strong><br /><pre><code>Эта команда очистит дерево журнала файловой системы. Это может исправить определенный набор проблем, когда монтирование файловой системы не удается из-за несоответствий журнала.</code></pre><br />И все-таки неплохо бы проверить и состояние superblock. Если он не выводится командой, то можно посмотреть в ручную -  <strong>0-ой</strong> (primary)  <strong>и 1-ый</strong> - и сравнить выводы (2-х блоков думаю достаточно).<br />Посмотреть можно так (можно прямо с дампа)<br />0 -   <strong>hexdump -C -s 65536 -n 4096  /file</strong><br />1 -   <strong>hexdump -C -s 67108864 -n 4096  /file</strong><br />Будут не сопадать только первые строки - это checksum
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215089"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215089/index.html">#</a>
            3 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, уже отмечал, что меня в файловой системе интересует вопрос извлечения файлов из неработающей системы, а так как сейчас занялся осваиванием btrfs, то <u>чисто технический вопрос</u> - в твоем случае имеется возможность получить вывод <strong>btrfs inspect-internal dump-tree /…</strong> ?<br />Сегодня разбирался с этим выводом и понял, что используя его можно в ручную извлечь отдельные файлы (что проделал и практически). В этом выводе имеется и название файлов, их размер и смещение.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215091"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/nafanja/index.html">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215091/index.html">#</a>
            3 года, 5 месяцев назад
            
                (отредактировано
                
                    3 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/nafanja/topics/index.html">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/nafanja/posts/index.html">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            <strong>короче, я это как то сделал.</strong><br />система пока не грузится, но раздел монтируется... и вроде данные на месте.<br />что то делалось очень долго, много-много часов... задолбался ждать и остановил процесс, перегрузился в винду и был приятно удивлен тому что винда увидела раздел...<br />под лайф убунтой он тоже монтируется.<br />сохраню нужные данные и попробую повторить.<br /><br /><blockquote><em>vasek</em><br>btrfs inspect-internal dump-tree</blockquote>да, это работает, по крайней мере показывает корневую структуру раздела... сами названия файлов я не увидел, наверное нужно было подождать, там очень большой вывод...
            
                
                    <div class="post-signature">
                        <a href="../10992/index.html">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215096"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215096/index.html">#</a>
            3 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nafanja</em><br>наверное нужно было подождать, там очень большой вывод&#8230;</blockquote>Да там вывод большой. И чем больше файлов, тем больше вывод. Наверное лучше делать вывод в файл.<br />Привожу в качестве примера часть моего вывода<br /><pre><code>file tree key (256 ROOT_ITEM 0)
 item 15 key (259 INODE_REF 256) itemoff 15102 itemsize 22
		index 4 namelen 12 name: image.jpg
	item 16 key (259 EXTENT_DATA 0) itemoff 15049 itemsize 53
		generation 11 type 1 (regular)
		extent data disk byte 13660160 nr 200704
		extent data offset 0 nr 200704 ram 200704
		extent compression 0 (none)</code></pre>И видим<br />- название - image.ipg<br />- размер - 200704<br />- смещение - 13660160<br /><br />1. Смотрим сам файл image.jpg (1-ая и последняя строчки)<br /><strong>hexdump -C -n 16 /mnt/loop/TEST/image.jpg</strong><br /><pre><code>00000000  ff d8 ff e0 00 10 4a 46  49 46 00 01 01 01 00 60  |......JFIF.....`|
…………………...
00030640  50 6c 03 b9 fc e8 a2 b3  70 8f 63 5b b3 ff d9     |Pl......p.c[...|</code></pre><br />2. Смотрим по данным вывода <u>btrfs inspect-internal dump-tree</u><br /><strong>hexdump -C -s 13660160 -n 200704 ~/btrfs-image</strong><br /><pre><code>00d07000  ff d8 ff e0 00 10 4a 46  49 46 00 01 01 01 00 60  |......JFIF.....`|
……………………….
00d37640  50 6c 03 b9 fc e8 a2 b3  70 8f 63 5b b3 ff d9 00  |Pl......p.c[....|</code></pre>Выкинул из последнего вывода нулевые строки<br /><pre><code>00d37650  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00d38000</code></pre>И как видим - полное соответствие<br />Конечно, в большой системе это громоздкий вывод, НО если вытащить несколько важных файлов, то можно и помучаться … безусловно, должен быть опыт работы.<br /><br /><strong>PS</strong> - просьба потом отписаться, что делал.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215133"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Shama_comp/index.html">
                <span class="post-username">Shama_comp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215133/index.html">#</a>
            3 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Shama_comp/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Shama_comp/posts/index.html">
                    39
                </a>
            </div>
            <div>
                Участник с: 28 июня 2017
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>Смотрим сам файл image.jpg (1-ая и последняя строчки)<br />hexdump -C -n 16 /mnt/loop/TEST/image.jpg</blockquote>И что каждый файл вытаскивать?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index9ba9.html?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexfdb0.html?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexaf4d.html?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index6988.html?next=/forum/topic/19095/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/19095/?page=4 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:24 GMT -->
</html>
