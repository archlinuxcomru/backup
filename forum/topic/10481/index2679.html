


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Настройка awesome: виджеты vicious и температура компьютера 
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/8/">Блоги</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/25/">Блоги</a> <span class="divider">/</span></li>
            
        
        
            <li>Настройка awesome: виджеты vicious и температура компьютера </li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Настройка awesome: виджеты vicious и температура компьютера </h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-96662"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/xezzus/">
                <span class="post-username">xezzus</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/96662/">#</a>
            12 лет назад
            
                (отредактировано
                
                    12 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/xezzus/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/xezzus/posts/">
                    2
                </a>
            </div>
            <div>
                Участник с: 11 августа 2010
            </div>
            
        </td>
        <td class="post-content">
            На данном этапе настройка <strong>awesome</strong>, задача не простая. В основном это связано с малым количеством документации, а точнее переводов на русский. Использование этого <strong>WM</strong>, заворожило меня своей простотой,  количество высвободившегося времени стало намного больше.<br/><br/>Так, небольшие дифирамбы пропел, теперь к делу. У меня возникли проблемы, с отоброжением температуры, процессора и материнской платты, стандартные виджет thermal.lua от vicious, естественно работать не захотел. Тогда я взял и установил пакет <strong>lm-sensors</strong> запустил демона <strong>/etc/rc.d/sensors start</strong> и по команде <strong>sensors</strong>, получил, что-то вроде этого.<br/><br/><div class="code"><pre>atk0110-acpi-0
Adapter: ACPI interface
Vcore Voltage:     +1.53 V  (min =  +0.85 V, max =  +1.60 V)
 +3.3 Voltage:     +3.30 V  (min =  +2.97 V, max =  +3.63 V)
 +5 Voltage:       +4.92 V  (min =  +4.50 V, max =  +5.50 V)
 +12 Voltage:     +12.60 V  (min = +10.20 V, max = +13.80 V)
CPU FAN Speed:       0 RPM  (min =  600 RPM)
CHASSIS FAN Speed:2415 RPM  (min =  600 RPM)
POWER FAN Speed:     0 RPM  (min =  600 RPM)
CPU Temperature:   +41.0°C  (high = +60.0°C, crit = +95.0°C)  
MB Temperature:    +37.0°C  (high = +45.0°C, crit = +95.0°C)  
k10temp-pci-00c3
Adapter: PCI adapter
temp1:       +35.0°C  (high = +70.0°C, crit = +83.5°C)</pre></div><br/>После это я взял и написал, две команды.<br/><br/><div class="code"><pre>$ sensors | awk '/CPU Temperature/ {print($3)}'</pre></div>и<br/><div class="code"><pre>$ sensors | awk '/CPU Temperature/ {print($3)}'</pre></div><br/>Так, теперь мы получаем четко, температуру процессора и температуру материнской платы.<br/>Теперь нам надо создать виджет используя <strong>vicious</strong>.<br/><br/>Идем в папку <strong>vicious/widget</strong> и создаем файл <strong>sensors.lua</strong>. В файл пишем.<br/><br/><div class="code"><pre>---------------------------------------------------
-- Licensed under the GNU General Public License v2
--  * (c) 2010, Xezzus &lt;<a href="/cdn-cgi/l/email-protection#3b435e41414e487b5c565a5257155854561d5c4f"><span class="__cf_email__" data-cfemail="8bf3eef1f1fef8cbece6eae2e7a5e8e4e6">[email&#160;protected]</span>&gt</a>;
---------------------------------------------------
-- {{{ Grab environment
local io = { popen = io.popen }
local setmetatable = setmetatable
-- }}}
-- 
-- Date: provides access to os.date with optional custom formatting
module("vicious.widgets.sensors")
-- {{{ Date widget type
local function worker()
f = io.popen("sensors | awk '/CPU Temperature/ {print($3)}'")
for line in f:lines() do
  cpu = line
end
f = io.popen("sensors | awk '/MB Temperature/ {print($3)}'")
for line in f:lines() do
  mb = line
end
  return cpu .. "/" .. mb
end
-- }}}
setmetatable(_M, { __call = function(_, ...) return worker(...) end })</pre></div><br/>Тепер открываем файл <strong>init.lua</strong>, в тойже директории <strong>vicious/widget</strong><br/><br/><div class="code"><pre>---------------------------------------------------
-- Vicious widgets for the awesome window manager
---------------------------------------------------
-- Licensed under the GNU General Public License v2
--  * (c) 2010, Xezzus &lt;<a href="/cdn-cgi/l/email-protection#6d15081717181e2d0a000c0401430e02004b0a19"><span class="__cf_email__" data-cfemail="c6bea3bcbcb3b586a1aba7afaae8a5a9ab">[email&#160;protected]</span>&gt</a>;
--  * (c) 2010, Adrian C. &lt;<a href="/cdn-cgi/l/email-protection#8dece3fff5eecdfef4fefde5e8ffe8a3e2ffeaabeaf9"><span class="__cf_email__" data-cfemail="a4c5cad6dcc7e4d7ddd7d4ccc1d6c18acbd6c3">[email&#160;protected]</span>&gt</a>;
---------------------------------------------------
-- {{{ Configure widgets
require("vicious.widgets.cpu")
require("vicious.widgets.sensors") -- &lt;--- Добавляем эту строчку. Это подключение нашего нового виджета.
require("vicious.widgets.cpuinf")
require("vicious.widgets.cpufreq")
require("vicious.widgets.thermal")
require("vicious.widgets.uptime")
require("vicious.widgets.bat")
require("vicious.widgets.mem")
require("vicious.widgets.os")
require("vicious.widgets.fs")
require("vicious.widgets.dio")
require("vicious.widgets.raid")
require("vicious.widgets.hddtemp")
require("vicious.widgets.net")
require("vicious.widgets.wifi")
require("vicious.widgets.mbox")
require("vicious.widgets.mboxc")
require("vicious.widgets.mdir")
require("vicious.widgets.gmail")
require("vicious.widgets.org")
require("vicious.widgets.pkg")
require("vicious.widgets.mpd")
require("vicious.widgets.volume")
require("vicious.widgets.weather")
require("vicious.widgets.date")
-- }}}
-- Vicious: widgets for the awesome window manager
module("vicious.widgets")</pre></div><br/>И теперь осталось последнее, это вывести наш виджет на панельку.<br/><br/>Создать виджет<br/><br/><div class="code"><pre>sensors = widget({ type = "textbox" })
vicious.register(sensors, vicious.widgets.sensors)</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/10481/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747ab6389c4b00b4',m:'X.0JQKJYyhirMmXrNezWvwzOek0quNnGLZ2LV2UL87Q-1662671855-0-AfIJi6rxoWCdvHsowBCWuVH2rzNB913zqlziCQBY4IZ1KpgS/bRVBFYSv1rYdwukjasOL0sdCTBDNo69ph2ue9Zq6lFmXOHbDkhB8s8dNfvj1eAadFIjJM9uQ9vvnp0arQ0049cg0Rh4yebUWhpxGJ8=',s:[0x4c671d7304,0xf7090b76c6],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
