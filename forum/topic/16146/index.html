


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Восстановление удалённых аудио файлов
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/5/">Разное</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/4/">/dev/null</a> <span class="divider">/</span></li>
            
        
        
            <li>Восстановление удалённых аудио файлов</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Восстановление удалённых аудио файлов</h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170198"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alsoijw/">
                <span class="post-username">alsoijw</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170198/">#</a>
            6 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/3c/7d/3c7ddaf51c033cca68db98a2daff52d0.png" alt="alsoijw avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alsoijw/topics/">
                    9
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alsoijw/posts/">
                    321
                </a>
            </div>
            <div>
                Участник с: 17 октября 2014
            </div>
            
        </td>
        <td class="post-content">
            По ошибке удалил несколько аудио файлов. После того как осознал то что погорячился(прошло несколько минут) - снял образ диска. Пользовался testdisk. Он написал что успешно восстановлены все файлы, но на практикие не все открываются(totem пишет Файл некорректен и не может быть воспроизведён). Сумарный объём 6 ГБ. Не думаю что смартфон мог перезаписать столько информации(это я к тому, что очень вряд ли файлы не читаются из-за частичной перезаписи). Запись файлов происходила на одном и том же андроид смартфоне. Настройки менялись только раз. Есть файлы следующих типов: ogg и 3gpp. емнип валидация файла происходит по заголовку(можно начать вопспроизводить ещё не докаченный файл). У меня возникло подозрение того что повреждён заголовок. Есть несколько корректных файлов и того и другого типа, как следствие можно определить формат кодирования. У меня вопрос: насколько возможно пересоздать заголовок и переписать им заголовок файла, для того чтобы можно было открыть сам файл? Вот сведения о кодеках:<br />[spoiler=ogg]<br /><pre><code>
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3859544b5751524f7854575b595450574b4c">[email&#160;protected]</a> ~&gt;  ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2014-10-05_090145.ogg&#39;
ffmpeg version 2.8.7 Copyright (c) 2000-2016 the FFmpeg developers
  built with gcc 5.3.1 (GCC) 20160406 (Red Hat 5.3.1-6)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags=&#39;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#39; --enable-bzlib --disable-crystalhd --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 31.100 / 54. 31.100
  libavcodec     56. 60.100 / 56. 60.100
  libavformat    56. 40.101 / 56. 40.101
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 40.101 /  5. 40.101
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  2.101 /  1.  2.101
  libpostproc    53.  3.100 / 53.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#39;/home/alsoijw/Музыка/r/Recording/Rec_2014-10-05_090145.ogg&#39;:
  Metadata:
    major_brand     : 3gp4
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2014-10-05 06:38:53
  Duration: 00:37:06.60, start: 0.000000, bitrate: 129 kb/s
    Stream #0:0(eng): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2014-10-05 06:38:53
      handler_name    : SoundHandle
At least one output file must be specified
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="37565b44585e5d40775b5854565b5f584443">[email&#160;protected]</a> ~&gt;  ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2014-10-05_094239.ogg&#39;
ffmpeg version 2.8.7 Copyright (c) 2000-2016 the FFmpeg developers
  built with gcc 5.3.1 (GCC) 20160406 (Red Hat 5.3.1-6)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags=&#39;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#39; --enable-bzlib --disable-crystalhd --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 31.100 / 54. 31.100
  libavcodec     56. 60.100 / 56. 60.100
  libavformat    56. 40.101 / 56. 40.101
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 40.101 /  5. 40.101
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  2.101 /  1.  2.101
  libpostproc    53.  3.100 / 53.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#39;/home/alsoijw/Музыка/r/Recording/Rec_2014-10-05_094239.ogg&#39;:
  Metadata:
    major_brand     : 3gp4
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2014-10-05 07:48:34
  Duration: 01:05:54.26, start: 0.000000, bitrate: 129 kb/s
    Stream #0:0(eng): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 128 kb/s (default)
    Metadata:
      creation_time   : 2014-10-05 07:48:34
      handler_name    : SoundHandle
At least one output file must be specified
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7c1d100f1315160b3c10131f1d1014130f08">[email&#160;protected]</a> ~&gt;
</code></pre>[/spoiler]<br />[spoiler=3gpp]<br /><pre><code>
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5f3e332c303635281f33303c3e3337302c2b">[email&#160;protected]</a> ~&gt;  ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-01-03_133210.3gpp&#39;
ffmpeg version 2.8.7 Copyright (c) 2000-2016 the FFmpeg developers
  built with gcc 5.3.1 (GCC) 20160406 (Red Hat 5.3.1-6)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags=&#39;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#39; --enable-bzlib --disable-crystalhd --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 31.100 / 54. 31.100
  libavcodec     56. 60.100 / 56. 60.100
  libavformat    56. 40.101 / 56. 40.101
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 40.101 /  5. 40.101
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  2.101 /  1.  2.101
  libpostproc    53.  3.100 / 53.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-01-03_133210.3gpp&#39;:
  Metadata:
    major_brand     : 3gp4
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2016-01-03 13:13:33
  Duration: 01:41:22.75, start: 0.000000, bitrate: 49 kb/s
    Stream #0:0(eng): Audio: aac (LC) (mp4a / 0x6134706D), 32000 Hz, stereo, fltp, 48 kb/s (default)
    Metadata:
      creation_time   : 2016-01-03 13:13:33
      handler_name    : SoundHandle
At least one output file must be specified
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="53323f203c3a3924133f3c30323f3b3c2027">[email&#160;protected]</a> ~&gt;  ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-01-04_180036.3gpp&#39;
ffmpeg version 2.8.7 Copyright (c) 2000-2016 the FFmpeg developers
  built with gcc 5.3.1 (GCC) 20160406 (Red Hat 5.3.1-6)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags=&#39;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#39; --enable-bzlib --disable-crystalhd --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 31.100 / 54. 31.100
  libavcodec     56. 60.100 / 56. 60.100
  libavformat    56. 40.101 / 56. 40.101
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 40.101 /  5. 40.101
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  2.101 /  1.  2.101
  libpostproc    53.  3.100 / 53.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-01-04_180036.3gpp&#39;:
  Metadata:
    major_brand     : 3gp4
    minor_version   : 0
    compatible_brands: isom3gp4
    creation_time   : 2016-01-04 17:52:28
  Duration: 01:51:52.03, start: 0.000000, bitrate: 49 kb/s
    Stream #0:0(eng): Audio: aac (LC) (mp4a / 0x6134706D), 32000 Hz, stereo, fltp, 48 kb/s (default)
    Metadata:
      creation_time   : 2016-01-04 17:52:28
      handler_name    : SoundHandle
At least one output file must be specified
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6908051a0600031e2905060a080501061a1d">[email&#160;protected]</a> ~&gt;
</code></pre>[/spoiler]Интересует именно &quot;самостоятельное&quot; восстановление, для прокачки навыков &quot;тыжпрограммиста&quot; и поднятия чсв. )))<br />Спасибо.
            
                
                    <div class="post-signature">
                        Мало видеть нам начало - надо видеть и конец.<br />Если видишь ты создание - значит где-то есть ТВОРЕЦ
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170200"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170200/">#</a>
            6 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br>По ошибке удалил несколько аудио файлов............Интересует именно &quot;самостоятельное&quot; восстановление, для прокачки навыков......</blockquote>ogg и 3gpp - неудачные форматы для проработки навыков восстановления файлов ….. это медиаконтейнеры, в которые напичкано (и + к этому еще и сжато) много всякой ерунды. Опыта восстановления этих форматов не имею, но .......<br />- если подходит mp3, то не проще ли попытаться сконвертировать в mp3 ….....<br />- или если не особо важна всякая аудиоинфа можно попробовать удалить все лишнее (или частично), оставив одну сигнатуру
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170213"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170213/">#</a>
            6 лет, 3 месяца назад
            
                (отредактировано
                
                    6 лет, 3 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br>Stream #0:0(eng): <strong>Audio: aac (LC)</strong> (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 128 kb/s (default)</blockquote>Могу и ошибаться, но смущает формат <strong>aac (LC)</strong> , хотя пишешь про <strong>ogg vorbis</strong> — это разные форматы и у них разные сигнатуры<br />Вот пример моего тестового файла ogg<br />$ ffmpeg -i &#39;/audio/fortuna-48kbps.ogg&#39;<br />…...................<br />Input #0, <strong>ogg</strong>, from &#39;/audio/fortuna-48kbps.ogg&#39;:<br />  Duration: 00:00:22.09, start: 0.000000, bitrate: 50 kb/s<br />    Stream #0:0: <strong>Audio: vorbis</strong>, 44100 Hz, stereo, fltp, 48 kb/s<br /><em>Сигнатура файла 4F 67 67 53 00 02 00 00 (или ASCII — OggS....) - проверь …..</em><br />PS.... Totem может не поддерживать aac (LC)..... ?
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170214"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alsoijw/">
                <span class="post-username">alsoijw</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170214/">#</a>
            6 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/3c/7d/3c7ddaf51c033cca68db98a2daff52d0.png" alt="alsoijw avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alsoijw/topics/">
                    9
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alsoijw/posts/">
                    321
                </a>
            </div>
            <div>
                Участник с: 17 октября 2014
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vasek</em><br>- если подходит mp3, то не проще ли попытаться сконвертировать в mp3 ….....</blockquote>В смысле подходит? Для хранения? Можно и так. Чем конвертировать? ffmpeg не желает работать с повреждёнными файлами.<br /><pre><code><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="06676a75696f6c71466a6965676a6e697572">[email&#160;protected]</a> ~&gt;  ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-06-04_100123.3gpp&#39; &#39;3.mp3&#39;
ffmpeg version 2.8.7 Copyright (c) 2000-2016 the FFmpeg developers
  built with gcc 5.3.1 (GCC) 20160406 (Red Hat 5.3.1-6)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags=&#39;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#39; --enable-bzlib --disable-crystalhd --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libcdio --enable-libdc1394 --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-libpulse --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libvorbis --enable-libv4l2 --enable-libvpx --enable-libx264 --enable-libx265 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 31.100 / 54. 31.100
  libavcodec     56. 60.100 / 56. 60.100
  libavformat    56. 40.101 / 56. 40.101
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 40.101 /  5. 40.101
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  2.101 /  1.  2.101
  libpostproc    53.  3.100 / 53.  3.100
[mov,mp4,m4a,3gp,3g2,mj2 @ 0xe04700] moov atom not found
/home/alsoijw/Музыка/r/Recording/Rec_2016-06-04_100123.3gpp: Invalid data found when processing input
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="07666b74686e6d70476b6864666b6f687473">[email&#160;protected]</a> ~&gt;
</code></pre><blockquote><em>vasek</em><br>- или если не особо важна всякая аудиоинфа можно попробовать удалить все лишнее (или частично), оставив одну сигнатуру</blockquote>Что такое аудиоинфа? Как сделать то что ты предлагаешь? Мне нужен исключительно звук. Больше там ничего нет(тегов всяких).<br /><br /><blockquote><em>vasek</em><br><blockquote><em>alsoijw</em><br>Stream #0:0(eng): <strong>Audio: aac (LC)</strong> (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 128 kb/s (default)</blockquote>Могу и ошибаться, но смущает формат <strong>aac (LC)</strong> , хотя пишешь про <strong>ogg vorbis</strong> — это разные форматы и у них разные сигнатуры<br />Вот пример моего тестового файла ogg<br />$ ffmpeg -i &#39;/audio/fortuna-48kbps.ogg&#39;<br />…...................<br />Input #0, <strong>ogg</strong>, from &#39;/audio/fortuna-48kbps.ogg&#39;:<br />  Duration: 00:00:22.09, start: 0.000000, bitrate: 50 kb/s<br />    Stream #0:0: <strong>Audio: vorbis</strong>, 44100 Hz, stereo, fltp, 48 kb/s<br /><em>Сигнатура файла 4F 67 67 53 00 02 00 00 (или ASCII — OggS....) - проверь …..</em><br />PS.... Totem может не поддерживать aac (LC)..... ?</blockquote>Выше приведены сигнатуры чиатемых файлов. Почему такой формат? Я не знаю, не я писал диктофон под андроид.
            
                
                    <div class="post-signature">
                        Мало видеть нам начало - надо видеть и конец.<br />Если видишь ты создание - значит где-то есть ТВОРЕЦ
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170218"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170218/">#</a>
            6 лет, 3 месяца назад
            
                (отредактировано
                
                    6 лет, 3 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5e3f322d313734291e32313d3f3236312d2a">[email&#160;protected]</a> ~&gt; ffmpeg -i &#39;/home/alsoijw/Музыка/r/Recording/Rec_2016-01-03_133210.<strong>3gpp</strong>&#39;</blockquote><blockquote><em>alsoijw</em><br>Выше приведены сигнатуры чиатемых файлов.</blockquote>Я вчера поздно вечером и <u>не заметил, что приведены файлы <strong>не ogg , а 3gpp</strong>, которые могут сохранять аудио как и AAC (LC)</u><br />В части конвертации — можно попробовать специальные конверторы для преобразования 3gpp в mp3 … может и вытащат ….<br /><u>Насчет воостановления</u> — занимался этим раньше, но никогда не имел дела с аудиоформатами …. Из опыта восстановления удаленных файлов, например фото, иногда файл восстанавливается и пишут успешно, но файл не открывается — обычно причина в том, что попорчен один или несколько нужных (реперных) байтов и достаточно их подправить и все работает …. но нужно знать структуру (формат) восстанавливаемых файлов …..<br />Попробуй сравнить нормальные и дефектные файлы ….. как правило все находится в самом начале (иногда в конце) …......... удобно использовать для сравнения <strong>vbindiff</strong> — ясно, что отличий будет очень много, но смотри начало (или конец) …..... а лучше найти структуру формата 3gpp  (чтобы определиться с нужными реперными байтами, без которых файл не откроется)  ...... но это очень нудная и сложная работа...<br /><br />PS.......... в качестве примера о представлении формата файла, привожу простую стуктуру файла <a href="http://vbzero.narod.ru/articles/article_4.htm">jpg</a> ......... с аудиоформатами все намного сложнее ...
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170228"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170228/">#</a>
            6 лет, 3 месяца назад
            
                (отредактировано
                
                    6 лет, 3 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br>[mov,mp4,m4a,3gp,3g2,mj2 @ 0xe04700] <strong>moov atom not found</strong></blockquote>Я не спец в цифровом аудио, но судя по этому сообщению в поврежденных файлах отсутствует <strong>atom moov</strong>.....<br />Насколько мне известно в таких файлах должны присутствовать атомы <strong>ftyp</strong>, <strong>moov</strong>, <strong>mdat</strong> и др. (зависит от формата). Атом ftyp содержит тип этого файла и типы версий основных структур файла. Этот атом всегда первый в файле. Атом mdat содержит потоки видео, аудио, субтитров — и вообщем то он не интересен. <u>Атом moov содержит описание треков, информацию о тегах</u> …<br />Что конкретно в них должно быть прописано и их положение в файле точно не знаю (знаю только то, что они находятся в начале файла …. и если посмотреть hex редактором, то имена этих атомов должны быть похоже прописаны в ASCII ….) - т.е. опять выходим на структуру формата. Сравни все-таки с нормальными файлами, как уже предлагал раньше.<br />Ты слушал аудиофайлы при восстановлении …... а не могут быть поврежденными именно эти файлы …..???<br /><br />PS.... скачал примеры 2 файлов - aac и 3gpp ......... привожу начало этих файлов<br />$ hexdump -C -n 64 ~/Загрузки/example.aac<br />00000000  00 00 00 20 66 74 79 70  4d 34 41 20 00 00 00 00  |... <strong>ftypM4A</strong> ....|<br />00000010  4d 34 41 20 6d 70 34 32  69 73 6f 6d 00 00 00 00  |M4A mp42isom....|<br />00000020  00 00 25 40 6d 6f 6f 76  00 00 00 6c 6d 76 68 64  |..%@<strong>moov</strong>...lmvhd|<br />00000030  00 00 00 00 d0 93 8f 93  d0 93 8f 94 00 00 ac 44  |...............D|<br />00000040<br /><br />$ hexdump -C -n 64 ~/Загрузки/example.3gpp<br />00000000  00 00 00 1c 66 74 79 70  33 67 32 61 00 01 00 00  |....<strong>ftyp3g2a</strong>....|<br />00000010  69 73 6f 6d 69 73 6f 32  33 67 32 61 00 00 00 08  |isomiso23g2a....|<br />00000020  66 72 65 65 00 19 9a 52  6d 64 61 74 21 10 05 20  |free...R<strong>mdat</strong>!.. |<br />00000030  a4 1b ff c0 00 00 00 00  00 00 00 00 00 00 00 00  |................|<br />00000040<br /> 3gpp попался не удачный — одно видео, без звука и в нем нет признаков наличия атома moov
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170241"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170241/">#</a>
            6 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br>[mov,mp4,m4a,3gp,3g2,mj2 @ 0xe04700] moov atom not found /home/alsoijw/Музыка/r/Recording/Rec_2016-06-04_100123.3gpp: Invalid data found when processing input</blockquote>Провел эксперимент — изменил 1 байт в файле example.aac — поступил просто,тупо заменил moov (6D 6F 6F 76)  на foov (66 6F 6F 76) …..... и получил твои ошибки<br /><pre><code>$ ffmpeg -i &#39;~/Загрузки/example_.aac&#39;
…..........................................................
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x98007a0] moov atom not found
~/Загрузки/example_.aac: Invalid data found when processing input</code></pre>Т.е. в 1-ую очередь нужно проверить данные атома moov, сравнив с нормальным файлом.....
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170638"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alsoijw/">
                <span class="post-username">alsoijw</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170638/">#</a>
            6 лет, 2 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/3c/7d/3c7ddaf51c033cca68db98a2daff52d0.png" alt="alsoijw avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alsoijw/topics/">
                    9
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alsoijw/posts/">
                    321
                </a>
            </div>
            <div>
                Участник с: 17 октября 2014
            </div>
            
        </td>
        <td class="post-content">
            Вот структура воспроизводимого файла.<br /><pre><code> hexdump -C -n 64 Музыка/r/Recording/Rec_2016-01-03_133210.3gpp
00000000  00 00 00 18 66 74 79 70  33 67 70 34 00 00 00 00  |....ftyp3gp4....|
00000010  69 73 6f 6d 33 67 70 34  00 00 0f e8 66 72 65 65  |isom3gp4....free|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000040
</code></pre>
            
                
                    <div class="post-signature">
                        Мало видеть нам начало - надо видеть и конец.<br />Если видишь ты создание - значит где-то есть ТВОРЕЦ
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170639"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alsoijw/">
                <span class="post-username">alsoijw</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170639/">#</a>
            6 лет, 2 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/3c/7d/3c7ddaf51c033cca68db98a2daff52d0.png" alt="alsoijw avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alsoijw/topics/">
                    9
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alsoijw/posts/">
                    321
                </a>
            </div>
            <div>
                Участник с: 17 октября 2014
            </div>
            
        </td>
        <td class="post-content">
            У повреждённого эта часть тоже совпадает.
            
                
                    <div class="post-signature">
                        Мало видеть нам начало - надо видеть и конец.<br />Если видишь ты создание - значит где-то есть ТВОРЕЦ
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170640"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/170640/">#</a>
            6 лет, 2 месяца назад
            
                (отредактировано
                
                    6 лет, 2 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>alsoijw</em><br>У повреждённого эта часть тоже совпадает.</blockquote>Первые 64 байта я привел просто от балды - на самом деле все выглядит одновременно и просто, но в то же время и сложно.....<br />Не вдаваясь в описание формата 3gpp (все хорошо расписано в инете …) отмечу только, что внутри контейнера аудио сохраняется в форматах AMR-NB или AAC-LC, а видео как MPEG-4 или H.263.  А вот сам формат MPEG4 (да вообщем то и всех медиаконтейнеров) <u>состоит из блоков, которые обычно называют atom (атомами), но правильнее назвать их box</u> (согласно спецификации).  А вот сами box, точнее их тело/данные,   имеют древовидную структуру, т. е. <u>в box могут быть вложены другие box</u>..... Вот в этом то вся и сложность анализа этих файлов.............. отчего я отказался в свое время от работы по восстановлению этих файлов, после прочтения стандарта по структуре формата этих контейнеров.<br />Каждый box имеет следующий формат (привожу для 32-битной структуры формата)<br />байты  0, 1, 2, 3 — длина box (включая эти байты)<br />байты  4, 5, 6, 7 — наименование box<br />байты 8, и далее — тело (данные) box<br />Самый 1-ый box - ftyp ….<br />Например, тебя интересует box (atom) moov, который имеет следующую древовидную структуру (состоит из следующих box)<br />moov /<br />…..... mvhd<br />…..... ainf<br />…..... iods<br />…..... meta<br />......... trak<br />…..... и.т.д.<br />Среди них имеются и обязательные и необязательные box …. и некоторые имеют header ( а может и все, уже не помню ….) …..... одним словом <strong>без описания структуры формата даже нет смысла и подступаться к этим файлам....</strong><br />Если заинтересуешься и не найдешь стандарт по формату, посмотрю у себя...... где то валялся<br /><em>PS.... для только одного аудио должно быть проще.... ну и не могу ничего сказать какой будет формат в случае одного аудио .....</em>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/16146/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747af89648067b77',m:'1Mv0jXIexrD3mcIsYdAPkhklwHCQG5VVypvPnz4Glio-1662674576-0-Ae0GfUZAN9/X6mDwAaGF3pqj8TDRZScVaPmbpylz5pVNul5r+FfZhuw0DgFlbNWkjEDkUBix863Iyu+/xGQ++Xv2MWMNdBUP3QMY4pqy5fWbsSIrUk4GYpB/nIj/HNgdCsVTT9cTLGkW+Sd7nQMYYFc=',s:[0xbe40832635,0x14565a6486],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
