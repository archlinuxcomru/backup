


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        [РЕШЕНО] Помогите настроить маршруты
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/9/">Новичкам в Arch Linux</a> <span class="divider">/</span></li>
            
        
        
            <li>[РЕШЕНО] Помогите настроить маршруты</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>[РЕШЕНО] Помогите настроить маршруты</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41090"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Natrio/">
                <span class="post-username">Natrio</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41090/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Natrio/topics/">
                    47
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Natrio/posts/">
                    4763
                </a>
            </div>
            <div>
                Участник с: 08 января 2011
            </div>
            
        </td>
        <td class="post-content">
            &ldquo;не надо оваций&rdquo; (ц) :)<br/><br/><strong>ArT666</strong>, если вы уверены, что интерфейс с этими диапазонами адресов никуда не пропадёт в процессе – можно и в rc.local . В противном случае лучше в тот скрипт, который у вас подымает (а при надобности и повторно подымает) данную сеть.<br/><br/><strong>sleepycat</strong> – один шлюз, как и было заказано&#8230; Откуда я знаю, зачем понадобилась столь подробно расписывать такую кучу мелких подсетей? Я просто набросал, как это можно сделать :)<br/><br/><em>P.S.</em><br/><strong>ArT666</strong>, а можно попобробнее – чему он должен был помочь?<br/>Может, у вас порты закрыты или клиент не так настроен?<br/>Или вы не подняли сеть? Этот скрипт только маршруты пишет, сеть надо перед этим поднимать.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41091"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/sleepycat/">
                <span class="post-username">sleepycat</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41091/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f2/c0/f2c02cdf7ab1395c1ebcd403ff0c9d53.png" alt="sleepycat avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/sleepycat/topics/">
                    98
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/sleepycat/posts/">
                    3291
                </a>
            </div>
            <div>
                Участник с: 19 июля 2011
            </div>
            
        </td>
        <td class="post-content">
            <strong>Natrio</strong>, ой пардон. галюцинации.. в параллельной теме тоже вопрос маршрута&#8230;я походу перепутал&#8230;да в задаче топикстартера действительно один шлюз&#8230;был не прав.
            
                
                    <div class="post-signature">
                        Лозунг у них был такой: &quot;Познание бесконечности требует бесконечного времени&quot;. С этим я не спорил, но они делали из этого неожиданный вывод: &quot;А потому работай не работай — все едино&quot;. И в интересах неувеличения энтропии Вселенной они не работали. (с)
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41092"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/art666/">
                <span class="post-username">art666</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41092/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/art666/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/art666/posts/">
                    82
                </a>
            </div>
            <div>
                Участник с: 12 мая 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Natrio</em><br/><strong>ArT666</strong>, если вы уверены, что интерфейс с этими диапазонами адресов никуда не пропадёт в процессе – можно и в rc.local . В противном случае лучше в тот скрипт, который у вас подымает (а при надобности и повторно подымает) данную сеть.</blockquote>Я в rc.local писал и так, и так(т.е. и скриптом и просто все маршруты прописывал) нифига не помогло.. <br/><blockquote><em>Natrio</em><br/><em>P.S.</em><br/><strong>ArT666</strong>, а можно попобробнее – чему он должен был помочь?<br/>Может, у вас порты закрыты или клиент не так настроен?<br/>Или вы не подняли сеть? Этот скрипт только маршруты пишет, сеть надо перед этим поднимать.</blockquote>Помочь он должен, как я и писал в первом посте, правильной работе локального трекера.. Насчет  поднятия сети, у меня vpn через локалку, т. е. eth0 автоматом при запуске, а для vpn - тоже сделал файл автозапуска и авто настройки таблицы маршрутизации(вроде так это называется)&#8230; поэтому после загрузки рабочего окружения у меня все интерфейсы(eth0, lo, ppp0) подняты и в процессе не падают&#8230;<br/><br/>ЗЫ Благодарю за то что сделали этот скрипт, но он не помог :( Буду пробовать netcfg..
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41093"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Natrio/">
                <span class="post-username">Natrio</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41093/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Natrio/topics/">
                    47
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Natrio/posts/">
                    4763
                </a>
            </div>
            <div>
                Участник с: 08 января 2011
            </div>
            
        </td>
        <td class="post-content">
            <strong>ArT666</strong>, что значит &ldquo;не помог&rdquo;? Роуты не прописались, или пакеты идут не туда? Покажите тогда, пожалуйста, вашу полную таблицу маршрутизации, команда <strong>ip route list</strong><br/>Без этого нельзя точно сказать, что у вас не так.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41094"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/art666/">
                <span class="post-username">art666</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41094/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/art666/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/art666/posts/">
                    82
                </a>
            </div>
            <div>
                Участник с: 12 мая 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Natrio</em><br/><strong>ArT666</strong>, что значит &ldquo;не помог&rdquo;? </blockquote>Ох, мож я что не так объясняю?! Попробую поточней:<br/>Провайдер мой <a href="http://dianet.info/">Dianet</a>, интернет дает через локальную сеть, посредством виртуальной частной сети(vpn), имеет <a href="http://bt.dianet.info/">локальный торрент-трекер</a>, что бы от туда качать что-либо, нужно направлять маршруты(как в первом посте указано). Для windows есть софтина, <a href="http://start.dianet.info/index.php?action=dialer">DianetDialer</a>. Для *никс систем нужно самому направлять эти маршруты(<a href="http://bt.dianet.info/viewtopic.php?f=30&amp;t=1989">вот пост на об этом на трекере</a>). Вот, для этого я скопировал(!), не сам писал, чтоб не ошибиться, скрипт что вы любезно предоставили в <strong>/etc/rc.local</strong> и ребутнулся, при загрузке, где показывается состояние загруки всех демонов, там выскочили какието ошибки(разгледеть успел только <strong>RNETLINK &#8230; failed</strong>).. как кеды загрузились, запустил торрент клиент (ktorrent) и запустил в нем загрузку торрента с локального трекера, в ответ: &ldquo;Нет соединения с трекером&rdquo;.. Значит не помог ваш скрипт, надеюсь сейчас объяснил понятно :) <br/>ЗЫ так же пробовал вручную прописывать: <strong>ip route $IP/32 src $Gateway</strong>, после чего перезапуск и снова то же самое: &ldquo;Нет соеденения с трекером&rdquo;<br/> <br/><blockquote><em>Natrio</em><br/><strong>ArT666</strong>,  Покажите тогда, пожалуйста, вашу полную таблицу маршрутизации, команда <strong>ip route list</strong><br/>Без этого нельзя точно сказать, что у вас не так.</blockquote>Вот вывод <strong>ip route list</strong>(в <strong>/etc/rc.local</strong> убрал вышеприведенный скрипт):<br/><div class="code"><pre>^_^[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2544575165445751085546">[email&#160;protected]</a>:~]$ ip route list
default via 93.189.220.142 dev ppp0 
93.189.220.3 via 172.16.38.1 dev eth0  src 172.16.39.18 
93.189.220.142 dev ppp0  proto kernel  scope link  src 109.237.149.238 
172.16.38.0/23 dev eth0  proto kernel  scope link  src 172.16.39.18  metric 202 </pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-41095"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/art666/">
                <span class="post-username">art666</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/41095/">#</a>
            11 лет, 1 месяц назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/art666/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/art666/posts/">
                    82
                </a>
            </div>
            <div>
                Участник с: 12 мая 2011
            </div>
            
        </td>
        <td class="post-content">
            Все, благодарю всех, особенно <strong>Natrio</strong> ! =) Проблема решилась, благодаря вашему скрипту, <strong>Natrio</strong>.. только я его немного поправил&#8230; <br/>вот содержание моего <strong>rc.local</strong>:<br/><div class="code"><pre>#!/bin/bash
#
# /etc/rc.local: Local multi-user startup script.
#
# чтобы не писать триста раз одно и то же
RO="ip ro add"
GT="via 172.16.38.1 dev eth0"
# маска 255.255.255.255 это все 32 бита от начала, то есть /32
$RO 78.109.128.1/32 $GT
$RO 78.109.128.2/32 $GT
$RO 172.16.20.58/32 $GT
# маска 255.255.254.0 соответственно, /23
# чтобы не переписывать всё ещё триста раз, делаем цикл по третьему байту IP
for i in 20 28 30 32 34 36 40 42 44 46 48
do
$RO 172.16.$i.0/23 $GT
done
# маска 255.255.252.0 убирается ещё один младший бит, /22
$RO 10.110.0.0/22 $GT</pre></div><br/>Вот вывод <strong>ip ro list</strong>:<br/><div class="code"><pre>^_^[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="20415254604152540d5043">[email&#160;protected]</a>:~]$ ip ro list
default via 93.189.220.143 dev ppp0 
10.110.0.0/22 via 172.16.38.1 dev eth0 
78.109.128.1 via 172.16.38.1 dev eth0 
78.109.128.2 via 172.16.38.1 dev eth0 
93.189.220.4 via 172.16.38.1 dev eth0  src 172.16.39.18 
93.189.220.143 dev ppp0  proto kernel  scope link  src 109.237.155.85 
172.16.20.0/23 via 172.16.38.1 dev eth0 
172.16.20.58 via 172.16.38.1 dev eth0 
172.16.28.0/23 via 172.16.38.1 dev eth0 
172.16.30.0/23 via 172.16.38.1 dev eth0 
172.16.32.0/23 via 172.16.38.1 dev eth0 
172.16.34.0/23 via 172.16.38.1 dev eth0 
172.16.36.0/23 via 172.16.38.1 dev eth0 
172.16.38.0/23 dev eth0  proto kernel  scope link  src 172.16.39.18  metric 202 
172.16.40.0/23 via 172.16.38.1 dev eth0 
172.16.42.0/23 via 172.16.38.1 dev eth0 
172.16.44.0/23 via 172.16.38.1 dev eth0 
172.16.46.0/23 via 172.16.38.1 dev eth0 
172.16.48.0/23 via 172.16.38.1 dev eth0 </pre></div>Еще раз спасибо.. ну держись теперь локальный трекер XD
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/4090/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747b483e0bba163d',m:'cMI4FBjt.3qMdrfq1tH4G5M7sgvg4_5CnwQrCcoJXa0-1662677836-0-AS1HI93so46tDIGrp7MQjgQWn7N8T3eL59eVtIILXvDvbBTSI31tUBJ95TgqzvDZV+NxZAJd1JdDTlNR20qt8aJlZFOH88IDztt+Bxz+UKXC8/NUvP0vWtRDfLk2n6FwLU46OX1tx1cUOY/AZlE1hfo=',s:[0x65321c872b,0xcfe0ba1ca8],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
