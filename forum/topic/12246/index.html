


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/12246/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:28:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        /srv/http/ file permissions
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/6/index.html">Разработка</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/19/index.html">Уголок разработчика</a> <span class="divider">/</span></li>
            
        
        
            <li>/srv/http/ file permissions</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>/srv/http/ file permissions</h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118241"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/tiker/index.html">
                <span class="post-username">tiker</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118241/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/tiker/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/tiker/posts/index.html">
                    11
                </a>
            </div>
            <div>
                Участник с: 18 июня 2013
            </div>
            
        </td>
        <td class="post-content">
            Доброе время суток!<br/><br/>Решил освоить php.<br/><br/>Поставил LAMP, все работает ок. Только я не понял как быть с правами на /srv/http/ и файлами там. Подскажите, пожалуйста, как правильнее запилить, да и так чтобы арч вей ?))<br/><br/>сейчас:<br/><div class="code"><pre>
drwxr-xr-x 2 root root 4096 авг 21 14:31 .
drwxr-xr-x 4 root root 4096 июн  1 02:40 ..
-rw-r--r-- 1 root root  105 авг 21 14:30 index.html</pre></div><br/>То есть интересует: 1. как это на машине разработчика 2. как на продакш ?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118267"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/domov0y/index.html">
                <span class="post-username">domov0y</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118267/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/domov0y/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/domov0y/posts/index.html">
                    819
                </a>
            </div>
            <div>
                Участник с: 09 июля 2011
            </div>
            
        </td>
        <td class="post-content">
            0. под рутом не работайте. Это вредно для здоровья системы.<br/>1. сервер работает под пользователем http. Соответственно  должно быть доступно чтение файлов от этого пользователя. (на машине разработчика этого достаточно)<br/><br/>2. На продакшен все сложнее.<br/>ftp сервер запускать с опцией chroot. (пользователь не должен иметь права на выход из домашней папки.)<br/>если запускается ssh, то выделить отдельную папку  usr1 с минимальным(!!!) числом необходимых утилит. Клиентам подсунуть path на эту самую папку. usr не должен быть доступен.<br/><br/>Если не используется вождь племени индейцев с модулями типа suphp (обеспечивает запуск пхп от прав конкретного пользователя) то см первое утверждение. На практике оно означает следующее: пользователям подключающимся по ftp за основную группу ставят http; на группу в обязательном порядке ставить права не выше пятерки(rx). Виртуальные хосты настраивают так, чтобы они ссылались допустим на www в домашней папке пользователя. Домашнюю папку пользователя лучше обзывать безликим md5(username).<br/><br/>о suphp  и прочих игрушках меняющих права пользователя читайте отдельно.
            
                
                    <div class="post-signature">
                        Да пребудет с вами знание ip адреса
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118546"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/tiker/index.html">
                <span class="post-username">tiker</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118546/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/tiker/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/tiker/posts/index.html">
                    11
                </a>
            </div>
            <div>
                Участник с: 18 июня 2013
            </div>
            
        </td>
        <td class="post-content">
            domov0y, спасибо за ответ.<br/><br/>Для тех кому интересно нагуглилося еще:<br/>Канонический ответ на этот вопрос: <a href="http://serverfault.com/questions/357108/what-are-the-best-linux-permissions-to-use-for-my-website"> FAQ serverfault.com</a><br/>Оф документация по этому вопросу: <a href="http://httpd.apache.org/docs/current/misc/security_tips.html"> apache.org</a><br/><br/>Ну и парочку годный статеек на вики в тему разрешений для ФС:<br/><a href="http://en.wikipedia.org/wiki/File_system_permissions#Traditional_Unix_permissions"> Traditional_Unix_permissions, en.wikipedia.org</a><br/><a href="http://en.wikipedia.org/wiki/Modes_(Unix)"> Modes_(Unix), en.wikipedia.org</a>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118555"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Jisatsu/index.html">
                <span class="post-username">Jisatsu</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118555/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/e6/d7/e6d72b894fc7999d5acf9df9172e0b8a.png" alt="Jisatsu avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/Jisatsu/topics/index.html">
                    17
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Jisatsu/posts/index.html">
                    389
                </a>
            </div>
            <div>
                Участник с: 14 июня 2013
            </div>
            
        </td>
        <td class="post-content">
            Я делаю проще... У меня все сайты в домашней папке и синхронятся в облако. =) Шарить наружу - не надо. Бессмысленно. Ровно как и высшая степень идиотизма - делать сервер на Arch. Он слишком "быстр" в развитии, чтобы ничего не отвалилось на боевом сервере. Только локально.
            
                
                    <div class="post-signature">
                        Keep it simple, stupid!
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118563"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/domov0y/index.html">
                <span class="post-username">domov0y</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118563/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/domov0y/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/domov0y/posts/index.html">
                    819
                </a>
            </div>
            <div>
                Участник с: 09 июля 2011
            </div>
            
        </td>
        <td class="post-content">
            Jisatsu, никто не говорит про высоконагруженный сервер на базе арч. Хотя технически ничего страшного в том чтобы его выпустить  в сеть.<br/>По сути самые страшные  обновления это глибц, systemd  и filesystem.<br/>Веб сервер и пхп не так критичны (довести их до состояния "не запускается" с помощью обновления мягко говоря сложно ).<br/>СУБД требует небольшой осторожности.<br/>А больше на сервере практически ничего и нету. coreutils, binutils, wget, iptables, links, openssh, systemd.<br/>Главное не обновляться на ходу.
            
                
                    <div class="post-signature">
                        Да пребудет с вами знание ip адреса
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118571"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Jisatsu/index.html">
                <span class="post-username">Jisatsu</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118571/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/e6/d7/e6d72b894fc7999d5acf9df9172e0b8a.png" alt="Jisatsu avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/Jisatsu/topics/index.html">
                    17
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Jisatsu/posts/index.html">
                    389
                </a>
            </div>
            <div>
                Участник с: 14 июня 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>domov0y</em><br/>Веб сервер и пхп не так критичны (довести их до состояния "не запускается" с помощью обновления мягко говоря сложно ).</blockquote>Вам часто приходиться обновлять боевой сервер? Почему так уверены, что сломать нельзя? А миграция с MySQL на MariaDB? Хотя тут лукавлю, это не особо то и проблема. =) А то, что куча нужных модулей ещё не вышла для новой версии PHP? А если в самом пыхе что-то сломали/добавили дырку? Извиняйте, но кроме Debian или CentOS я для сервера вообще ничего не признаю. =) Кстати CentOS довольно нередко обновляется, но там только очень уж стабильные версии. Там до сих пор 5.4.18, у меня же Арч уже апнулся на 5.5! Приложение которое было начато на PHP 5.2, рефактореное  (местами, где попало под руку), по просту при обновлении на PHP 5.5 может перестать работать из-за deprecate вступивших в силу и т.д.
            
                
                    <div class="post-signature">
                        Keep it simple, stupid!
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118576"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/domov0y/index.html">
                <span class="post-username">domov0y</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118576/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/domov0y/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/domov0y/posts/index.html">
                    819
                </a>
            </div>
            <div>
                Участник с: 09 июля 2011
            </div>
            
        </td>
        <td class="post-content">
            Jisatsu, как говорил один  литературный персонаж "Говорила мне  мама не  правь модули на ходу".<br/>1. Вот ни за что  не  поверю что кто то в здравом уме и трезвой памяти будет раз в день обновлять критически важную машину (и даже раз в неделю никто не  будет обновлять)<br/>2. Ни за что не  поверю что вот так  просто без бекапов и предварительной обкатки обновления  кто то  будет ставить на сервер нвые версии сервисов. Если только  "сервер" не выступает в роли полутора сайтов и одного облачного хранилища.
            
                
                    <div class="post-signature">
                        Да пребудет с вами знание ip адреса
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118580"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/lampslave/index.html">
                <span class="post-username">lampslave</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118580/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/lampslave/topics/index.html">
                    32
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/lampslave/posts/index.html">
                    4796
                </a>
            </div>
            <div>
                Участник с: 05 июля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>Jisatsu, как говорил один литературный персонаж "Говорила мне мама не правь модули на ходу".</blockquote>Ну так и он о том же. С одной стороны, серьёзный сервер постоянно обновлять нельзя. С другой - его обязательно надо обновлять, потому что это Арч, у которого риск сдохнуть при обновлении повышается с каждым пропущенным днём.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-118581"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Jisatsu/index.html">
                <span class="post-username">Jisatsu</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/118581/index.html">#</a>
            9 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/e6/d7/e6d72b894fc7999d5acf9df9172e0b8a.png" alt="Jisatsu avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/Jisatsu/topics/index.html">
                    17
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Jisatsu/posts/index.html">
                    389
                </a>
            </div>
            <div>
                Участник с: 14 июня 2013
            </div>
            
        </td>
        <td class="post-content">
            Любое минорное обновление - это багфикс или закрытие дырок. Поэтому важно обновляться с каждым обновлением. И тут Debian/CentOS выступают лучше всех. А Arch слишком широко шагает. Слишком быстро. Как итог - имеем нестабильный сервер с кучей багов, а то и дырок из-за того, что боимся чего-то сломать из-за слишком новой версии.<br/>Мы постоянно обновляем серьёзный сервер, ибо руки не из жопы, и если возникают минормные проблемы, то всё быстро решается. А вот если бы проблемы были бы мажорными, по куче разных программ, то никакие руки его так быстро не поднимут на ноги. :)
            
                
                    <div class="post-signature">
                        Keep it simple, stupid!
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/indexda05.html?next=/forum/topic/12246/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/12246/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:28:31 GMT -->
</html>
