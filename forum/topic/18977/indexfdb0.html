


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Датчик температуры процессора
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/12/">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>Датчик температуры процессора</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Датчик температуры процессора</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=7">7</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212601"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212601/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, что у тебя за AMD? Лучше вывод <strong>cat /proc/cpuinfo | head -n 5</strong>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212602"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/redix/">
                <span class="post-username">redix</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212602/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/85/25/8525b8b3d838c29f000f57cb18c9307a.png" alt="redix avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/redix/topics/">
                    34
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/redix/posts/">
                    3433
                </a>
            </div>
            <div>
                Участник с: 11 марта 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>vasek</strong>, а я и не разбирался особо, увидел неполадки и запустил коньки через терминал, потом гуглил те матюки, что он мне выдал. ) После Центоси еще пришлось то же самое проделать с конфигами dunst и compton.
            
                
                    <div class="post-signature">
                        In Tux We Trust
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212604"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nafanja/">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212604/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nafanja/topics/">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nafanja/posts/">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            <strong>vasek</strong>,<br />cat /proc/cpuinfo | head -n 5<br /><pre><code>processor       : 0
vendor_id       : AuthenticAMD
cpu family      : 21
model           : 48
model name      : AMD A10-7850K Radeon R7, 12 Compute Cores 4C+8G
</code></pre>
            
                
                    <div class="post-signature">
                        <a href="https://archlinux.org.ru/forum/topic/10992/">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212605"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nafanja/">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212605/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nafanja/topics/">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nafanja/posts/">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            <blockquote><em>redix</em><br>проблему решило обращение к hwmon, я уже не помню где нашел, но это работает. К слову сказать этот самый hwmon связан с lm_sensors,</blockquote>да, в /sys/class/hwmon/ живут датчики разные.<br />а эта команда в конфиге коньков <strong>${hwmon 1 temp 1}</strong> делает тоже самое что и <strong>cat /sys/class/hwmon/hwmon1/temp1_input</strong> только <strike>умноженное</strike> деленное на 1000.
            
                
                    <div class="post-signature">
                        <a href="https://archlinux.org.ru/forum/topic/10992/">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212606"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212606/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, посмотрел документацию по AMD и .... скажу, что это не Intel, в котором намного проще.<br />Похоже температура высчитывается также относительно max (Tctl_max - Tctl), но вот когда посмотрел регистры, в которых это можно прочитать, сразу приуныл.<br />Нет, это уже не для меня.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212607"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Vadim/">
                <span class="post-username">Vadim</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212607/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/72/22/7222132327ed41066e6514a2df7291c9.png" alt="Vadim avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Vadim/topics/">
                    280
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Vadim/posts/">
                    1912
                </a>
            </div>
            <div>
                Участник с: 20 ноября 2013
            </div>
            
        </td>
        <td class="post-content">
            Нашёл утилиту inxi,есть в aur ,<a href="http://ftp.cn.debian.org/archlinuxcn/x86_64/">есть вот тут</a>.Много разных функций,с ключом -s показывает дртчики.<br /><pre><code>inxi -s
Sensors:   System Temperatures: cpu: 36.0C mobo: N/A gpu: 9.0
           Fan Speeds (in rpm): cpu: 2002 fan-2: 0 fan-3: 0 fan-4: 0 fan-5: 0
</code></pre>теперь хоть понятно что вывод sensors temp1:        +36.0°C  (low  = +127.0°C, high = +127.0°C)  sensor = thermistor это температура цпу<pre><code> sensors
k10temp-pci-00c3
Adapter: PCI adapter
temp1:         +6.5°C  (high = +70.0°C)
                       (crit = +80.0°C, hyst = +79.0°C)

radeon-pci-0008
Adapter: PCI adapter
temp1:         +7.0°C  (crit = +120.0°C, hyst = +90.0°C)

it8620-isa-0228
Adapter: ISA adapter
in0:          +0.84 V  (min =  +0.00 V, max =  +3.06 V)
in1:          +1.52 V  (min =  +0.00 V, max =  +3.06 V)
in2:          +2.05 V  (min =  +0.00 V, max =  +3.06 V)
in3:          +2.06 V  (min =  +0.00 V, max =  +3.06 V)
in4:          +2.04 V  (min =  +0.00 V, max =  +3.06 V)
in5:          +2.23 V  (min =  +0.00 V, max =  +3.06 V)
in6:          +2.23 V  (min =  +0.00 V, max =  +3.06 V)
3VSB:         +3.29 V  (min =  +0.00 V, max =  +6.12 V)
Vbat:         +3.10 V
fan1:        2002 RPM  (min =    0 RPM)
fan2:           0 RPM  (min =    0 RPM)
fan3:           0 RPM  (min =    0 RPM)
fan4:           0 RPM  (min =    0 RPM)
fan5:           0 RPM  (min =    0 RPM)
temp1:        +36.0°C  (low  = +127.0°C, high = +127.0°C)  sensor = thermistor
temp2:       -128.0°C  (low  = +127.0°C, high = +127.0°C)  sensor = disabled
temp3:        +20.0°C  (low  = +127.0°C, high = +127.0°C)  sensor = Intel PECI
temp4:        +43.0°C
temp5:        +45.0°C
temp6:        +45.0°C
intrusion0:  ALARM

fam15h_power-pci-00c4
Adapter: PCI adapter
power1:           N/A  (crit =  65.19 W)</code></pre>а всё остальное ненужный мусор.Хорошая утилитка.Есть варианты <a href="https://gist.github.com/Zauberfisch/b79ff450fa1dcd27b6c645200eb821c4">направить её выход на conky</a>.Буду дальше думать.<br />Вот вывод почти всей информации ,от системы инициализации до сетевого интерфейса...Тестирую пока на mx18<pre><code>inxi -Fx
System:    Host: mx Kernel: 4.19.0-1-amd64 x86_64 (64 bit gcc: 6.3.0) Desktop: Openbox 3.6.1
           Distro: MX-18_x64 Continuum Dec 20, 2018
Machine:   Device: desktop System: Gigabyte product: N/A
           Mobo: Gigabyte model: F2A78M-DS2 v: x.x
           BIOS: American Megatrends v: FC date: 12/24/2015
CPU:       Quad core AMD A8-7600 Radeon R7 10 Compute Cores 4C+6G (-MCP-) cache: 8192 KB
           flags: (lm nx sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 svm) bmips: 24755
           clock speeds: max: 3100 MHz 1: 1552 MHz 2: 1847 MHz 3: 1396 MHz 4: 1396 MHz
Graphics:  Card: Advanced Micro Devices [AMD/ATI] Kaveri [Radeon R7 Graphics] bus-ID: 00:01.0
           Display Server: X.Org 1.19.2 drivers: ati,radeon (unloaded: modesetting,fbdev,vesa)
           Resolution: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ecddd5dedc94dddedcdcacd9d5c2d5d98496">[email&#160;protected]</a>
           GLX Renderer: AMD KAVERI (DRM 2.50.0, 4.19.0-1-amd64, LLVM 7.0.0)
           GLX Version: 4.4 (Compatibility Profile) Mesa 18.2.6 Direct Rendering: Yes
Audio:     Card Advanced Micro Devices [AMD] FCH Azalia Controller
           driver: snd_hda_intel bus-ID: 00:14.2
           Sound: Advanced Linux Sound Architecture v: k4.19.0-1-amd64
Network:   Card: Realtek RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller
           driver: r8169 port: e000 bus-ID: 01:00.0
           IF: eth0 state: up speed: 100 Mbps duplex: full mac: e0:d5:5e:14:04:a7
Drives:    HDD Total Size: 320.1GB (4.2% used)
           ID-1: /dev/sda model: SAMSUNG_HD321KJ size: 320.1GB
Partition: ID-1: / size: 32G used: 7.4G (25%) fs: ext4 dev: /dev/sda6
           ID-2: swap-1 size: 5.89GB used: 0.00GB (0%) fs: swap dev: /dev/sda5
Sensors:   System Temperatures: cpu: 36.0C mobo: N/A gpu: 9.0
           Fan Speeds (in rpm): cpu: 2070 fan-2: 0 fan-3: 0 fan-4: 0 fan-5: 0
Info:      Processes: 164 Uptime: 2:12 Memory: 2692.4/6916.7MB
           Init: SysVinit runlevel: 5 Gcc sys: 6.3.0 Client: Shell (bash 4.4.121) inxi: 2.3.5
</code></pre>
            
                
                    <div class="post-signature">
                        Linux Forever!
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212608"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212608/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Привожу для информации.<br />Заинтересовал средний вывод температуры, решил проверить, нашел регистр, который выводит усредненную температуру, плюс к этому сделал поправку к максимальной температуре и вот что получается (<strong>sys</strong> - системные значения,  <strong>reg_m</strong> - мгновенные из регистра,  <strong>reg_s</strong> - усредненные из регистра)<br /><strong>cpu_t.sh</strong><br /><pre><code>sys - 51 ... reg_m - 48 ... reg_s - 52
sys - 51 ... reg_m - 48 ... reg_s - 51
sys - 50 ... reg_m - 48 ... reg_s - 51
sys - 50 ... reg_m - 49 ... reg_s - 50
sys - 50 ... reg_m - 48 ... reg_s - 50
sys - 54 ... reg_m - 48 ... reg_s - 51
sys - 51 ... reg_m - 49 ... reg_s - 53
sys - 50 ... reg_m - 48 ... reg_s - 51
sys - 50 ... reg_m - 49 ... reg_s - 51
sys - 51 ... reg_m - 49 ... reg_s - 52
sys - 50 ... reg_m - 49 ... reg_s - 51
sys - 50 ... reg_m - 49 ... reg_s - 51
sys - 63 ... reg_m - 57 ... reg_s - 62
sys - 64 ... reg_m - 58 ... reg_s - 62
sys - 65 ... reg_m - 59 ... reg_s - 63
sys - 65 ... reg_m - 60 ... reg_s - 64
sys - 65 ... reg_m - 61 ... reg_s - 63
sys - 66 ... reg_m - 61 ... reg_s - 64
sys - 66 ... reg_m - 61 ... reg_s - 66
sys - 67 ... reg_m - 61 ... reg_s - 66
sys - 66 ... reg_m - 62 ... reg_s - 66
sys - 55 ... reg_m - 53 ... reg_s - 56
sys - 55 ... reg_m - 53 ... reg_s - 56
sys - 54 ... reg_m - 52 ... reg_s - 56
sys - 54 ... reg_m - 51 ... reg_s - 54</code></pre>Вообщем, система считывает усредненные значения, как и предполагал выше. Совпадение довольно хорошее, разницу можно списать на разницу во времени при выполнении команд в срипте.<br />Но не понятно одно, почему мгновенная температура cpu меньше усредненной? И чем выше температура, тем больше разница. Или усредненную специально завышают? Если это так, то можно это учитывать в работе - у меня ноут частенько при компиляции достигает значений 80-85 градусов, а максимальная по спецификации 85.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212613"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212613/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>nafanja</strong>, предлагаю на досуге попробовать определить температуру самому, считывая из регистра, если есть желание.<br />Конечно, точных советов дать не могу, так как я вообще не знаю AMD, но попробовать то можно, хотя бы ради интереса.<br />Вот <a href="https://www.amd.com/system/files/TechDocs/49125_15h_Models_30h-3Fh_BKDG.pdf">документация</a> на твой проц (Family 15h Models 30h-3F это <u>в 16-ричной системе</u>, а в <strong>10-ой</strong> системе это будет  <strong>Family 21 Models 48-63</strong>), смотри раздел <strong>2.10 Thermal Functions</strong><br />Если я правильно понял, то в регистре D18F3xA4 (биты 31:21) находится  Tctl - текущая относительная температура (относительно максимальной), а значит фактическая температура будет равна Tctl_max - Tctl. А так как максимальная согласно спецификации равна 72 градуса (<a href="http://www.cpu-world.com/CPUs/Bulldozer/AMD-A10-Series%20A10-7850K.html">точнее 72,4</a>), то получаем <strong>72 - Tctl</strong> .<br /><br /><strong>UPD 1</strong> - если я правильно понял, то значение максимальной температуры прописано в регистре D18F3x64  (bits: 30:28), которое можно и проверить, но следует уточнить биты - если в datasheet нажать на регистр, то перенесет в описание (побитное) этого регистра.<br />Что меня смущает, то большие обозначения регистров по отношению к Intel, но если читают спецы по регистрам AMD, то прояснят нам.<br /><br /><strong>UPD 2</strong> - в части чтения регистров - нужно установить пакет <strong>msr-tools</strong>, для чтения значений из регистра используется утилита <strong>rdmsr</strong>, но чтобы применять нужно загрузить <strong>модуль msr</strong>. Страшного в использования rdmsr ничего нет, даже если ошибешься, просто сообщит об ошибке. Как использовать rdmsr, приводил выше (через sudo).<br />Что то засомневался в возможности применения msr-tools для AMD, хотя по идее насколько помнится применимо и для Intel и для AMD.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212614"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nafanja/">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212614/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nafanja/topics/">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nafanja/posts/">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            <strong>vasek</strong>, что то не понял как пользоваться этим rdmsr<br />модуль msr загружен<br /><pre><code>lsmod | grep msr
msr                    16384  0</code></pre><br /><pre><code>rdmsr D18F3xA4
0</code></pre><pre><code>rdmsr D18F3xA4 -f 31:21
0</code></pre>
            
                
                    <div class="post-signature">
                        <a href="https://archlinux.org.ru/forum/topic/10992/">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212616"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212616/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nafanja</em><br>что то не понял как пользоваться этим rdmsr</blockquote>Пользуешься правильно, проблема в том, что нужно понять, что это за регистр и что он выдает.<br />У Intel в этом отношении написано получше, например, для максимальной температуры все понятно<br /><pre><code>TjMAX is factory calibrated and is not user configurable. The default value is software visible in the TEMPERATURE_TARGET (0x1A2) MSR, bits [23:16].</code></pre>А вот в части текущей температуры указан мимоходом регистр <strong> 0x19C</strong>, но без бит, биты искал уже в другом месте, пришлось то же посидеть.<br /><br />В документации AMD, на которую давал ссылку, на странице <strong>459</strong>, в конце, дано описание этого регистра, смотри раздел <strong>D18F3xA4 Reported Temperature Control</strong> и там же приведено описание битов. Несколько раз читал, но так точно и не понял смысл, что же заносится в этот регистр<br />Привожу машинный перевод<br /><pre><code>Регуляторы скорости нарастания в этом регистре используются для фильтрации измерений температуры процессора. Отдельные элементы управления предусмотрены для измеренной температуры, которая выше или ниже, чем Tctl. Таймер для каждого шага считает, пока измеренная температура остается выше или ниже Tctl. Каждый раз, когда измеренная температура изменяется на другую сторону Tctl, ступенчатый таймер сбрасывается, и Tctl не изменяется. Например, если время шага включено в обоих направлениях, Tctl = 62,625, и измеренная температура продолжает быстро скакать между 62,5 и 63,0, то (при условии, что время шага достаточно велико), Tctl не изменится. Однако, как только измеренная температура установится на одной стороне Tctl, Tctl может перейти к измеренной температуре. Если разница измеренной температуры минус Tctl больше, чем значение, установленное MaxTmpDiffUp, тогда Tctl устанавливается равным измеренной температуре. Смотри 2.10 Thermal Functions</code></pre>Задача одна, понять логику управления температурой и может оказаться, что нужно считывать совсем другие биты или использовать совсем другой регистр?<br /><br />Вот если бы кто помог в этом разобраться, было бы очень здорово.<br /><br /><strong>UPD</strong> - можно сначала просто помониторить вывод этого регистра в зависимости от нагрузки и лучше мониторить два вывода<br />rdmsr D18F3xA4 -f 32:00<br />rdmsr D18F3xA4 -f 31:21<br /><u>а лучше прописать вывод и других битов</u>, указанных в таблице битов, может так проще будет понять. Можно простой скрипт, типа<br /><pre><code>while true ; do
Treg1=$(sudo rdmsr D18F3xA4  -f x1:y1)
Treg2=$(sudo rdmsr D18F3xA4  -f x2:y2)
echo &quot;Reg1 - $Treg1 ... Reg2 - $Treg2 ….&quot;
sleep 1
done</code></pre>и применить во время мониторинга stress<br /><br /><strong>EDIT 1</strong> - я часто использую rdmsr, а потому добавил для удобства в sudoers<br /><br /><strong>EDIT 2</strong> - хорошо бы понять как получить эту истинную температуру на AMD, у многих бы снялась забота. Кстати я на Intel тоже не сразу понял что к чему, многое делал методом тыка. Плохо то, что в инете на эту тему ни хрена нет, приходится доходить самим.<br /><br /><strong>EDIT 3</strong> - понять бы вот этот смысл - последнее предложение из описания регистра<br /><pre><code>Если разница измеренной температуры минус Tctl больше, чем значение, установленное MaxTmpDiffUp, тогда Tctl устанавливается равным измеренной температуре.</code></pre>выходит, что значение регистра выдает нужную температуру только при определенных условиях???
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=7">7</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/18977/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747ac4360bd77a7d',m:'bUUrHzvnSkWXRyif15jaPPPxXH8I4wCndQKh_ZZj6PM-1662672436-0-AZaS+JJ8JH97gg5lPhMUfXLeHEq89r5/eqxm/bF8/xuMrrqwcZbXpZ/Ftia7LYZX6pzCRMl4Fj/Y0kIzPZ57Qjrh14kkK77TUjDSMGHJ//KHWI7zDqlfV/EpBvJUB13r+/pLXnFCTuKaOnYAAeIPVXE=',s:[0xf00c18fd81,0x4c80a5de64],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
