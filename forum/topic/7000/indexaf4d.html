


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/7000/?page=5 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:15:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Corbina vs Arch Помогите настроить VPN
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/13/index.html">Сети, Серверы, Защита</a> <span class="divider">/</span></li>
            
        
        
            <li>Corbina vs Arch Помогите настроить VPN</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Corbina vs Arch Помогите настроить VPN</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="indexfdb0.html?page=4" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexaf4d.html?page=5">5 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="index3c09.html?page=22">22</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index89ae.html?page=23">23</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexc575.html?page=6" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67084"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mithrusc/index.html">
                <span class="post-username">mithrusc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67084/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/mithrusc/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mithrusc/posts/index.html">
                    32
                </a>
            </div>
            <div>
                Участник с: 10 июля 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>сейчас проверю эти адреса, возможно какие то изменились</blockquote>глупость сморозил. Там они конечно немного изменились и маски не везде указаны или указаны не верно<br/><strong>bobart</strong><br/><blockquote>как у тебя l2tp настроено? Конфиги? По твоей ссылке (читал давно) - ты так и сделал, закинул маршруты в /etc/rc.local?</blockquote>вот сейчас работает все это добро, но заметил на дебиановском сервере, после того как делаешь poff соединению, роутинги остаются. Возможно это и лучше.<br/>Нет маршруты я положил в /etc/ppp/ip-up.d и все работает, расстроило отсутствие в арче /etc/network/if-up.d и if-down.d это чертовски удобно, netcfg да&#8230;почитал и плюнул не стал разбираться, остальное в /etc/rc.conf DAEMONS а остальные скрипты(iptables) в /etc/rc.d главное порядок правильный выбрать.<br/><div class="code"><pre>/etc/ppp/ip-up.d/corbina
#!/bin/bash
gw="местныйшлюз"
pty "xl2tpd"
#Локальная сеть
route add -host 10.0.0.0 netmask 255.0.0.0 gw $gw
# Форум, сайт поддержки
route add -host 89.179.135.67 netmask 255.255.255.255 gw $gw
#Игровые сервера
route add -host 85.21.37.16 netmask 255.255.255.240 gw $gw
# Москва - Почтовый сервер
route add -host 195.14.50.16 netmask 255.255.255.255 gw $gw
# Локальные ресурсы
route add -host 85.21.79.0 netmask 255.255.255.0 gw $gw
route add -host 85.21.90.0 netmask 255.255.255.0 gw $gw
# <a href="http://ftp.corbina.net/">ftp.corbina.net</a>
route add -host 195.14.50.21 netmask 255.255.255.255 gw $gw
#Москва - Игровые сервера
route add -host 83.102.231.32 netmask 255.255.255.240 gw $gw
route add -host 85.21.108.16 netmask 255.255.255.240 gw $gw
#Corbina TV Москва+Питер
route add -host 85.21.138.208 netmask 255.255.255.240 gw $gw
route add -host 85.21.52.254 netmask 255.255.255.255 gw $gw
route add -host 85.21.88.130 netmask 255.255.255.255 gw $gw
route add -host 83.102.146.96 netmask 255.255.255.224 gw $gw
# ? route add -net 78.107.23.0 netmask 255.255.255.0 gw $gw
#IP-TV через VLC
route add -net 233.32.240.0 netmask 255.255.255.0 gw $MY_IP
route add -net 233.33.210.0 netmask 255.255.255.0 gw $MY_IP
route add <a href="http://l2tp.corbina.net/">l2tp.corbina.net</a> gw $gw
route del default
route add default dev ppp0 </pre></div>вот где iptv my-ip не знаю как о.0 но адрес он определяет именно у нужного интерфейса тот что смотрит в корбиновскую локалку<br/>Остальные конфиги старые от ваших мало чем отличаются.<br/>Сейчас вот столкнулся с проблемой что если соединение рвется (не modem hangup) а скажем кабель выдернул, то xl2tpd не перезванивает хотя redial = yes, наверное нужно какой то скрипт собрать из кусков чтобы пинговал что нибудь и перезапускал сервис :(<br/><blockquote>/etc/rc.local</blockquote>хз как он стартует перед сетью или после в самом конце, не то
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67085"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maksipes/index.html">
                <span class="post-username">maksipes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67085/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/maksipes/topics/index.html">
                    0
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maksipes/posts/index.html">
                    81
                </a>
            </div>
            <div>
                Участник с: 21 сентября 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>mithrusc</em><br/><div class="code"><pre>
route add -host 10.0.0.0 netmask 255.0.0.0 gw $gw</pre></div></blockquote>Если netmask не 255.255.255.255, используйте <strong>route add -<span style="color:#ff0000">net</span> 10.0.0.0 netmask 255.0.0.0 gw $gw</strong><br/><blockquote><em>mithrusc</em><br/><div class="code"><pre>
route add -host 89.179.135.67 netmask 255.255.255.255 gw $gw</pre></div></blockquote>Можно просто <strong>route add -host 89.179.135.67 gw $gw</strong><br/><blockquote><em>mithrusc</em><br/>Сейчас вот столкнулся с проблемой что если соединение рвется (не modem hangup) а скажем кабель выдернул, то xl2tpd не перезванивает хотя redial = yes, наверное нужно какой то скрипт собрать из кусков чтобы пинговал что нибудь и перезапускал сервис :(<br/></blockquote>Поковыряйте у pppd опции lcp-echo-interval и lcp-echo-failure.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67086"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mithrusc/index.html">
                <span class="post-username">mithrusc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67086/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/mithrusc/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mithrusc/posts/index.html">
                    32
                </a>
            </div>
            <div>
                Участник с: 10 июля 2010
            </div>
            
        </td>
        <td class="post-content">
            <strong>maksipes</strong><br/>Спасибо за разъяснения<br/><blockquote>lcp-echo-interval n - как pppd может узнать что канал отвалился? Для этого предназначен протокол LCP. Этой командой Вы указываете pppd через какой интервал времени в секундах посылать запросы типа ping чтобы проверить жив канал или нет. По умолчанию ping не посылается и pppd не может определить что канал упал. Рекомендую значение 10.<br/>lcp-echo-failure n - этот параметр говорит, что если n пингов не прошло, то это означает канал отвалился и его надо переподнимать.</blockquote>вот цитата с форума корбины.<br/>добавил <br/><div class="code"><pre>lcp-echo-interval 10
lcp-echo-failure 2</pre></div><br/>упорно пытается найти что то на /dev/pts/0 а соединение ppp0 &lt;&ndash;&gt; /dev/pts/2 в логах daemon так и сыплеться failed to open /dev/pts/<br/>при отключении кабеля, pppd LCP TermReq &ldquo;Peer not responding&rdquo;<br/>unable to deliver closing message for tunnel<br/>дальше идет<br/>connecting to host <a href="http://l2tp.corbina.net/">l2tp.corbina.net</a> ип<br/>maximum retries exceeded for tunnel 14230 <br/>откуда это максимальное количество попыток не понимаю, после чего он ничего не делает
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67087"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/bobart/index.html">
                <span class="post-username">bobart</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67087/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/bobart/topics/index.html">
                    38
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/bobart/posts/index.html">
                    2537
                </a>
            </div>
            <div>
                Участник с: 28 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            Вобщем, предлагаю всем кто &ldquo;в теме&rdquo; выложить свои конфиги, полностью. Затем найти оптимальное решение и как-то причесать эту тему. Хотя вариантов настройки может быть несколько и все они будут работать, но думаю, есть &ldquo;золотая середина&rdquo;. После чего стоит озаботиться и закатать статейку по теме в wiki. Насколько я понимаю, круг пользователей корбины/билайна/l2tp/arch невелик и вопрос не освещён должным образом.<br/><br/>Вот:<br/><strong>1.</strong> /etc/xl2tpd/xl2tpd.conf<br/><div class="code"><pre>[global]
access control = yes
auth file = /etc/ppp/chap-secrets
[lac corbina]
lns = <a href="http://tp.corbina.net/">tp.corbina.net</a>
redial = yes
redial timeout = 10
require chap = yes
require authentication = no
name = corbina_login
ppp debug = yes
pppoptfile = /etc/ppp/options.xl2tpd
require pap = no
autodial = yes</pre></div><strong>2.</strong> /etc/ppp/options.xl2tpd<br/><div class="code"><pre>lcp-echo-interval 10
lcp-echo-failure 2
name bobart
remotename tp
ipparam corbina
connect /bin/true
mru 1500
mtu 1500
nodeflate
nobsdcomp
noauth
persist
maxfail 0
nopcomp
noaccomp
defaultroute</pre></div><strong>3.</strong> /etc/ppp/chap-secrets<br/><div class="code"><pre>#
"corbina_login"       *       "corbina_passwd"</pre></div><strong>4.</strong> /etc/ppp/ip-up.d/ip-up-route.sh <br/><div class="code"><pre>#!/bin/sh
PATH="/sbin:/bin:/usr/sbin:/usr/bin"
GATEWAY=`route | grep ^default | awk '{print $2}'`
route del default
route add default dev ppp0
(
echo '#!/bin/sh'
echo 'PATH="/sbin:/bin:/usr/sbin:/usr/bin"'
echo 'route del default'
echo "route add default gateway $GATEWAY"
) &gt;/etc/ppp/ip-down</pre></div><strong>5.</strong> /etc/rc.conf<br/><div class="code"><pre>[...]
eth0="dhcp"
INTERFACES=(eth0)
[...]
dns1="-host 213.234.192.8 gw 10.123.160.1"
dns2="-host 85.21.192.3 gw 10.123.160.1"
tpsrv="-host <a href="http://tp.corbina.net/">tp.corbina.net</a> gw 10.123.160.1"
gateway="default gw 10.123.160.1"
ROUTES=(dns1 dns2 tpsrv gateway)
[...]
DAEMONS=(syslog-ng gpm iptables network hal lircd @netfs @crond @alsa @xl2tpd)</pre></div><br/>С оговоркой: default gw и dns1,2 питерские. <br/>Ваши:<br/><div class="code"><pre>cat /etc/resolv.conf</pre></div>и <br/><div class="code"><pre>~$ route -n |grep ^0.0.0.0 | awk '{ print $2 }'</pre></div>при отключённом ppp0
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67088"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mithrusc/index.html">
                <span class="post-username">mithrusc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67088/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/mithrusc/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mithrusc/posts/index.html">
                    32
                </a>
            </div>
            <div>
                Участник с: 10 июля 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>route -n |grep ^0.0.0.0 | awk &lsquo;{ print $2 }&rsquo;</blockquote>Что это?<br/><blockquote>Это из /var/log/daemon.log за сегодня, от старта:</blockquote>все тоже самое, у всех так.<br/><blockquote>/etc/rc.conf</blockquote>Только я не понял где роутинги ваши? ip-up скрипт зачем изменили? если можно было положить отдельным скриптом в ip-up.d<br/>P.S Попробовал по вашему методу, у меня так не работает вообще<br/>А xl2tpd и pppd упорно не хотят перезванивать, и почему все на дебиане нормально работало&#8230;<br/>я понимаю что не всех это затронуло что он не перезванивает<br/>вот нашел скрипт, в крон щас поставлю<br/><div class="code"><pre>
#!/bin/sh
date=`/bin/date '+%d-%m-%Y %H:%M'`
logfile=/path/to/netlog.log
checkip=`ping -c 3 ya.ru |grep icmp_ |wc -l`
if [ ! $checkip = 3 ]; then
  /etc/rc.d/xl2tpd restart
  echo "=============================" &gt;&gt;$logfile
  echo "Link failed at $date .Reconnect link"&gt;&gt;$logfile
fi
exit 0</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67089"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/bobart/index.html">
                <span class="post-username">bobart</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67089/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/bobart/topics/index.html">
                    38
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/bobart/posts/index.html">
                    2537
                </a>
            </div>
            <div>
                Участник с: 28 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            Роутинги в /etc/rc.conf, это же видно:<br/><div class="code"><pre>dns1="-host 213.234.192.8 gw 10.123.160.1"
dns2="-host 85.21.192.3 gw 10.123.160.1"
tpsrv="-host <a href="http://tp.corbina.net/">tp.corbina.net</a> gw 10.123.160.1"
gateway="default gw 10.123.160.1"
ROUTES=(dns1 dns2 tpsrv gateway)</pre></div><div class="code"><pre>route -n |grep ^0.0.0.0 | awk '{ print $2 }'</pre></div>эта команда покажет шлюз по умолчанию после /etc/rc.d/network start, если он по какой-то причине неизвестен. После удачного поднятия ppp0 она покажет<div class="code"><pre>0.0.0.0</pre></div><br/>Забыл добавить, что локальными ресурсами не пользуюсь, типа игровых, iptv и т.д., но так или иначе, маршруты до них, при необходимости, тоже могут быть в /etc/rc.conf или в /etc/rc.local<br/>А вот почему не получилось у вас &ldquo;как у меня&rdquo; не знаю. У меня-то получилось.<br/><br/>ps. Прислушался к мудрому совету и перенёс/переименовал ip-up в /etc/ppp/ip-up.d<br/><div class="code"><pre>bob@arch:~$ ls /etc/ppp/ip-up.d
00-dns.sh  ip-up-route.sh</pre></div># cp /etc/ppp/ip-up.backup /etc/ppp/ip-up<br/>Согласен, ибо при обновлении /etc/ppp/ip-up может запросто быть перезаписан. Вобщем, вот так и коннектимся&#8230;)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67090"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mithrusc/index.html">
                <span class="post-username">mithrusc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67090/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/mithrusc/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mithrusc/posts/index.html">
                    32
                </a>
            </div>
            <div>
                Участник с: 10 июля 2010
            </div>
            
        </td>
        <td class="post-content">
            Обьясните пожалуйста доступно почему происходит так что после того как выдернешь кабель провайдерский - обратно вставишь, скажем делаешь host <a href="http://l2tp.corbina.net/">l2tp.corbina.net</a> или host <a href="http://vpn.corbina.net/">vpn.corbina.net</a> получаешь дулю, и только после рестарта сети (etc/rc.d/network) команда проходит&#8230;должно же перезапускаться получение (пусть и того же) адреса там у них все таки dhcp сервак на оборудовании, так всегда было на роутере простом и в debian, тут нет
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67091"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/bobart/index.html">
                <span class="post-username">bobart</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67091/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/bobart/topics/index.html">
                    38
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/bobart/posts/index.html">
                    2537
                </a>
            </div>
            <div>
                Участник с: 28 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            Подожди.., может тебе кто-нибудь из умных ответит.<br/>А я думаю так: ты выдернул шнур - нихт коннекшн. Вставил шнур в&#8230; обратно - а откуда /etc/rc.d/network должен знать, что ему надо сделать при этом restart? Кто ему прикажет перезапуститься? Грубо говоря, ты имеешь ввиду, что это событие (выдёргивание/вставление кабеля) система должна сама как-то обрабатывать. Кабель вставлен &gt; сигнал пошёл &gt; сеть рестартится, так? Ну, или, кабель выдернул - network делает stop. Что-то очень похожее происходило в винде. Как это сделать здесь - не знаю. Подождём умных, может расскажут.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67092"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maksipes/index.html">
                <span class="post-username">maksipes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67092/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/maksipes/topics/index.html">
                    0
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maksipes/posts/index.html">
                    81
                </a>
            </div>
            <div>
                Участник с: 21 сентября 2010
            </div>
            
        </td>
        <td class="post-content">
            netcfg? Или как-то прикрутить ifplugd без netcfg.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-67093"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mithrusc/index.html">
                <span class="post-username">mithrusc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/67093/index.html">#</a>
            11 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/mithrusc/topics/index.html">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mithrusc/posts/index.html">
                    32
                </a>
            </div>
            <div>
                Участник с: 10 июля 2010
            </div>
            
        </td>
        <td class="post-content">
            очень приятно что на таком вообщем то не очень активном форуме есть отзывчивые люди.<br/><strong>bobart</strong><br/><blockquote>А я думаю так: ты выдернул шнур - нихт коннекшн. Вставил шнур в&#8230; обратно - а откуда /etc/rc.d/network должен знать, что ему надо сделать при этом restart? Кто ему прикажет перезапуститься? Грубо говоря, ты имеешь ввиду, что это событие (выдёргивание/вставление кабеля) система должна сама как-то обрабатывать. Кабель вставлен &gt; сигнал пошёл &gt; сеть рестартится, так? Ну, или, кабель выдернул - network делает stop. Что-то очень похожее происходило в винде. Как это сделать здесь - не знаю. Подождём умных, может расскажут.</blockquote>Да, именно так.<br/><strong>maksipes</strong><br/>netcfg ну возможно, может быть поковыряюсь как время будет, что то там сложно все, после освоения такой кучи информации по арчу нужна передышка(<br/>ifplugd пашет вроде бы, правда не ясно что он делает )) интерфейсы указал ему - видит, бипером по дефолту пищит<br/>Кажется понял почему он не переподключается, gethostbyname не наблюдаю у себя в логах а должен бы быть фейл там или сацес, он должен отписываться от имени демона pppd. Есть патч на xl2tpd видимо с ним нужно как то пересобрать его<br/>P.S попробовать что ли радикально&#8230; собирал ли кто нибудь openl2tpd под арч? из аура не собирается, погуглил ничего не нашел про сборку. Поделитесь опытом пожалуйста кто собирал этого зверя - и для базы знаний тоже будет хорошо
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="indexfdb0.html?page=4" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexaf4d.html?page=5">5 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="index3c09.html?page=22">22</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index89ae.html?page=23">23</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexc575.html?page=6" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index4b48.html?next=/forum/topic/7000/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/7000/?page=5 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:15:04 GMT -->
</html>
