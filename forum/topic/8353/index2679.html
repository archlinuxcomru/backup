


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Непонятности с acpid
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/9/">Новичкам в Arch Linux</a> <span class="divider">/</span></li>
            
        
        
            <li>Непонятности с acpid</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Непонятности с acpid</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79449"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/cac2s/">
                <span class="post-username">cac2s</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79449/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/cac2s/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/cac2s/posts/">
                    277
                </a>
            </div>
            <div>
                Участник с: 10 января 2009
            </div>
            
        </td>
        <td class="post-content">
            При загрузке ноута acpid нормально запускается, НО кусок кода из /etc/acpi/handler.sh наглым образом игнорируется.<br/>Собсно сам кусок кода:<br/><br/><div class="code"><pre>...
    0000006b)
	TPSTATUS=`synclient -l | grep TouchpadOff | awk '{print $3}'`
	if [ $TPSTATUS = 0 ]; then
	    synclient TouchpadOff=1
	else
	    synclient TouchpadOff=0
	fi
    ;;
...</pre></div>Если сделать <em>$ sudo /etc/rc.d/acpid restart</em> - проблема исчезает<br/><br/>У кого какие мысли?<br/><br/>З.Ы.: Вариант с автоматическим отключением тачпада при воткнутой мыше не предлагать!!!<br/><br/>З.Ы.Ы.: На всяк случай весь /etc/acpid/handler.sh:<br/><br/><div class="code"><pre>#!/bin/sh
# Default acpi script that takes an entry for all actions
# NOTE: This is a 2.6-centric script.  If you use 2.4.x, you'll have to
#       modify it to not use /sys
minspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq`
maxspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq`
setspeed="/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed"
set $*
case "$1" in
    button/power)
        #echo "PowerButton pressed!"&gt;/dev/tty5
        case "$2" in
            PWRF)   logger "PowerButton pressed: $2::$3" ;;
            *)      logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    button/sleep)
        case "$2" in
            SLPB)   echo -n mem &gt;/sys/power/state ;;
            *)      logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    ac_adapter)
        case "$2" in
            AC)
                case "$4" in
                    00000000)
                        echo -n $minspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode start
                    ;;
                    00000001)
                        echo -n $maxspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode stop
                    ;;
                esac
                ;;
            *)  logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    battery)
        case "$2" in
            BAT0)
                case "$4" in
                    00000000)   #echo "offline" &gt;/dev/tty5
                    ;;
                    00000001)   #echo "online"  &gt;/dev/tty5
                    ;;
                esac
                ;;
            CPU0)	
                ;;
            *)  logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    button/lid)
        #echo "LID switched!"&gt;/dev/tty5
        ;;
    hotkey)
	case "$2" in
	    ATKD)
		case "$3" in
		    00000040)
			mpc prev
		    ;;
		    00000041)
			mpc next
		    ;;
		    00000043)
			mpc stop
		    ;;
		    00000045)
			mpc toggle
		    ;;
		    0000006b)
			TPSTATUS=`synclient -l | grep TouchpadOff | awk '{print $3}'`
			if [ $TPSTATUS = 0 ]; then
			    synclient TouchpadOff=1
			else
			    synclient TouchpadOff=0
			fi
		    ;;
		    *) logger "ACPI action undefined: $2::$3" ;;
		esac
		;;
	    *) logger "ACPI action undefined: $2::$3" ;;
	esac
	;;
    *)
        logger "ACPI group/action undefined: $2::$3"
        ;;
esac</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79450"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/exire/">
                <span class="post-username">exire</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79450/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/exire/topics/">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/exire/posts/">
                    181
                </a>
            </div>
            <div>
                Участник с: 25 ноября 2006
            </div>
            
        </td>
        <td class="post-content">
            Есть подозрение, что для работы synclient требуется, чтобы переменная DISPLAY была определена. Когда acpid стартует из системных скриптов, она, естественно, пустая. Когда ты рестартуешь acpid руками, переменная DISPLAY наследуется из твоего окружения.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79451"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/cac2s/">
                <span class="post-username">cac2s</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79451/">#</a>
            13 лет, 3 месяца назад
            
                (отредактировано
                
                    13 лет, 3 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/cac2s/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/cac2s/posts/">
                    277
                </a>
            </div>
            <div>
                Участник с: 10 января 2009
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>eXire</em><br/>Есть подозрение, что для работы synclient требуется, чтобы переменная DISPLAY была определена. Когда acpid стартует из системных скриптов, она, естественно, пустая. Когда ты рестартуешь acpid руками, переменная DISPLAY наследуется из твоего окружения.</blockquote>В точку! Если сразу после старта Ctrl+Alt+F1 и там <em># synclient -l</em> - получаем: <strong>Failed to connect to X Server.</strong><br/><br/>Осталось совсем ничего: победить эту маленькую? неприятность. Есть у кого какие идеи? Подсобите, не стесняйтесь. :) 
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79452"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/exire/">
                <span class="post-username">exire</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79452/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/exire/topics/">
                    5
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/exire/posts/">
                    181
                </a>
            </div>
            <div>
                Участник с: 25 ноября 2006
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>cac2s</em><br/><blockquote><em>eXire</em><br/>Есть подозрение, что для работы synclient требуется, чтобы переменная DISPLAY была определена. Когда acpid стартует из системных скриптов, она, естественно, пустая. Когда ты рестартуешь acpid руками, переменная DISPLAY наследуется из твоего окружения.</blockquote>В точку! Если сразу после старта Ctrl+Alt+F1 и там <em># synclient -l</em> - получаем: <strong>Failed to connect to X Server.</strong><br/><br/>Осталось совсем ничего: победить эту маленькую? неприятность. Есть у кого какие идеи? Подсобите, не стесняйтесь. :) </blockquote>В /etc/acpi/handler.sh добавить в начало:<br/>export DISPLAY=0:0
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79453"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/cac2s/">
                <span class="post-username">cac2s</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79453/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/cac2s/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/cac2s/posts/">
                    277
                </a>
            </div>
            <div>
                Участник с: 10 января 2009
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>eXire</em><br/>В /etc/acpi/handler.sh добавить в начало:<br/>export DISPLAY=0:0<br/></blockquote>Попробовал добавить в скрипт <em>export DISPLAY=&ldquo;:0&rdquo;</em> - не помогло (<em>export DISPLAY=0:0</em> тоже пробовал), хотя если вне иксов выполнить:<br/><div class="code"><pre>$ export DISPLAY=":0" 
$ synclient -l</pre></div>- всё работает&#8230;  ??? 
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79454"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/cac2s/">
                <span class="post-username">cac2s</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79454/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/cac2s/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/cac2s/posts/">
                    277
                </a>
            </div>
            <div>
                Участник с: 10 января 2009
            </div>
            
        </td>
        <td class="post-content">
            Уррррраааааа!!! Дядя Фёдор приехал!!!!!! (с)<br/><br/>Решение <strong>как всегда</strong> было  под носом: <a href="https://wiki.archlinux.org/index.php/Acpid">http://wiki.archlinux.org/index.php/Acpid</a><br/><br/>Сделал следующее: добавил в начало скрипта функцию, которая позволяет получить имя пользователя, работающего сейчас в системе, + чуток подправил кусок неработающего (теперь уже работающего  ;D ) кода.<br/><br/>В итоге:<br/><div class="code"><pre>#!/bin/sh
# Default acpi script that takes an entry for all actions
# NOTE: This is a 2.6-centric script.  If you use 2.4.x, you'll have to
#       modify it to not use /sys
minspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq`
maxspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq`
setspeed="/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed"
getuser ()
{
    export DISPLAY=`echo $DISPLAY | cut -c -2`
    user=`who | grep " $DISPLAY" | awk '{print $1}' | tail -n1`
    export XAUTHORITY=/home/$user/.Xauthority
    eval $1=$user
}
set $*
case "$1" in
    button/power)
        #echo "PowerButton pressed!"&gt;/dev/tty5
        case "$2" in
            PWRF)   logger "PowerButton pressed: $2::$3" ;;
            *)      logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    button/sleep)
        case "$2" in
            SLPB)   echo -n mem &gt;/sys/power/state ;;
            *)      logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    ac_adapter)
        case "$2" in
            AC)
                case "$4" in
                    00000000)
                        echo -n $minspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode start
                    ;;
                    00000001)
                        echo -n $maxspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode stop
                    ;;
                esac
                ;;
            *)  logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    battery)
        case "$2" in
            BAT0)
                case "$4" in
                    00000000)   #echo "offline" &gt;/dev/tty5
                    ;;
                    00000001)   #echo "online"  &gt;/dev/tty5
                    ;;
                esac
                ;;
            CPU0)	
                ;;
            *)  logger "ACPI action undefined: $2::$3" ;;
        esac
        ;;
    button/lid)
        #echo "LID switched!"&gt;/dev/tty5
        ;;
    hotkey)
	case "$2" in
	    ATKD)
		case "$3" in
		    00000040)
			mpc prev
		    ;;
		    00000041)
			mpc next
		    ;;
		    00000043)
			mpc stop
		    ;;
		    00000045)
			mpc toggle
		    ;;
		    0000006b)
			getuser "$user"
			TPSTATUS=`DISPLAY=:0 su $user -c "synclient -l" | grep TouchpadOff | awk '{print $3}'`
			echo $TPSTATUS &gt; /dev/tty5
			if [ $TPSTATUS = 0 ]; then
			    DISPLAY=:0 su $user -c "synclient TouchpadOff=1"
			else
			    DISPLAY=:0 su $user -c "synclient TouchpadOff=0"
			fi
		    ;;
		    *) logger "ACPI action undefined: $2::$3" ;;
		esac
		;;
	    *) logger "ACPI action undefined: $2::$3" ;;
	esac
	;;
    *)
        logger "ACPI group/action undefined: $2::$3"
        ;;
esac</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79455"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vdemin/">
                <span class="post-username">vdemin</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79455/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/2a/e3/2ae3c3ef2445b4fba1c6e557e16ab155.png" alt="vdemin avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vdemin/topics/">
                    54
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vdemin/posts/">
                    1615
                </a>
            </div>
            <div>
                Участник с: 24 января 2009
            </div>
            
        </td>
        <td class="post-content">
            Стандартный /etc/acpi/handler.sh<br/><div class="code"><pre>#!/bin/sh
# Default acpi script that takes an entry for all actions
# NOTE: This is a 2.6-centric script.  If you use 2.4.x, you'll have to
#       modify it to not use /sys
minspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq`
maxspeed=`cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq`
setspeed="/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed"
set $*
case "$1" in
    button/power)
        #echo "PowerButton pressed!"&gt;/dev/tty5
        case "$2" in
            PWRF)   logger "PowerButton pressed: $2" ;;
            *)      logger "ACPI action undefined: $2" ;;
        esac
        ;;
    button/sleep)
        case "$2" in
            SLPB)   echo -n mem &gt;/sys/power/state ;;
            *)      logger "ACPI action undefined: $2" ;;
        esac
        ;;
    ac_adapter)
        case "$2" in
            AC)
                case "$4" in
                    00000000)
                        echo -n $minspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode start
                    ;;
                    00000001)
                        echo -n $maxspeed &gt;$setspeed
                        #/etc/laptop-mode/laptop-mode stop
                    ;;
                esac
                ;;
            *)  logger "ACPI action undefined: $2" ;;
        esac
        ;;
    battery)
        case "$2" in
            BAT0)
                case "$4" in
                    00000000)   #echo "offline" &gt;/dev/tty5
                    ;;
                    00000001)   #echo "online"  &gt;/dev/tty5
                    ;;
                esac
                ;;
            CPU0)	
                ;;
            *)  logger "ACPI action undefined: $2" ;;
        esac
        ;;
    button/lid)
        #echo "LID switched!"&gt;/dev/tty5
        ;;
    *)
        logger "ACPI group/action undefined: $1 / $2"
        ;;
esac</pre></div>Кнопки ноута Mute, VolumeUp, VolumeDown по идее должны проваливаться в <blockquote>logger &ldquo;ACPI group/action undefined: $1 / $2&rdquo;</blockquote>но этого не происходит. Xev эти кнопки видит, acpi-модуль button загружен. Проверял - кнопка Power в handler.sh обрабатывается. Почему же скрипт игнорирует ноутбучные кнопки?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79456"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/cac2s/">
                <span class="post-username">cac2s</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79456/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/cac2s/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/cac2s/posts/">
                    277
                </a>
            </div>
            <div>
                Участник с: 10 января 2009
            </div>
            
        </td>
        <td class="post-content">
            acpi_listen их видит?<br/>какой ноут?<br/>покажи $ lsmod acpi
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79457"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/muu/">
                <span class="post-username">muu</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79457/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/muu/topics/">
                    8
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/muu/posts/">
                    476
                </a>
            </div>
            <div>
                Участник с: 16 ноября 2008
            </div>
            
        </td>
        <td class="post-content">
            Если их видит xev - то зачем ты прикручиваешь их обработку через acpid? Используй xbindkeys или средства своего WM|DE.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-79458"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vdemin/">
                <span class="post-username">vdemin</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/79458/">#</a>
            13 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/2a/e3/2ae3c3ef2445b4fba1c6e557e16ab155.png" alt="vdemin avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vdemin/topics/">
                    54
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vdemin/posts/">
                    1615
                </a>
            </div>
            <div>
                Участник с: 24 января 2009
            </div>
            
        </td>
        <td class="post-content">
            <strong>cac2s</strong>,<br/>Acpi_listen не видит. Ноут HP Compaq nx9020.<br/><div class="code"><pre>$ lsmod | grep acpi
pata_acpi               3828  0 
libata                156908  3 ata_piix,ata_generic,pata_acpi</pre></div><blockquote><em>Muu</em><br/>Если их видит xev - то зачем ты прикручиваешь их обработку через acpid?</blockquote>Хочу, чтобы в консоли тоже работало.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/8353/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747b0b668d6915f2',m:'is3EpGxa94HNU5j6wn.RSoV7qj5so3H3h_YEka4J2H0-1662675344-0-AQVEhevE7KyZF6pcClUhcHceZe/qjNDi19Kdi5Pji3Lorl9E2EYsj53rJLHTbs1vLWCTXYd0wWz9OtQ+aYCZZeXoNZZbpofy8fEEKN9X5LJ8/Cbn9f2YRLq7D61q2Mq5R2ru0N8IYunFGV3FdkQIuCQ=',s:[0x0d4bb07be7,0x9d92257288],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
