


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        touchpad отваливается после пробуждения ото сна (s2ram)
    </title>
    <link rel="shortcut icon" href="https://archlinuxcomru.github.io/backup/src/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://archlinuxcomru.github.io/backup/src/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/12/">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>touchpad отваливается после пробуждения ото сна (s2ram)</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>touchpad отваливается после пробуждения ото сна (s2ram)</h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-24984"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nikisch/">
                <span class="post-username">nikisch</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/24984/">#</a>
            10 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nikisch/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nikisch/posts/">
                    224
                </a>
            </div>
            <div>
                Участник с: 24 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            Баг эпичный, годами висит в багтрекерах убунты редхата и т д. Нормального решения не нашел. Кому-то помогает апгрейд ядра или подгрузка некоего модуля ядра или модуля иксов <a href="https://superuser.com/questions/141290/how-to-tell-x-org-to-reload-input-device-module-working-around-suspend-to-ram">http://superuser.com/questions/141290/how-to-tell-x-org-to-reload-input-device-module-working-around-suspend-to-ram</a>. Только у меня говорит, что тачпада нет в природе.<br/>Дано:<br/>1) тачпад синаптик mouse1 + тачпоинт mouse0(работает нормально)<br/>2) при пробуждении ото сна тачпад исчезает из системы (/dev/input/mouse1), при нажатии на тачпад печатается всякий мусор (обычно ~~~~~) и срабатывают всевозможные хоткеи. Клавиатура может не печатать пока не понажимаешь на всякие shift ctrt win atl и т д. (скорее всего, оказывается зажат alt)<br/>3) Помогает хибернейт, может помочь в 1 случае из 5-и повторный спящий режим. Не помогает ребут (либо не всегда), перезапуск иксов, всех модулей, какие я пробовал (включая psmouse)<br/>4) Если усыпить ноут на срок менее минуты, то он просыпается нормально.<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5e3a3b3b331e3a3b2d352a312e">[email&#160;protected]</a> ~]$ cat /etc/X11/xorg.conf.d/10-synaptics.conf 
Section "InputClass"
        Identifier      "Synaptics touchpads"
        MatchIsTouchpad "on"
        Driver          "synaptics"
        Option          "TapButton1"            "1"
        Option          "TapButton2"            "2"
        Option          "TapButton3"            "3"
        Option "VertEdgeScroll" "on"
        Option "VertTwoFingerScroll" "on"
        Option "HorizEdgeScroll" "on"
        Option "HorizTwoFingerScroll" "on"
        Option "CircularScrolling" "on"
        Option "CircScrollTrigger" "2"
        Option "EmulateTwoFingerMinZ" "40"
        Option "EmulateTwoFingerMinW" "8"
EndSection
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="80e4e5e5edc0e4e5f3ebf4eff0">[email&#160;protected]</a></pre></div>Комментирование последних двух параметров лишает мультитача и снижает шанс напороться на сабжевый глюк в 2-3 раза
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-24985"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nikisch/">
                <span class="post-username">nikisch</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/24985/">#</a>
            10 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nikisch/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nikisch/posts/">
                    224
                </a>
            </div>
            <div>
                Участник с: 24 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            1) Выяснилось, что при засыпании тачпад входит в нерабочее состояние аппаратно (или на уровне его прошивки), т к даже после перезагрузки в винду тот не работает, винда пищит при нажатии на тачпад ))<br/>2) В самой же винде спящий режим на тачпад не влияет, что наводит на мысль, что тачпад не засывает вовсе.<br/>3) Было подозрение, что тачпад превращается внекое другое устройство (например клавиатуру) и неправильно опознается системой, но если сравнивать выводы <br/><div class="code"><pre>[cat /proc/bus/input/devices/</pre></div>то получается, что тачпад просто исчез<br/><div class="code"><pre> diff 1normal 2fail 
96,106d95
&lt; I: Bus=0011 Vendor=0002 Product=0007 Version=01b1
&lt; N: Name="SynPS/2 Synaptics TouchPad"
&lt; P: Phys=isa0060/serio4/input0
&lt; S: Sysfs=/devices/platform/i8042/serio4/input/input9
&lt; U: Uniq=
&lt; H: Handlers=mouse1 event9 
&lt; B: PROP=1
&lt; B: EV=b
&lt; B: KEY=420 30000 0 0 0 0
&lt; B: ABS=11000003</pre></div>Думаю, пытаться его как-то реинизиализировать - занятие бесполезное, т к даже ребут не лечит.<br/>Как сделать, чтоб он не отключался при переходе в спящий режим?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-24986"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nikisch/">
                <span class="post-username">nikisch</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/24986/">#</a>
            10 лет, 4 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nikisch/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nikisch/posts/">
                    224
                </a>
            </div>
            <div>
                Участник с: 24 ноября 2009
            </div>
            
        </td>
        <td class="post-content">
            В общем, опытным путем установил, что снизить вероятность отваливания тачпада примерно до нуля (и повысить стабильность самого спящего режима) можно проделав одновременно:<br/>1) Юзать команду echo -n mem &gt;/sys/power/state от рута вместо той, что идет в кедах и в других де. Как забиндить ее на кнопку в кедах я не нашел, использую acpid. <br/>+ усыпание просыпание происходит почти мгновенно<br/>- сеанс не блокируется, надо прикручивать блокировку отдельно<br/>- после просыпания могут не определяться флешки, но определяются если их вставить когда ноут спит и разбутить его.<br/>2) Отключить эмуляцию мультитача в тачпаде примерно так<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="debabbbbb39eb2bfaeaab1ae">[email&#160;protected]</a> ~]$ cat /etc/X11/xorg.conf.d/10-synaptics.conf
Section "InputClass"
        Identifier      "Synaptics touchpads"
        MatchIsTouchpad "on"
        MatchDevicePath "/dev/input/event*"
        Driver          "synaptics"
        Option          "TapButton1"            "1"
        Option          "TapButton2"            "2"
#       Option          "TapButton3"            "3"
        Option "VertEdgeScroll" "on"
#       Option "VertTwoFingerScroll" "on"
        Option "HorizEdgeScroll" "on"
#       Option "HorizTwoFingerScroll" "on"
#       Option "CircularScrolling" "on"
#       Option "CircScrollTrigger" "2"
#       Option "EmulateTwoFingerMinZ" "40"
#       Option "EmulateTwoFingerMinW" "8"</pre></div>- Копипастить в терминале по ctrl+sift+c уже настолько привык, что делаю это и в браузере ((<br/>ВОзможно удасться забиндить среднюю кнопку мыши на угол тачпада.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/2399/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747c7dfb3d1b2de4',m:'zz8gSATHzeLVjew4RmzW0O595CcMEwmkGEY1Z7ohUM8-1662690523-0-ASsF6pXL5Y+01iTft5cxz8KuLmABTp00hF+xDtfTHTtDscgO0m5zZi9KafPMmo4ByHlhJnmGG6ULzW8134Q6rrogAi61NdNEnx6ifVtd6Z9GMB9NW3gvbi6x2d05pN7C+mlPVofU92oQrxP1X8lNdWM=',s:[0x4f87ce3a85,0x489274c31c],u:'/cdn-cgi/challenge-platform/h/g'};var _cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/cb/invisible.js?cb=747c7dfb3d1b2de4',document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
