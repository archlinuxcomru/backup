


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Moneyguru
    </title>
    <link rel="shortcut icon" href="https://archlinuxcomru.github.io/backup/src/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://archlinuxcomru.github.io/backup/src/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/5/">Разное</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/4/">/dev/null</a> <span class="divider">/</span></li>
            
        
        
            <li>Moneyguru</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Moneyguru</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-220814"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/220814/">#</a>
            2 года, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Sugonyako</em><br>Дело не в программе.</blockquote>Я не имел ввиду только саму программу Moneyguru - здесь участвует несколько программ.<br />Кроме того, вроде бы в подобного рода прогах можно выбрать и другой формат, имхо, xml не совсем удобный формат ... если возможно, попробуй сменить формат, хотя бы просто для проверки. Если ничего не изменится, смотри настройки.<br />А вообще, по хорошему, нужно узнать кто в этом замешен и др., а для этого осваивай методы отладки и добычи информации. Ну нет смысла гадать ...
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-220815"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/red/">
                <span class="post-username">red</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/220815/">#</a>
            2 года, 11 месяцев назад
            
                (отредактировано
                
                    2 года, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/fd/eb/fdeb672af87b7c02419e9c58404908a5.png" alt="red avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/red/topics/">
                    30
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/red/posts/">
                    1517
                </a>
            </div>
            <div>
                Участник с: 31 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            да вообще программа глючная что капец, то пишет то не пишет то не все отображает, в общем стало понятно что сам автор на нее забил <a href="https://github.com/hsoft/moneyguru#unmaintained">https://github.com/hsoft/moneyguru#unmaintained</a><br /><br /><pre><code>moneyguru --debug</code></pre>судя по дебагу с системным временем все нормально, и сами данные с датой сохраняется в xml тоже нормально, но вот когда идет считывание даты из xml то все даты в полях формы уменьшаются и соответственно при следующем сохранении даты уже искажены. То есть похоже это трабла самой программы,  возможно после обновления одного из внешних компонентов из которых состоит программа их поведение изменилось но вот соответствующе адаптировать код программы уже некому.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-220819"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Sugonyako/">
                <span class="post-username">Sugonyako</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/220819/">#</a>
            2 года, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Sugonyako/topics/">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Sugonyako/posts/">
                    30
                </a>
            </div>
            <div>
                Участник с: 13 июля 2014
            </div>
            
        </td>
        <td class="post-content">
            Всех благодарю. Решил поставить Gnucash. Она &quot;тяжелая&quot; но надежная.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-220859"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/220859/">#</a>
            2 года, 11 месяцев назад
            
                (отредактировано
                
                    2 года, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>red</em><br>сами данные с датой сохраняется в xml тоже нормально, но вот когда идет считывание даты из xml то все даты в полях формы уменьшаются и соответственно при следующем сохранении даты уже искажены. То есть похоже это трабла самой программы</blockquote>Стало интересно, похолодало, делать нечего ..  и решил посмотреть ...  установил, создал для проверки файл xml ~/ttt.moneyguru, поэкспериментировал - действительно даты уменьшаются, потрейсил<br />Вывод трассировки:<br />При открытии проги - открывается и читается созданный файл xml <strong>ttt.moneyguru</strong>, дата правильная (<strong>2019-09-16</strong>), объем тоже (485 байт)<br />28768 <strong>openat</strong>(AT_FDCWD, &quot;/home/vasek/TTT/TEMP/1/<strong>ttt.moneyguru</strong>&quot;, O_RDONLY|O_CLOEXEC) = 12<br />28768 <strong>read</strong>(12, &quot;&lt;?xml version=\&quot;1.0\&quot; … &lt;transaction date=\&quot;<strong>2019-09-16</strong>\&quot; ...) = 485<br />…..<br /><strong>PS</strong> - правда замечен один нюанс - файл (дескриптор) после открытия и чтения не закрывается, висит некоторое время открытым (причин может быть несколько, разбираться не стал)  - <strong>28768 close(12 &lt;unfinished &#8230;&gt;</strong><br />…….<br />А вот дальше непонятна мысль программиста - использование системного вызова <strong>writev</strong> (работает также как и write, но записывает <u>несколько буферов</u>) … но почему дважды и почти похожие … и почему 72 байта, не понял - <u>допустим так нужно</u><br /><pre><code>28768 writev(3, [{iov_base=&quot;\22\0\22\0\6\0 \1\204\1\0\0o\1\0\0\10\0\0\0000\0\0\0moneyGuru (/home/vasek/TTT/TEMP/1/ttt.moneyguru)&quot;, iov_len=72}], 1) = 72
28768 writev(3, [{iov_base=&quot;\22\0\22\0\6\0 \1&#39;\0\0\0\37\0\0\0\10ptr0\0\0\0moneyGuru (/home/vasek/TTT/TEMP/1/ttt.moneyguru)&quot;, iov_len=72}, {iov_base=NULL, iov_len=0}, {iov_base=&quot;&quot;, iov_len=0}], 3) = 72</code></pre>Но вот дальше снова открывается наш файл и в него уже пишется дата на 1 день меньше<br />28768 <strong>openat</strong>(AT_FDCWD, &quot;/home/vasek/TTT/TEMP/1/ttt.moneyguru&quot;, O_WRONLY|O_CREAT|O_TRUNC|O_CLOEXEC, 0666) = 12<br />28768 <strong>write</strong>(12, &quot;&lt;?xml version=\&quot;1.0\&quot; … &lt;transaction date=\&quot;<strong>2019-09-15</strong>\&quot; ...) = 485<br />И такое подозрение, что эта дата изменилась в буфере (при вызове writev) … но могу и ошибаться - глубоко копать не стал.<br /><strong>PS</strong> - и довольно часто вызывается<br /><pre><code>stat(&quot;/etc/localtime&quot;, {st_mode=S_IFREG|0644, st_size=1535, ...}) = 0</code></pre>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/19452/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747a8d1d0ad19d37',m:'v5KtnkrhsSWsu.LEMVXdZ0FYSvuar1eGMlIRf3_rFVc-1662670172-0-AQFHB/kwHrNCc5kI+36LrJlEv9CWILD5MCC7r30SoW+RVnYVoq3kd4Kk2x+llKsB9AxvJke4AgkWjfuGGgB42ENe+srEMCNC6LDuReet+DioKqUxTKFlqp4CLW79tW7dqMtI1+U1wHTcYVlmAfNKymk=',s:[0xd757afdbbb,0xff6b5be5df],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
