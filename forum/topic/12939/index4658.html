


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        [РЕШЕНО] Не работает TRIM на SSD
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/12/">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>[РЕШЕНО] Не работает TRIM на SSD</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>[РЕШЕНО] Не работает TRIM на SSD</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127877"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/rec/">
                <span class="post-username">rec</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127877/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/59/e6/59e633eaa20e7c7212550c73859984bf.png" alt="rec avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/rec/topics/">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/rec/posts/">
                    86
                </a>
            </div>
            <div>
                Участник с: 24 июня 2010
            </div>
            
        </td>
        <td class="post-content">
            У меня же в обоих случаях по нулям:<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="88fae7e7fcc8ecedfee5e9ebe0e1e6ed">[email&#160;protected]</a> rec]# ./checkTrim.sh tempfile 20 /dev/sdb
1+0 records in
1+0 records out
20971520 bytes (21 MB) copied, 1.72614 s, 12.1 MB/s
tempfile:
 filesystem blocksize 4096, begins at LBA 48; assuming 512 byte sectors.
 byte_offset  begin_LBA    end_LBA    sectors
           0     344112     385071      40960
/dev/sdb:
reading sector 344112: succeeded
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
This is a sector of the file. It should have been successfully read
and show a bunch of random data.
Press any key to continue...
File deleted. Sleeping for 120 seconds before re-reading the sector.
If TRIM is working, you should see all 0s now.
/dev/sdb:
reading sector 344112: succeeded
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
If the sector isn't filled with 0s, something is wrong with your
configuration. Try googling for "TRIM SSD Linux".</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127895"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nomad/">
                <span class="post-username">nomad</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127895/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nomad/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nomad/posts/">
                    87
                </a>
            </div>
            <div>
                Участник с: 25 марта 2013
            </div>
            
        </td>
        <td class="post-content">
            ТС, значит трим работает. Можно спать спокойно.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127897"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/rec/">
                <span class="post-username">rec</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127897/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/59/e6/59e633eaa20e7c7212550c73859984bf.png" alt="rec avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/rec/topics/">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/rec/posts/">
                    86
                </a>
            </div>
            <div>
                Участник с: 24 июня 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nomad</em><br/>ТС, значит трим работает. Можно спать спокойно.</blockquote>Уффф, наконец-то.<br/>А разве не должны быть в первом выхлопе рандомные данные, а во втором - нули?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127899"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nomad/">
                <span class="post-username">nomad</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127899/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nomad/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nomad/posts/">
                    87
                </a>
            </div>
            <div>
                Участник с: 25 марта 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>А разве не должны быть в первом выхлопе рандомные данные, а во втором - нули? </blockquote>А вот тут я не уверен. Может это после применения fstrim -v / ? У меня этот скрипт не работает. Но если проверить вручную, то<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d7a5b8b8a397b6a5b4bffab3b2a4bca3b8a7">[email&#160;protected]</a> nomad]# dd if=/dev/urandom of=tempfile count=10 bs=512k oflag=direct
10+0 записей получено
10+0 записей отправлено
 скопировано 5242880 байт (5,2 MB), 0,493052 c, 10,6 MB/c
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="86f4e9e9f2c6e7f4e5eeabe2e3f5edf2e9f6">[email&#160;protected]</a> nomad]# hdparm --fibmap tempfile
tempfile:
 filesystem blocksize 4096, begins at LBA 63; assuming 512 byte sectors.
 byte_offset  begin_LBA    end_LBA    sectors
           0  399316031  399317054       1024
      524288  399319103  399328318       9216
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f684999982b69784959edb9293859d829986">[email&#160;protected]</a> nomad]# hdparm --read-sector 524288 /dev/sda
/dev/sda:
reading sector 524288: succeeded
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3b4954544f7b5a495853165f5e48504f544b">[email&#160;protected]</a> nomad]# rm tempfile
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="82f0ededf6c2e3f0e1eaafe6e7f1e9f6edf2">[email&#160;protected]</a> nomad]# sync
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7604191902361704151e5b1213051d021906">[email&#160;protected]</a> nomad]# hdparm --read-sector 524288 /dev/sda
/dev/sda:
reading sector 524288: succeeded
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127900"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/nomad/">
                <span class="post-username">nomad</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127900/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/nomad/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/nomad/posts/">
                    87
                </a>
            </div>
            <div>
                Участник с: 25 марта 2013
            </div>
            
        </td>
        <td class="post-content">
            По этой статье <a href="http://habrahabr.ru/sandbox/70578/">http://habrahabr.ru/sandbox/70578/</a><br/><blockquote>Я подозреваю, что диск не триммит данные пока не приспичит, или пока не появится много свободного времени.</blockquote>Вот и я так же думаю
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127907"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/binaryshadow/">
                <span class="post-username">binaryshadow</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127907/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/de/3c/de3c388e2f57b6c49e7fe0bf2b2d118d.png" alt="binaryshadow avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/binaryshadow/topics/">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/binaryshadow/posts/">
                    453
                </a>
            </div>
            <div>
                Участник с: 30 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            Такой же ноут, только модель другая, линк на всякий случай <a href="https://wiki.archlinux.org/index.php/Fujitsu_LIFEBOOK_UH572_Ultrabook_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Fujitsu LIFEBOOK UH572 Ultrabook (Русский)</a>.<br/>Очень редко делаю (раз в пару месяцев):<br/><div class="code"><pre># fstrim -v /
/: 199,3 GiB (214010634240 bytes) trimmed</pre></div>и не заморачиваюсь.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-127927"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/elsonador/">
                <span class="post-username">elsonador</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/127927/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/c4/74/c4744210be47d6c1692ba03d7d1a5b83.png" alt="elsonador avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/elsonador/topics/">
                    63
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/elsonador/posts/">
                    996
                </a>
            </div>
            <div>
                Участник с: 09 апреля 2010
            </div>
            
        </td>
        <td class="post-content">
            Можно, конечно, не заморачиваться, но это не означает, что <strong>TRIM</strong> работает.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-128832"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/rec/">
                <span class="post-username">rec</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/128832/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/59/e6/59e633eaa20e7c7212550c73859984bf.png" alt="rec avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/rec/topics/">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/rec/posts/">
                    86
                </a>
            </div>
            <div>
                Участник с: 24 июня 2010
            </div>
            
        </td>
        <td class="post-content">
            Внезапно, спустя время решил проверить:<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="dcaeb3b3a89cb8b9aab1bdbfb4b5b2b9">[email&#160;protected]</a> ~]# ./checkTrim.sh tempfile2 20 /dev/sdb
1+0 записей получено
1+0 записей отправлено
 скопировано 20971520 байт (21 MB), 1,60601 c, 13,1 MB/c
tempfile2:
 filesystem blocksize 4096, begins at LBA 2099200; assuming 512 byte sectors.
 byte_offset  begin_LBA    end_LBA    sectors
           0    3246080    3278847      32768
    16777216    3475456    3483647       8192
/dev/sdb:
reading sector 3475456: succeeded
3bbd c7ab 98fd 8361 a89b f9de 0bb2 7ec4
75d6 594e 77c7 367b 757b f2ff 92ab 8ace
cfad b7dd f876 ae38 9eaf b981 a9a8 6265
11f5 ac0d fe8c 13d9 4541 e510 1403 1a00
dd50 7adc e767 5990 fd56 cb19 8f7a fefa
b82f 90e0 15da 72c6 448d c78a 95e5 6094
809d 5345 c0e3 7989 09a5 fb28 df29 e9aa
7eee 24e2 0158 072d 05c8 ec88 1483 fb57
0442 2ed1 8026 6307 d35c b1ce 987d 7bd2
3c3f eb96 3f38 bdcd 8288 550f 2e3d b611
b7f6 9b61 205e 5197 48cd f437 9bac c0e7
a4e8 e7d6 572f 8bcd af22 099f 943e 5cd4
2497 0451 937c a765 a9e6 433a 8021 c094
7068 c039 763e ddf6 0fcf 3b45 39df 99a8
f194 3e1c 637d 54bf 4c0b 338c 7513 4d49
d791 0a3b 4941 614f f10b d7f5 45c9 fbfa
ebd8 b0fa a6b8 b49a 358e b019 9693 74fd
3d66 31f2 33fc ba35 6695 041c ce32 ffb0
ee41 fe06 91b5 d642 fa53 0d09 3279 ac82
3679 1d84 4211 2b04 8325 11e2 ffd3 b044
94ec 380c 8b03 a454 15a2 2a69 cbc1 569d
9999 e60c 1b00 cb5c 3c6e 392d b7a7 55f0
3ba7 4d0b fdcf 2006 3931 a4a4 590d 1040
6e43 bc57 fdd9 291c 395d 3e78 2b05 a0fd
1a5b d3fd 4359 20a2 c8a6 e965 e8c4 bb94
2c2b 19cf 7afe 9a06 7dde 8524 1d81 de52
6a10 7127 dcd2 df2f 2fbf b114 91e8 d951
1b6a 2613 0bd5 d2b8 0d53 f9a5 e0bb 7b7a
d2f4 c517 6c40 d63d 24e0 738f d91c 4d88
c17b 5c69 47d7 998f f36b 1150 134f 8227
7736 db06 deba 5cf7 a4de 75eb fb1d b413
6aae 1200 a46d fb67 014b 9b7e dc83 5054
This is a sector of the file. It should have been successfully read
and show a bunch of random data.
Press any key to continue...
File deleted. Sleeping for 120 seconds before re-reading the sector.
If TRIM is working, you should see all 0s now.
/dev/sdb:
reading sector 3475456: succeeded
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
If the sector isn't filled with 0s, something is wrong with your
configuration. Try googling for "TRIM SSD Linux".
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a1d3ceced5e1c5c4d7ccc0c2c9c8cfc4">[email&#160;protected]</a> ~]# </pre></div>Вроде, всё работает...<br/>В процессе поисков наткнулся на любопытное <a href="https://bbs.archlinux.org/viewtopic.php?id=163268">обсуждение</a>, где пишут, что не стоит паниковать, если при проверке возвращаются рандомные данные.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-128891"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/rec/">
                <span class="post-username">rec</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/128891/">#</a>
            8 лет, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/59/e6/59e633eaa20e7c7212550c73859984bf.png" alt="rec avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/rec/topics/">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/rec/posts/">
                    86
                </a>
            </div>
            <div>
                Участник с: 24 июня 2010
            </div>
            
        </td>
        <td class="post-content">
            Кстати, скрипт, которым проверял - checkTrim.sh: <a href="https://pastebin.com/Ymw0FNjb">http://pastebin.com/Ymw0FNjb</a>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/12939/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747b384e49723aa7',m:'RGmfbvYjUPszcYiESkFVLvZ55ItiD.E1Z9tr.ve27SY-1662677190-0-AWbmWX5tFBvsvMALDBYHDPlCMfGMdsBZ0GZCVb0v25c6ZMHM4JngA4r6dPF4afZ4p/WDJV6QrifvOR4sJL1ukxEhmDSuSBeDWwcr9dbbaAWl1SRFvUycTcPfi5lJ/0CoN0kXuW5sKusd7H/yLb7r7sI=',s:[0xf48b5b1601,0x578c2b6672],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
