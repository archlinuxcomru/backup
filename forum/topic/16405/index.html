


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/16405/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        [Решено] Можно ли заменить tmpfs на zram?
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/23/index.html">Демоны и загрузка системы</a> <span class="divider">/</span></li>
            
        
        
            <li>[Решено] Можно ли заменить tmpfs на zram?</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>[Решено] Можно ли заменить tmpfs на zram?</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173188"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/anoobis/index.html">
                <span class="post-username">anoobis</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173188/index.html">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/anoobis/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/anoobis/posts/index.html">
                    37
                </a>
            </div>
            <div>
                Участник с: 13 августа 2016
            </div>
            
        </td>
        <td class="post-content">
            Приветствую Всех!<br /><br />Имеется старенький комп i586 с целероном 2.8 и 1.5Г памяти, которой как обычно, всегда мало, даже для ковыряния в интернете, а недавно узнал, что есть такая штука, как zram, что помогает использовать память эффективнее чуть ли не вдвое, включил её модуль у себя на компе, а что дальше делать не знаю. В вики <a href="https://wiki.archlinux.org/index.php?title=ZRAM&amp;redirect=no">есть статья</a>, как можно подключить zswap, но при моём объёме памяти держать своп в оперативе думаю смысла нет, а вот можно ли переключить на zram все смонтированные tmpfs точки?<br /><br /><pre><code>$ mount|grep tmpfs
dev on /dev type devtmpfs (rw,nosuid,relatime,size=771116k,nr_inodes=192779,mode=755)
run on /run type tmpfs (rw,nosuid,nodev,relatime,mode=755)
tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)
tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,mode=755)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev)
tmpfs on /run/user/1000 type tmpfs (rw,nosuid,nodev,relatime,size=154808k,mode=700,uid=1000,gid=1000)</code></pre><br />Стоит ли это делать и как это можно осуществить?<br /><br />Пока сделал zran небольшого объёма (256М), ну честно говоря, я не знаю какой нужен, сейчас такой<br /><br /><pre><code># zramctl
NAME       ALGORITHM DISKSIZE  DATA COMPR TOTAL STREAMS MOUNTPOINT
/dev/zram0 lzo           256M  184K  2,8K   84K       1 /zram
# mount|grep zram
/dev/zram0 on /zram type ext4 (rw,nosuid,nodev,noexec,noatime,discard,data=ordered,user)
</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173193"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/binaryshadow/index.html">
                <span class="post-username">binaryshadow</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173193/index.html">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/de/3c/de3c388e2f57b6c49e7fe0bf2b2d118d.png" alt="binaryshadow avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/binaryshadow/topics/index.html">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/binaryshadow/posts/index.html">
                    453
                </a>
            </div>
            <div>
                Участник с: 30 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>anoobis</em><br>zram, что помогает использовать память эффективнее чуть ли не вдвое, включил её модуль у себя на компе</blockquote>Надеюсь таким способом?<br /><pre><code>The systemd-swap package provides a systemd-swap.service unit to automatically initialize zram devices. Configuration is possible in /etc/systemd-swap.conf.</code></pre><br /><blockquote><em>anoobis</em><br>zswap, но при моём объёме памяти держать своп в оперативе думаю смысла нет</blockquote>Своп, на то и своп, чтоб лежать на диске и расширять оперативную память при её недостатке.<br /><br /><blockquote><em>anoobis</em><br>а вот можно ли переключить на zram все смонтированные tmpfs точки</blockquote>Systemd дефолтом создает эти папки &quot;tmpfs&quot; в оперативной памяти, если они конечно не прописаны явно в файле &quot;/etc/fstab&quot;, так же это можно отключить командой &quot;systemctl mask tmp.mount&quot; и всё временное барахло будет лежать на диске в каталоге /tmp.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173196"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/anoobis/index.html">
                <span class="post-username">anoobis</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173196/index.html">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/anoobis/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/anoobis/posts/index.html">
                    37
                </a>
            </div>
            <div>
                Участник с: 13 августа 2016
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>binaryshadow</em><br>Надеюсь таким способом?<br /><pre><code>The systemd-swap package provides a systemd-swap.service unit to automatically initialize zram devices. Configuration is possible in /etc/systemd-swap.conf.</code></pre></blockquote>Не-не, я своп не трогал. Подключил смысле через modprobe zram, т.е. делал по <a href="https://wiki.archlinux.org/index.php?title=Maximizing_performance&amp;redirect=no#Zram_or_zswap">вики</a>, но вместо свопа создал раздел, примерно так:<br /><pre><code>echo &quot;zram&quot; &gt; /etc/modules-load.d/zram.conf
echo &quot;options zram num_devices=1&quot; &gt; /etc/modprobe.d/zram.conf
echo &#39;KERNEL==&quot;zram0&quot;, ATTR{disksize}=&quot;256M&quot; RUN=&quot;/usr/bin/mkfs.ext4 /dev/zram0&quot;, TAG+=&quot;systemd&quot;&#39; &gt; /etc/udev/rules.d/99-zram.rules
echo &#39;/dev/zram0 /zram ext4 rw,discard,user,noatime 0 0&#39; &gt;&gt; /etc/fstab
</code></pre><br /><blockquote><em>binaryshadow</em><br>Своп, на то и своп, чтоб лежать на диске и расширять оперативную память при её недостатке.</blockquote>Это так, но ведь zram создаёт диск в оперативке, зачем тратить оперативку, которой и так мало на то, чтобы сохранять оперативку в оперативку)<br /><br /><blockquote><em>binaryshadow</em><br>Systemd дефолтом создает эти папки &quot;tmpfs&quot; в оперативной памяти, если они конечно не прописаны явно в файле &quot;/etc/fstab&quot;, так же это можно отключить командой &quot;systemctl mask tmp.mount&quot; и всё временное барахло будет лежать на диске в каталоге /tmp.</blockquote>А нельзя её не отключать, а переделать, чтобы эти временные файлы были внутри /zram? Ну т.е. создавались каталоги /zram/tmp, /zram/run, /zram/dev/shm, /zram/sys,/zram/fs/cgroup, /zram/run/user/1000 ?? Или это как-то по-другому делается?<br /><br />PS Или нужно создавать zram на каждый каталог? Или простые ссылки сделать с каталогов на zram, как правильно это делается?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173198"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/binaryshadow/index.html">
                <span class="post-username">binaryshadow</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173198/index.html">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/de/3c/de3c388e2f57b6c49e7fe0bf2b2d118d.png" alt="binaryshadow avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/binaryshadow/topics/index.html">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/binaryshadow/posts/index.html">
                    453
                </a>
            </div>
            <div>
                Участник с: 30 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            Я думаю так, что если systemd создает временную папку в оперативке с использованием zram, то делать ничего не нужно.<br />Собственно и tmpfs размещается в оперативке уже в сжатом виде, что легко проверить созданием файла во временной папке, без сжатия tmpfs и со сжатием.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173207"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/anoobis/index.html">
                <span class="post-username">anoobis</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173207/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/anoobis/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/anoobis/posts/index.html">
                    37
                </a>
            </div>
            <div>
                Участник с: 13 августа 2016
            </div>
            
        </td>
        <td class="post-content">
            Извините, непонятно, что Вы хотите сказать. Вот как я понимаю, zram создает свой диск в памяти, данные внутри которого хранятся в сжатом виде... в пределах этого диска, а tmpfs и другая память, используемая под своп или буфферы при этом продолжают работать в своём обычном режиме, т.е. от присутствия zram в системе они не начинают работать со сжатием.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173215"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jim945/index.html">
                <span class="post-username">jim945</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173215/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f7/09/f709d8f74afad03709f159a1e12444ef.png" alt="jim945 avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/jim945/topics/index.html">
                    8
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jim945/posts/index.html">
                    3066
                </a>
            </div>
            <div>
                Участник с: 25 января 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>anoobis</em><br>Не-не, я своп не трогал. Подключил смысле через modprobe zram, т.е. делал по вики, но вместо свопа создал раздел, примерно так:<br /><br />echo &quot;zram&quot; &gt; /etc/modules-load.d/zram.conf<br />echo &quot;options zram num_devices=1&quot; &gt; /etc/modprobe.d/zram.conf<br />echo &#39;KERNEL==&quot;zram0&quot;, ATTR{disksize}=&quot;256M&quot; RUN=&quot;/usr/bin/mkfs.ext4 /dev/zram0&quot;, TAG+=&quot;systemd&quot;&#39; &gt; /etc/udev/rules.d/99-zram.rules<br />echo &#39;/dev/zram0 /zram ext4 rw,discard,user,noatime 0 0&#39; &gt;&gt; /etc/fstab</blockquote>Все тоже самое. Только<br />num_devices - кол-во zram разделов. +1<br />Создаются разделы /dev/zram0 , /dev/zram1 , /dev/zram2 и т.д.<br />/dev/zram0 /tmp ext4 rw,nosuid,nodev<br /><br />И в этом примере ты не свап создаешь, а бесполезный раздел в корне.<br />Нужно mkswap /dev/zramX и в fstab соответствующую строку.
            
                
                    <div class="post-signature">
                        Lupus pilum mutat, non mentem.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173217"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jim945/index.html">
                <span class="post-username">jim945</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173217/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f7/09/f709d8f74afad03709f159a1e12444ef.png" alt="jim945 avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/jim945/topics/index.html">
                    8
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jim945/posts/index.html">
                    3066
                </a>
            </div>
            <div>
                Участник с: 25 января 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>binaryshadow</em><br>Собственно и tmpfs размещается в оперативке уже в сжатом виде,</blockquote>Да ладно?<br /><blockquote><em>binaryshadow</em><br>Собственно и tmpfs размещается в оперативке уже в сжатом виде, что легко проверить созданием файла во временной папке, без сжатия tmpfs и со сжатием.</blockquote>Сам то пробовал?
            
                
                    <div class="post-signature">
                        Lupus pilum mutat, non mentem.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173221"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jim945/index.html">
                <span class="post-username">jim945</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173221/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f7/09/f709d8f74afad03709f159a1e12444ef.png" alt="jim945 avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/jim945/topics/index.html">
                    8
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jim945/posts/index.html">
                    3066
                </a>
            </div>
            <div>
                Участник с: 25 января 2010
            </div>
            
        </td>
        <td class="post-content">
            Только какой в этом смысл?<br /><pre><code>tmpfs                   997M          32K  997M            1% /tmp
tmpfs                   997M          16K  997M            1% /var/log
tmpfs                   997M            0  997M            0% /var/tmp
</code></pre>Пакеты ёгуртом собирать только)))<br /><blockquote><em>anoobis</em><br>1.5Г памяти, которой как обычно, всегда мало,</blockquote>Сейчас с двум гигами сижу))) Фокс с 20 прогруженными вкладками открыт. + еще куча.<br /><pre><code>free -m
              total        used        free      shared  buff/cache   available
Mem:           1993         763         636          41         593        1029
Swap:             0           0           0
</code></pre><br />
            
                
                    <div class="post-signature">
                        Lupus pilum mutat, non mentem.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173223"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/anoobis/index.html">
                <span class="post-username">anoobis</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173223/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/anoobis/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/anoobis/posts/index.html">
                    37
                </a>
            </div>
            <div>
                Участник с: 13 августа 2016
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>jim945</em><br>Все тоже самое. Только<br />num_devices - кол-во zram разделов. +1<br />Создаются разделы /dev/zram0 , /dev/zram1 , /dev/zram2 и т.д.<br />/dev/zram0 /tmp ext4 rw,nosuid,nodev</blockquote>А зачем их много?<br />Я прикинул, проц одноядерный, всё равно в один поток будет жать, один будет диск или сотня - никакой разницы.<br /><br /><blockquote><em>jim945</em><br>И в этом примере ты не свап создаешь, а бесполезный раздел в корне.<br />Нужно mkswap /dev/zramX и в fstab соответствующую строку.</blockquote>Ну так.. бесполезный, хотел с него сделать полезный :)  закинуть tmpfs-каталоги, что могут отнимать память. (/tmp к примеру растёт при открытии больших архивов)<br />И своп кстати можно на этом же разделе сделать файлом.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-173224"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/jim945/index.html">
                <span class="post-username">jim945</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/173224/index.html">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f7/09/f709d8f74afad03709f159a1e12444ef.png" alt="jim945 avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/jim945/topics/index.html">
                    8
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/jim945/posts/index.html">
                    3066
                </a>
            </div>
            <div>
                Участник с: 25 января 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>anoobis</em><br>закинуть tmpfs-каталоги, что могут отнимать память.</blockquote>Тогда mkdir и mont --bind. И думать как это в автозапуск поставить)))<br /><blockquote><em>anoobis</em><br>(/tmp к примеру растёт при открытии больших архивов)</blockquote>У zram есть одна особенность. При удалеении файла место автоматически не освобождается. Нужен trim)))<br />Придется периодически забивать освободившееся место нолями.
            
                
                    <div class="post-signature">
                        Lupus pilum mutat, non mentem.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index37ef.html?next=/forum/topic/16405/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/16405/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:27 GMT -->
</html>
