


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Баг или фича?
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/5/">Разное</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/4/">/dev/null</a> <span class="divider">/</span></li>
            
        
        
            <li>Баг или фича?</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Баг или фича?</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=4" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212080"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212080/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Еще один эксперимент ... в части разного количества блоков, отображаюжих файл.<br /><br />1. Имеем файл ~/test (занимает 8 блоков по 512 байт)<br /><strong>cat ~/test</strong><br /><pre><code>T E S T - new</code></pre><strong>hexdump -C ~/test</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a   |T E S T - new.|
0000000e</code></pre><strong>sha256sum ~/test</strong><br /><pre><code>96ea802f84551c8bfb3b6754b72f99b12c1e686cdc8073c3955dca61df9383ac /home/vasek/test</code></pre><br />2. В файле ~/test оставляем только 1 блок (512 байт), остальные пустые блоки отрезаем<br /><strong>dd bs=512 count=1 if=/dev/sda of=~/test1 skip=292503469</strong><br /><strong>cat ~/test1</strong><br /><pre><code>T E S T - new</code></pre><strong>hexdump -C ~/test1</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a 00 00  |T E S T - new...|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000200</code></pre>Как видим хоть содержимое файлов полностью и совпадает, но отличие в выводе hexdump имеется ...<em>(хотя это и отличием то назвать нельзя)</em><br />Смотрим sha256sum и … видим, что он не совпадает с первоначальным<br /><strong>sha256sum ~/test1</strong><br /><pre><code>77ce13c46b4b6732f7d27e0da1e365c27b2a670a81007161a114d8908a2bdc53 /home/vasek/test1</code></pre><br />Выводы делать не буду, возможно что где то что то и напортачил (проверять не хочется).
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212085"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/jamakasi/">
                <span class="post-username">jamakasi</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212085/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/jamakasi/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/jamakasi/posts/">
                    16
                </a>
            </div>
            <div>
                Участник с: 20 декабря 2018
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vasek</em><br>Выводы делать не буду, возможно что где то что то и напортачил (проверять не хочется).</blockquote>Все верно они и должны отличаться. Физический размер файла изменился т.к. ты отрезал нули. Соответсвенно и sha не совпадет т.к. она подсчитывается именно по содержимому и его количеству.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212093"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212093/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>jamakasi</em><br>Физический размер файла изменился т.к. ты отрезал нули.</blockquote>Не все так просто, хоть и обрезал, но объем файла не уменьшился, а увеличился, НО, главное, изменились и атрибуты файла<br /><strong> stat ~/test</strong><br /> <pre><code>Файл: /home/vasek/test
  Размер: 14        	Блоков: 8          Блок В/В: 4096   обычный файл
 Доступ: (0644/-rw-r--r--)  Uid: ( 1000/   vasek)   Gid: (  100/   users)</code></pre><br /><strong>stat ~/test1</strong><br /> <pre><code>Файл: /home/vasek/test1
 Размер: 512       	Блоков: 8          Блок В/В: 4096   обычный файл
Доступ: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</code></pre><br />А потому и затрудняюсь сказать, что повлияло на изменение sha256sum - или оба отклонения или только одно. Экспериментируй дальше.<br /><br /><strong>EDIT 1</strong> - для полноты картинки нужно было обрезать по другому - оставить не 512 байт, а 14, то есть сохранить прежний размер <strike>и плюс к этому после всех анализов изменить права доступа этому файлу и снова проанализировать.</strike> - проверил, не влияет
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212095"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212095/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Вообщем, просто изменение <strike>прав</strike> владельца на sha256sum не влияет - <strong>влияет только размер файла</strong>  ... <em>насчет расширенных не знаю, не проверял</em><br />Еще провел маленький экспериментик - изменил <strike>права</strike> владельца файла<br /><strong>stat ~/test</strong><br /><pre><code>  Файл: /home/vasek/test
  Размер: 14        	Блоков: 8          Блок В/В: 4096   обычный файл
Доступ: (0644/-rw-r--r--)  Uid: ( 1000/   vasek)   Gid: (    0/    root)</code></pre><strong>sha256sum ~/test</strong><br /><pre><code>96ea802f84551c8bfb3b6754b72f99b12c1e686cdc8073c3955dca61df9383ac  /home/vasek/test</code></pre>Не изменилось - прежнее значение было такое же - 96ea802f84551c8bfb3b6754b72f99b12c1e686cdc8073c3955dca61df9383ac /home/vasek/test
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212105"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/jamakasi/">
                <span class="post-username">jamakasi</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212105/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/jamakasi/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/jamakasi/posts/">
                    16
                </a>
            </div>
            <div>
                Участник с: 20 декабря 2018
            </div>
            
        </td>
        <td class="post-content">
            <strong>vasek</strong>, кажись у меня потихоньку складывается впечатление что произошло глядя на твой эксперемент. Не трогай пока свой /home/vasek/test пока не прочтешь мысль ниже.<br />Я не знаю как и через что ты создал файл но складывается следующее впечатление.<br />Вариант 1. При сохранении файла программа которой ты сейвил файл &quot;оптимизировала&quot; его размеры увидев что в нем всего 14 байт и 3584 байта нулей, т.е. она их тупо откинула физически сохранив только 14 байт. Это можно проверить через hdparm --fibmap ~/test глянув и подсчитав begin_LBA    end_LBA параметры.<br />Вариант 2. Программа которой ты сохранял файл не причем, сюда вмешались алгоритмы ФС которые могли сделать следующее. При сохранении ФС увидела что файлик такой красивый и идеально выровнен на 8 блоков по 512 байт каждый, подумала и по встроенным алгоритмам оптимизации физически сохранила только 14 байт а дальше в служебной мета информации пометила что столько то блоков зарезервирована. Соответственно при любом чтении этого файла недостающие нули сгенерируются из /dev/zero чтобы не крихтеть жестким диском. Соответсвенно при чтении реальный размер файла становился 4096 т.е. добивался нулями а значит sha256 считал именно столько байт. Тут ниже распишу отдельно как это проверить можно.<br />Вариант 3. Если вариант 2 справедлив то вероятно dd bs=512 count=1 if=/dev/sda <strong>of=~/test1</strong> skip=292503469 конкретно <strong>OF=</strong> работает несколько по иному и чхать хотел на некоторые алгоритмы ФС. Т.е. он тупо взял 512 байт с такого то смещения и физически их вытащил. дальше он заставил ФС физически сохранить ровно 512 байт не включая ее оптимизации чтобы она не метила нулевые байты чтобы их потом выдать из /dev/zero. Т.е. он сохранил и убедился что они действительно физически сохранены.<br /><br />А теперь как это проверить.<br />-Предварительно считаешь sha256sum ~/test и смотришь stat ~/test. Копируешь через cp файл и сравниваешь снова с копией.<br />Теоретически если ты сейчас через dd т.е. минуя ФС запишешь по смещению файла + ну например 14 байт что угодно. Т.е. тебе надо будет отсчитать как то так на основе твоих данных , если читал dd bs=512 count=1 if=/dev/sda of=~/test1 skip=292503469 , значит будет типа dd  count=1 if=некий_файл_пара_байт of=/dev/sda skip=292503469*512+14<br />Теперь считаешь sha256sum ~/test и смотришь stat ~/test . Что было и что стало относительно оригинала и копии. По идее все должно совпадать т.к. фс незнает о том что там что то есть и все также будет выдавать /dev/zero.<br />Теперь пробуешь скопировать файл через dd bs=512 count=1 if=/dev/sda of=~/test1 skip=292503469 .Теперь сравниваешь все файлы с ним. Теперь sha256 не совпадет как и размер файла. Копируешь этот файл через cp и смотришь сработала ли оптимизация ФС и стал ли файл весить14+2 байта. Если нет то попробуй открыть ~/test1 программой который создавал и сохранял ~/test а затем сохранить как ~/test2 . Снова смотришь sha256 и размеры. Теоретически снова сработает оптимизация ФС.<br /><br />Надеюсь донес мысль. Если выше написанное подтвердится то это дает гарантию что первоначальная проблема может возникать если ФС надеется что там то нули должны быть физически но если это не так и к примеру алгоритм который подсовывает /dev/zero вместо прямого чтения не включается в силу причин (высокая нагрузка на память\цпу\что то) то может произойти физическое чтений и вот тут то окажется что там могли быть не нули и они попадут в такие ровные блоки как случилось у меня. Т.е. в те самые ровные блоки пустоты по 512 байт окажутся не с пустотой а с кашей.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212107"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212107/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Файлы я уже удалил, в принципе то и создать их по новой не проблема, но нет желания экспериментировать дальше.<br />Вообщем то все ясно. Файл ~/test1, который получился при обрезании, получился заданным размером 512 байт - это такая была команда dd - выделить на диске с заданного offset 512 байт и сохранить результат в отдельный файл. В принципе hexdump это сразу и показал<br /><strong>hexdump -C ~/test1</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a 00 00  |T E S T - new...|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000200</code></pre><strong>0x200 = 512</strong> байт<br />Сравни с этим<br /><strong>hexdump -C ~/test</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a   |T E S T - new.|
0000000e</code></pre><strong>0xe = 14</strong> байт<br /><u>Это же показывает и stat</u>. Разные размеры файлов, значит и разные значения sha256sum.<br />Предположу, что у тебя причина была тоже в разных размерах файлов (как я понял у тебя в разных системах еще и разные блоки - это как то и сказалось. Нужно смотреть). Можешь все проверить по-новой на реальных файлах - только проверяй размеры hexdump или stat.<br />Если значения  sha256sum будут не совпадать, а размеры файлов будут одинаковы, то тогда придется проверять файла по байтово.<br /><br /><strong>EDIT 1</strong> - Насчет 4096 - размер файла (фактический) может быть и 10 байт и 100 байт и 1000 байт, но система оперирует страницами размером 4K (4096), столько и было выделено данному файлу на диске ... а я с диска считал 512 байт, а не 14 байт.<br /><br /><strong>EDIT 2</strong> - считал 512 байт вместо 14 просто по привычке, как делаю при восстановлении файлов - считываю блоками, важна информация и не думаешь о разных нюансах, а потому сразу и не сообразил.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212110"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/jamakasi/">
                <span class="post-username">jamakasi</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212110/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/jamakasi/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/jamakasi/posts/">
                    16
                </a>
            </div>
            <div>
                Участник с: 20 декабря 2018
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vasek</em><br>Файлы я уже удалил, в принципе то и создать их по новой не проблема, но нет желания экспериментировать дальше.</blockquote>Жаль, Шанс что совпадет то что получится создать файл который блоками ровненько и последовательно  по диску зайдет, не так много.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212114"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212114/">#</a>
            3 года, 8 месяцев назад
            
                (отредактировано
                
                    3 года, 8 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>jamakasi</em><br>Жаль, Шанс что совпадет то что получится создать файл который блоками ровненько и последовательно по диску зайдет, не так много.</blockquote>Все должно совпасть, работать с байтами удобно и понятно, а потому проблем не вижу.<br />Привожу результаты повтора<br /><u>1. Создание файла ~/test</u><br /><strong>stat ~/test</strong><br /> <pre><code> Файл: /home/vasek/test
  Размер: 14            Блоков: 8          Блок В/В: 4096   обычный файл</code></pre><strong>hexdump -C ~/test</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a        |T E S T - new.|
0000000e</code></pre> <strong>sha256sum ~/test</strong><br /><pre><code>96ea802f84551c8bfb3b6754b72f99b12c1e686cdc8073c3955dca61df9383ac  /home/vasek/test</code></pre>как видим все совпадает с прежним выводом<br /><br /><u>2. Получение файла ~/test1</u><br /><strong>sudo dd bs=512 count=1 if=/dev/sda of=~/test1 skip=292510373</strong><br /><strong>stat ~/test1</strong><br />  <pre><code>Файл: /home/vasek/test1
  Размер: 512           Блоков: 8          Блок В/В: 4096   обычный файл</code></pre> <strong>hexdump -C ~/test1</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a 00 00  |T E S T - new...|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000200</code></pre><strong>sha256sum ~/test1</strong><br /><pre><code>77ce13c46b4b6732f7d27e0da1e365c27b2a670a81007161a114d8908a2bdc53  /home/vasek/test1</code></pre>и снова видим, что все совпало с прежним выводом<br /><br /><u>3. А вот сейчас из файла ~/test1 получим исходный файл ~/test, но только назовем его ~/test1-1</u> ... <em>то есть скопируем из ~/test1 только 14 байт</em><br /><strong>dd if=~/test1 of=~/test1-1 bs=14 count=1</strong><br /> <strong>stat ~/test1-1</strong><br /> <pre><code> Файл: /home/vasek/test1-1
  Размер: 14            Блоков: 8          Блок В/В: 4096   обычный файл</code></pre><strong>hexdump -C ~/test1-1</strong><br /><pre><code>00000000  54 20 45 20 53 20 54 20  2d 20 6e 65 77 0a        |T E S T - new.|
0000000e</code></pre><strong>sha256sum ~/test1-1</strong><br /><pre><code>96ea802f84551c8bfb3b6754b72f99b12c1e686cdc8073c3955dca61df9383ac  /home/vasek/test1-1</code></pre><br />и снова видим полное совпадение с выводом для первоначального файла ~/test<br />Что еще раз подтверждает, что никакого бага нет, а просто имеется не совпадение файлов или по размеру или по содержимому.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212119"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/anode/">
                <span class="post-username">anode</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212119/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/anode/topics/">
                    7
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/anode/posts/">
                    982
                </a>
            </div>
            <div>
                Участник с: 30 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            &quot;Горе от ума&quot;. Спасибо. От души насмешили. Некоторые выражения достойны стать мемами.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-212137"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/jamakasi/">
                <span class="post-username">jamakasi</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/212137/">#</a>
            3 года, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/jamakasi/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/jamakasi/posts/">
                    16
                </a>
            </div>
            <div>
                Участник с: 20 декабря 2018
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>anode</em><br>&quot;Горе от ума&quot;. Спасибо. От души насмешили. Некоторые выражения достойны стать мемами.</blockquote>Раз насмешили то посвяти нас нищих и безбожный как в моем первоначальном случае в пустоты данных попал мусор?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=4" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/18951/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747a918cdff55aae',m:'doNkkNHt3Yq4y5xrON9u8_Jp1uVcs6o2ssITmAg0ifk-1662670354-0-AcEm0sCALa28F5s+NX9z5wIBJycmNkkD0h/1QhWoQjFUVWCJV6L9l+D5GqXfc08iahDiv2chSj0zSEaXxDVdbdgHy677MCMe90flrWGwcvYu4li4iif8mKMsTfIQAY/7A4WS5HFnYVK+TfgfhOc+NTk=',s:[0x2310edcc29,0x1a2bf77bc5],u:'/cdn-cgi/challenge-platform/h/g'};var _cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/cb/invisible.js?cb=747a918cdff55aae',document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
