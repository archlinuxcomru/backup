


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/20907/?page=3 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:11:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        A stop is running for Session 1
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/5/index.html">Разное</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/4/index.html">/dev/null</a> <span class="divider">/</span></li>
            
        
        
            <li>A stop is running for Session 1</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>A stop is running for Session 1</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index4658.html?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index9ba9.html?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255074"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255074/index.html">#</a>
            6 месяцев, 3 недели назад
            
                (отредактировано
                
                    6 месяцев, 2 недели назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Насколько помнится, должны быть строки типа такого, почти в конце<br /><pre><code>session-1.scope: Killing process &lt;PID&gt; ....
session-1.scope: Failed with result ‘timeout’ ....</code></pre>В твоем выводе что то не видно <strong>Failed with result ‘timeout’</strong> - <u>может не тот лог?</u><br /><br /><strike>Можно еще использовать волшебные кнопки - <strong>Alt + SysRq + d</strong>  - это покажет в логах информацию о всех блокировках, которые держат устройства или файлы.</strike><br />Как это делать - описывал не однократно.<br /><br /><strong>EDIT</strong> - <strong>Не прав</strong> - похоже изменилось ... смотрим help <strong>Alt + SysRq + h</strong> ... и видим, что <u>d исчезло</u> ...<br /><pre><code>sysrq: HELP : loglevel(0-9) reboot(b) crash(c) terminate-all-tasks(e) memory-full-oom-kill(f) kill-all-tasks(i) thaw-filesystems(j) sak(k) show-backtrace-all-active-cpus(l) show-memory-usage(m) nice-all-RT-tasks(n) poweroff(o) show-registers(p) show-all-timers(q) unraw(r) sync(s) show-task-states(t) unmount(u) force-fb(v) show-blocked-tasks(w) dump-ftrace-buffer(z)</code></pre>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255075"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255075/index.html">#</a>
            6 месяцев, 3 недели назад
            
                (отредактировано
                
                    6 месяцев, 3 недели назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>igorog</em><br>При очередном зависании выключения, когда идёт таймер и ни на что не реагирует - я могу что-то сделать, чтобы в ЭТОТ момент собрать макс. лог?<br />Как сохранить информацию краша по максимуму именно в ЭТОТ момент?</blockquote>Описывал не однократно - как и что делать - использую волшебные кнопки ... используя их мошешь даже выполнить и reboot и shutdown ...
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255076"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/igorog/index.html">
                <span class="post-username">igorog</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255076/index.html">#</a>
            6 месяцев, 3 недели назад
            
                (отредактировано
                
                    6 месяцев, 3 недели назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/igorog/topics/index.html">
                    12
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/igorog/posts/index.html">
                    136
                </a>
            </div>
            <div>
                Участник с: 22 июля 2018
            </div>
            
        </td>
        <td class="post-content">
            Запустил journalctl - там нет никакого упоминания о проблеммах с <strong>завершением</strong> работы, только лог загрузки.<br />???<br />Это нормально? Разве там не полный журнал? Простите за нубские вопросы. Просто у нас глубокая ночь, а это инфа на &quot;сон грядущий&quot;. Завтра вникну.<br /><blockquote><em>vasek</em><br>Alt + SysRq + d</blockquote>Спасибо, завтра буду вести разбор полётов.<br />А сейчас, - Спокойной ночи!
            
                
                    <div class="post-signature">
                        Давайте жить дружно! :-)
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255078"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255078/index.html">#</a>
            6 месяцев, 2 недели назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Посмотрел логи (часть вывода) … вот только зачем выложил за разные даты и время?<br /><blockquote><em>igorog</em><br>фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Stopping timed out. Killing.<br />фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Killing process 14585 (qemu-system-x86) with signal SIGKILL.<br />фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Killing process 14619 (kvm-nx-lpage-re) with signal SIGKILL.<br />фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Killing process 15784 (adb) with signal SIGKILL.<br />фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Killing process 14609 (qemu-sy:disk$0) with signal SIGKILL.<br />фев 14 12:00:10 FIRE systemd[1]: session-1.scope: Killing process 14610 (n/a) with signal SIGKILL.</blockquote>что можно сказать на вскидку? - похоже следовал советам и внес изменения в файл /etc/systemd/system.conf или /etc/systemd/logind.conf … так как при выключении много процессов не отвечает и их уничтожает сигнал SIGKILL … никакого timeout не видно … и что там происходит, не понятно.<br />Но есть один нюанс - все эти процессы, которые уничтожает SIGKILL, принадлежат <strong>FIRE systemd[1]</strong> - <u>это что - песочница?</u> … если да, то для начала нужно ее деактивировать и если без нее все будет нормально, то причина в ее настройке/запуске/выключении.<br />Но лучше эту гадость убрать вообщее … и не забудь вернуть на место настройки в файлах /etc/systemd/system.conf и /etc/systemd/logind.conf
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255079"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/acid_raccoon/index.html">
                <span class="post-username">acid_raccoon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255079/index.html">#</a>
            6 месяцев, 2 недели назад
            
                (отредактировано
                
                    6 месяцев, 2 недели назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/2b/76/2b768ffe5d05d904bfb3fab5fc2d5221.png" alt="acid_raccoon avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/acid_raccoon/topics/index.html">
                    9
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/acid_raccoon/posts/index.html">
                    102
                </a>
            </div>
            <div>
                Участник с: 08 мая 2020
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vasek</em><br>Насколько помнится, должны быть строки типа такого, почти в конце<br /><br />session-1.scope: Killing process &lt;PID&gt; &#8230;.<br />session-1.scope: Failed with result ‘timeout’ &#8230;.</blockquote><br />тоже иногда, может один раз на 10- 15 выключений такое бывает, вот крайний случай:<br /><br /><pre><code>[acid@raccoon ~ ]$ journalctl -b -2 -p5 | grep -i kill
фев 13 16:22:16 raccoon systemd[571]: pulseaudio.service: Killing process 765 (gdbus) with signal SIGKILL.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Stopping timed out. Killing.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Killing process 622 (kwin_x11) with signal SIGKILL.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Killing process 6261 (FreezeDetector) with signal SIGKILL.</code></pre><pre><code>фев 13 16:22:16 raccoon systemd-logind[394]: System is powering down.
фев 13 16:22:16 raccoon sddm[419]: Authentication error: &quot;Process crashed&quot;
фев 13 16:22:16 raccoon sddm[419]: Auth: sddm-helper crashed (exit code 15)
фев 13 16:22:16 raccoon sddm[419]: Authentication error: &quot;Process crashed&quot;
фев 13 16:22:16 raccoon sddm[419]: Auth: sddm-helper exited with 15
фев 13 16:22:16 raccoon kded5[619]: QDBusAbstractAdaptor: Cannot relay signal KDEDModule::moduleDeleted(KDEDModule*): Pointers are not supported: KDEDModule*
фев 13 16:22:16 raccoon polkitd[658]: Unregistered Authentication Agent for unix-session:1 (system bus name :1.18, object path /org/kde/PolicyKit1/AuthenticationAgent, locale ru_UA.UTF-8) (disconnected from bu&gt;
фев 13 16:22:16 raccoon kded5[619]: The X11 connection broke: I/O error (code 1)
фев 13 16:22:16 raccoon udisksd[707]: udisks daemon version 2.9.4 exiting
фев 13 16:22:16 raccoon kglobalaccel5[652]: The X11 connection broke (error 1). Did the X11 server die?
фев 13 16:22:16 raccoon kactivitymanagerd[661]: The X11 connection broke (error 1). Did the X11 server die?
фев 13 16:22:16 raccoon kwin_x11[622]: The X11 connection broke: I/O error (code 1)
фев 13 16:22:16 raccoon pulseaudio[690]: ICE I/O error handler called
фев 13 16:22:16 raccoon pulseaudio[690]: X11 I/O error handler called
фев 13 16:22:16 raccoon pulseaudio[690]: X11 I/O error exit handler called, preparing to tear down X11 modules
фев 13 16:22:16 raccoon kscreen_backend_launcher[780]: The X11 connection broke (error 1). Did the X11 server die?
фев 13 16:22:16 raccoon systemd-coredump[8688]: Failed to connect to coredump service: Connection refused
фев 13 16:22:16 raccoon systemd[571]: pulseaudio.service: Main process exited, code=dumped, status=11/SEGV
фев 13 16:22:16 raccoon systemd[571]: pulseaudio.service: Killing process 765 (gdbus) with signal SIGKILL.
фев 13 16:22:16 raccoon systemd[571]: pulseaudio.service: Failed with result &#39;core-dump&#39;.
фев 13 16:22:17 raccoon pulseaudio[8766]: Stale PID file, overwriting.
фев 13 16:22:17 raccoon pulseaudio[8766]: stat(&#39;/etc/pulse/default.pa.d&#39;): Нет такого файла или каталога
фев 13 16:22:17 raccoon sddm[419]: Signal received: SIGTERM
фев 13 16:22:18 raccoon sddm[419]: QProcess: Destroyed while process (&quot;/usr/lib/sddm/sddm-helper&quot;) is still running.
фев 13 16:22:18 raccoon systemd[1]: sddm.service: Consumed 12min 20.610s CPU time.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Stopping timed out. Killing.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Killing process 622 (kwin_x11) with signal SIGKILL.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Killing process 6261 (FreezeDetector) with signal SIGKILL.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Failed with result &#39;timeout&#39;.
фев 13 16:23:46 raccoon systemd[1]: session-1.scope: Consumed 19min 10.201s CPU time.
фев 13 16:23:46 raccoon systemd[571]: app.slice: Consumed 1h 9min 46.660s CPU time.
фев 13 16:23:46 raccoon systemd[575]: pam_warn(systemd-user:setcred): function=[pam_sm_setcred] flags=0x8004 service=[systemd-user] terminal=[] user=[acid] ruser=[&lt;unknown&gt;] rhost=[&lt;unknown&gt;]
фев 13 16:23:46 raccoon systemd[1]: user@1000.service: Consumed 1h 12min 21.396s CPU time.
фев 13 16:23:46 raccoon systemd[1]: user-1000.slice: Consumed 1h 31min 31.607s CPU time.
фев 13 16:23:47 raccoon systemd[1]: user.slice: Consumed 1h 31min 31.607s CPU time.
фев 13 16:23:47 raccoon systemd[1]: Shutting down.
</code></pre>
            
                
                    <div class="post-signature">
                        «Load universe into cannon. Aim at brain. Fire.» ©
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255080"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vall/index.html">
                <span class="post-username">vall</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255080/index.html">#</a>
            6 месяцев, 2 недели назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/75/16/7516abe53f0b63051ad4cbbbc3b45af7.png" alt="vall avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/vall/topics/index.html">
                    45
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vall/posts/index.html">
                    1786
                </a>
            </div>
            <div>
                Участник с: 28 марта 2017
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>igorog</em><br>завтра буду вести разбор полётов.</blockquote>Если <u>на десктопе</u> система сходным образом -- задержка загрузки/выгрузки -- ведёт себя и <u>в другой ОС</u> (уточнить в случае дуалбута), то есть смысл проверить <em>соединение кабелей питания присоединенных</em> устройств. И начать прежде всего с HDD, SSD и т.п.<br /><br />Буквально на неделе решил вопрос знакомому, у которого Archlinux примерно с месяц при завершении работы имел непонятные задержки. Кроме того индикация на материнской плате подмигивала разными встроенными огоньками и периодически раздавались непонятные щелчки.<br /><br />Попытки наскоком решить вопрос оказались неудачными, в логах было что-то о LVM, хотя они не были созданы и т.д., и т.п. В итоге недавно система вообще стала очень странно и долго загружаться/выгружаться. В том числе и установленная мастдайка. Потребовалась скорая помощь. Я начал с проверки последних обновлений системы. Затем протестировал носители информации на ошибки штатными средствами: всё в порядке. И лишь открыв системный блок, обнаружил, что кабель питания на одном HDD присоединён неплотно (почти слетел). Хотя этот диск монтировался при загрузке, читался и тестировался.<br /><br />После добросовестного присоединения кабеля все проблемы исчезли на всех ОС. Пропали посторонние звуки матплаты, исчезла индикация и прочее. Выяснилось, что перед НГ товарищ наводил порядок в системном блоке и очищая от пыли (как теперь стало ясно) задел кабель.<br /><br />Пустяковый вопрос отнял кучу времени у двух человек.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-255087"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/255087/index.html">#</a>
            6 месяцев, 2 недели назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Приведу еще один способ анализа - так как для уничтожения неотвечающих/зависших процессов применяется сигнал SIGKILL (или сигнал 9), то можно задействовать <strong>audit</strong><br />- смотрим какие правила установлены<br /><strong>sudo auditctl -l</strong><br /><pre><code>No rules</code></pre>… если установлены, то лучше очистить командой: <strong>sudo auditctl -D</strong> ...<br />- устанавливаем следующее правило: <strong>sudo auditctl -a exit,always -S kill</strong><br />проверяем: <strong>sudo auditctl -l</strong><br /><pre><code>-a always,exit -S kill</code></pre>… все работаем … и если какой то процесс будет уничтожен сигналом SIGKILL, то это можно будет увидеть в логах.<br /><br />Как пример, замочим сами процесс xterm:<br />- узнаем PID xterm: <strong>pidof xterm</strong> --- <u>14900</u><br />- для наглядности (да и чтобы не утонуть в логах) запускаем <strong>journalctl -f</strong><br />- уничтожаем xterm: <strong>sudo kill -9 14900</strong><br />- находим в логах следующие строчки (идущие подряд)<br /><pre><code>фев 15 12:36:23 arch audit[15547]: SYSCALL arch=c000003e syscall=62 success=yes exit=0 a0=3a34 a1=9 a2=0 a3=7f8b360c0ac0 items=0 ppid=15546 pid=15547 auid=1000 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=pts0 ses=1 comm=&quot;kill&quot; exe=&quot;/usr/bin/kill&quot; key=(null)
фев 15 12:36:23 arch audit: OBJ_PID opid=14900 oauid=1000 ouid=1000 oses=1 ocomm=&quot;xterm&quot;</code></pre>и видим, что замочен процесс <u>PID=14900</u> … и это <u>xterm</u>  … при желании можно проанализировать всю расшифровку (сам уже не помню, а лезти в DOC - лень)<br />- если правило больше не нужно, <u>не забываем его удалить</u> --- <strong>sudo auditctl -D</strong><br />Кстати, audit можно натравить и на другое, например, конкретный процесс или файл и др. ... но нужно его осваивать. Лично я им пользуюсь редко и знаю его слабо.<br /><br /><strong>PS</strong> - audit имеет и свой лог - /var/log/audit/audit.log
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index4658.html?page=2" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index9ba9.html?page=3">3 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index2b31.html?next=/forum/topic/20907/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/20907/?page=3 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:11:13 GMT -->
</html>
