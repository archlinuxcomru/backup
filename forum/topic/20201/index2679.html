


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/20201/?page=1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 08:21:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        TRIM на SSD: discard или периодический fstrim?
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/23/index.html">Демоны и загрузка системы</a> <span class="divider">/</span></li>
            
        
        
            <li>TRIM на SSD: discard или периодический fstrim?</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>TRIM на SSD: discard или периодический fstrim?</h1>
        
            <div class="text-center">
    



</div>

        

        
            

<div class="poll">
  <h2>Опрос</h2>
  <table class="table table-bordered poll">
    <thead>
    <tr class="poll-question">
      <th colspan="2">
        Что лучше для домашнего пользователя на бюджетном SSD в 2020 году?
      </th>
    </tr>
    </thead>

    <tbody class="poll-answers">
    
      
        <tr class="poll-answer">
          <td colspan="2">добавить опцию discard в fstab</td>
        </tr>
      
        <tr class="poll-answer">
          <td colspan="2">включить fstrim по таймеру</td>
        </tr>
      
        <tr class="poll-answer">
          <td colspan="2">оба варианта равнозначны для SSD / дело вкуса</td>
        </tr>
      
        <tr class="poll-answer">
          <td colspan="2">ничего не делать</td>
        </tr>
      
    
    </tbody>
  </table>
</div>

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234797"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vinc/index.html">
                <span class="post-username">vinc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234797/index.html">#</a>
            1 год, 11 месяцев назад
            
                (отредактировано
                
                    1 год, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vinc/topics/index.html">
                    12
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vinc/posts/index.html">
                    180
                </a>
            </div>
            <div>
                Участник с: 13 июня 2015
            </div>
            
        </td>
        <td class="post-content">
            Прочитал несколько статей, но однозначной рекомендации так и не увидел.<br />Wiki Arch, Debian и другие дают два варианта как равнозначные (с небольшими туманными оговорками).<br />Жаркие споры и статьи на эту тему - пяти-восьмилетней давности. С тех пор и диски изменились и, наверное, что-то драйверах ОС поменялось.<br /><br />Так что же лучше для домашнего пользователя на бюджетном SSD в 2020 году: добавить опцию discard или включить fstrim по таймеру?<br />Может, у сообщества уже есть явно превалирующий вариант, но он не сформулирован в Wiki?<br /><br />PS. Если было недавно такое обсуждение (не позже года-двух), то ткните ссылкой, плиз.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234799"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/s-ugra%40ya.ru/index.html">
                <span class="post-username">s-ugra@ya.ru</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234799/index.html">#</a>
            1 год, 11 месяцев назад
            
                (отредактировано
                
                    1 год, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/93/a4/93a46d9eac5ebd0cca83f310f72f0f10.png" alt="s-ugra@ya.ru avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/s-ugra%40ya.ru/topics/index.html">
                    11
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/s-ugra%40ya.ru/posts/index.html">
                    763
                </a>
            </div>
            <div>
                Участник с: 15 ноября 2016
            </div>
            
        </td>
        <td class="post-content">
            Я перечитав массу мнений, решил особо не заморачиваться, и пришёл к такому выбору:<br /><br /><pre><code>defaults,ssd,space_cache</code></pre>ИМХО современным ОС и дискам этого достаточно. Возможно, что какими-то опциями можно увеличить быстродействие или срок службы дисков, но скорее всего профит будет незначительным, если не минусовым.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234801"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/nafanja/index.html">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234801/index.html">#</a>
            1 год, 11 месяцев назад
            
                (отредактировано
                
                    1 год, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/nafanja/topics/index.html">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/nafanja/posts/index.html">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            у меня  fstrim по таймеру<br /><br /><blockquote><em>s-ugra@ya.ru</em><br>defaults,ssd,space_cache</blockquote>если это для btrfs, то <strong>ssd,space_cache</strong> не нужно (хотя и ничего плохого в этом нет!!!), оно само устанавливается.<br />опции <strong>defaults</strong> достаточно для любых фс, остальные опции только по действительной необходимости.
            
                
                    <div class="post-signature">
                        <a href="../10992/index.html">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234802"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vs220/index.html">
                <span class="post-username">vs220</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234802/index.html">#</a>
            1 год, 11 месяцев назад
            
                (отредактировано
                
                    1 год, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vs220/topics/index.html">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vs220/posts/index.html">
                    8070
                </a>
            </div>
            <div>
                Участник с: 16 августа 2009
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vinc</em><br>Wiki Arch дают ..как равнозначные..</blockquote>Я бы так не сказал. Непрерывный не всем подходит<br /><a href="https://wiki.archlinux.org/index.php/Solid_state_drive">https://wiki.archlinux.org/index.php/Solid_state_drive</a><br /><blockquote>Continuous TRIM<br />Note: There is no need to enable continuous TRIM if you run fstrim periodically. If you want to use TRIM, use either periodic TRIM or continuous TRIM.<br />Instead of issuing TRIM commands once in a while (by default once a week if using fstrim.timer), it is also possible to issue TRIM commands each time files are deleted instead. The latter is known as the continuous TRIM.<br /><br />Warning: Before SATA 3.1 all TRIM commands were non-queued, so continuous trimming would produce frequent system freezes. In this case, applying #Periodic TRIM less often is better alternative. Similar issue holds also for a number of devices, see ata_device_blacklist in Linux source code, for which queued TRIM command execution was blacklisted due to serious data corruption. In such case, depending on the device, the system may be forced to send non-queued TRIM commands the SSD instead of queued TRIM. See Wikipedia:Trim_(computing)#Disadvantages for details.<br />Note: Continuous TRIM is not the most preferred way to issue TRIM commands among the Linux community. For example, Ubuntu enables periodic TRIM by default [5], Debian does not recommend using continuous TRIM [6] and Red Hat recommends using periodic TRIM over using continuous TRIM if feasible. [7][dead link 2020-04-03 ⓘ]</blockquote><br />У самого переодический по таймеру
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234806"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/s-ugra%40ya.ru/index.html">
                <span class="post-username">s-ugra@ya.ru</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234806/index.html">#</a>
            1 год, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/93/a4/93a46d9eac5ebd0cca83f310f72f0f10.png" alt="s-ugra@ya.ru avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/s-ugra%40ya.ru/topics/index.html">
                    11
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/s-ugra%40ya.ru/posts/index.html">
                    763
                </a>
            </div>
            <div>
                Участник с: 15 ноября 2016
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nafanja</em><br>если это для btrfs, то ssd,space_cache не нужно</blockquote>Да, btrfs. Если не нужно - уберу, я за минимализм))
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234820"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vinc/index.html">
                <span class="post-username">vinc</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234820/index.html">#</a>
            1 год, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vinc/topics/index.html">
                    12
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vinc/posts/index.html">
                    180
                </a>
            </div>
            <div>
                Участник с: 13 июня 2015
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vs220</em><br>Я бы так не сказал. Непрерывный не всем подходит</blockquote>У меня такое чувство, что все эти предупреждения были написаны лет 5-8 назад, и соответственно относились к оборудованию уже 10-12-летней давности к настоящему моменту. А как дела обстоят сейчас? Может быть, ТРИМ вообще уже не нужен и контроллеры SSD сами со всем справляются.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234823"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Velesich/index.html">
                <span class="post-username">Velesich</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234823/index.html">#</a>
            1 год, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/de/05/de0576f8b854d1c6d989bb44f030c649.png" alt="Velesich avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/Velesich/topics/index.html">
                    14
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Velesich/posts/index.html">
                    784
                </a>
            </div>
            <div>
                Участник с: 23 апреля 2013
            </div>
            
        </td>
        <td class="post-content">
            Я после обновления делаю fstrim, этого хватает.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-234824"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/s-ugra%40ya.ru/index.html">
                <span class="post-username">s-ugra@ya.ru</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/234824/index.html">#</a>
            1 год, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/93/a4/93a46d9eac5ebd0cca83f310f72f0f10.png" alt="s-ugra@ya.ru avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/s-ugra%40ya.ru/topics/index.html">
                    11
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/s-ugra%40ya.ru/posts/index.html">
                    763
                </a>
            </div>
            <div>
                Участник с: 15 ноября 2016
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vinc</em><br>Может быть, ТРИМ вообще уже не нужен и контроллеры SSD сами со всем справляются.</blockquote>Файловые системы тоже распознают ssd.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index7664.html?next=/forum/topic/20201/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/20201/?page=1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 08:21:42 GMT -->
</html>
