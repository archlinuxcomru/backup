


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/15887/?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:14:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Gitlab - проблема
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/13/index.html">Сети, Серверы, Защита</a> <span class="divider">/</span></li>
            
        
        
            <li>Gitlab - проблема</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Gitlab - проблема</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index2679.html?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index4658.html?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-170976"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/mafflin/index.html">
                <span class="post-username">mafflin</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/170976/index.html">#</a>
            6 лет, 2 месяца назад
            
                (отредактировано
                
                    6 лет, 2 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/e1/93/e1933a6e1237241e062ecf5b7c40ae3c.png" alt="mafflin avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/mafflin/topics/index.html">
                    0
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/mafflin/posts/index.html">
                    13
                </a>
            </div>
            <div>
                Участник с: 26 ноября 2015
            </div>
            
        </td>
        <td class="post-content">
            Создайте базу gitlabhq_production, если вдруг не создана, дайте над ней привилегии пользователю git.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-171302"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Volldemar/index.html">
                <span class="post-username">Volldemar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/171302/index.html">#</a>
            6 лет, 2 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Volldemar/topics/index.html">
                    96
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Volldemar/posts/index.html">
                    557
                </a>
            </div>
            <div>
                Участник с: 19 октября 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>mafflin</em><br>Создайте базу gitlabhq_production, если вдруг не создана, дайте над ней привилегии пользователю git.</blockquote>Всё это было сделано, причём согласно  вики.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-171310"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Voronov.S.V/index.html">
                <span class="post-username">Voronov.S.V</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/171310/index.html">#</a>
            6 лет, 2 месяца назад
            
                (отредактировано
                
                    6 лет, 2 месяца назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/86/64/8664c739f19e33b5fbda769a69394e1f.png" alt="Voronov.S.V avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/Voronov.S.V/topics/index.html">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Voronov.S.V/posts/index.html">
                    31
                </a>
            </div>
            <div>
                Участник с: 21 июня 2016
            </div>
            
        </td>
        <td class="post-content">
            говорит же не установлен exstention для базы <pre><code>permission denied to create extension &quot;pg_trgm&quot;</code></pre>Тебе нужно<br />1. создать базу<br />2. создать пользователя<br />3. сменить владельца базы на пользователя<br />4. дать alter role to create db,<br />5. дать grant all privileges on database<br />6. затем тебе нужно добавить экстеншен для <strong>созданной базы</strong>. <pre><code>CREATE EXTENSION IF NOT EXISTS &quot;pg_trgm&quot;;</code></pre>Обрати внимание что <strong>нужно добавлять экстеншен именно созданной базе</strong>, потому как по-умолчанию добавляется в template1.<br />А вообще логи внимательнее читай :)<br /><br />А еще советую ставить <a href="https://about.gitlab.com/downloads/">Omnibus</a> и не только я советую. В доке особенно на это сделан упор:<br /><blockquote>Since an installation from source is a lot of work and error prone <strong>we strongly recommend the fast and reliable Omnibus package installation (deb/rpm).</strong> One reason the Omnibus package is more reliable is its use of Runit to restart any of the GitLab processes in case one crashes. On heavily used GitLab instances the <strong>memory usage of the Sidekiq background worker will grow over time.</strong> Omnibus packages solve this by letting the Sidekiq terminate gracefully if it uses too much memory. After this termination Runit will detect Sidekiq is not running and will start it. Since installations <strong>from source don’t have Runit, Sidekiq can’t be terminated and its memory usage will grow over time.</strong></blockquote>Если ставишь под не deb/rpm систему, под тот же арч - есть тут в соседней ветке обсуждение утилиток для конвертации в бинарники арча, либо что еще больше советую разворачивать гитлаб в Docker. Это изи, тебе надо будет выполнить всего одну команду, и поправить пару строчек в docker-compose.yml. Если тебе нужно использовать внешнюю базу данных - это тоже не проблема. В доке все есть, в разделе Database для Omnibus пакетов. Единственное что нужно будет учесть - это опять же создание вручную пользователя и добавление экстеншена.<br />И да, если ты вручную будешь в Omnibus сборке менять базу на внешнюю, то, возможно, тебе пригодится знать следующее (я с этим столкнулся).<br />Для того чтобы поправить конфиг тебе нужно будет интерактивно зайти в контейнер, как-то так:<br /><pre><code>docker-compose run --rm gitlab /bin/bash -l</code></pre>Далее по манулу ты будешь изменять gitlab.rb и после того как внесешь изменения потребуется переконфигурировать гитлаб командой <strong>gitlab-ctl reconfigure</strong>, но столкнешься с тем что пересборка заткнется на моменте <strong>ruby_block[supervise_redis_sleep]</strong>. Для того чтобы пройти переконфигурацию предварительно запусти сервис <pre><code>/opt/gitlab/embedded/bin/runsvdir-start &amp;</code></pre>Как-то так. Может мой опыт будет полезен ;)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-209306"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/binaryshadow/index.html">
                <span class="post-username">binaryshadow</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/209306/index.html">#</a>
            3 года, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/de/3c/de3c388e2f57b6c49e7fe0bf2b2d118d.png" alt="binaryshadow avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/binaryshadow/topics/index.html">
                    16
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/binaryshadow/posts/index.html">
                    453
                </a>
            </div>
            <div>
                Участник с: 30 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            Предлагаю апнуть тему. Сегодня ставил gitlab 11.2.3-1 из Community... часов 6 разбирался какого черта не работает ничего.<br />В итоге я его всё же установил и запустил, но осталась проблема с assets, вылетает ошибка при компиляции и по этому в интерфейсе gitlab нет ни одной css, ну и интерфейс хуже чем в начале 2000.<br />Есть кто готов помочь в решении?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index2679.html?page=1" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index4658.html?page=2">2 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            

            
                <li class="next disabled">
                    <span>
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index2cfa.html?next=/forum/topic/15887/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/15887/?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:14:55 GMT -->
</html>
