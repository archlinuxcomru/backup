


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        dell xps2720 не верное разрешение после обновления ядра
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/12/">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>dell xps2720 не верное разрешение после обновления ядра</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>dell xps2720 не верное разрешение после обновления ядра</h1>
        
            <div class="text-center">
    



</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184413"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/udarnik/">
                <span class="post-username">udarnik</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184413/">#</a>
            5 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/60/17/60177e02a672bf198e73b355bec44b26.png" alt="udarnik avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/udarnik/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/udarnik/posts/">
                    46
                </a>
            </div>
            <div>
                Участник с: 30 ноября 2012
            </div>
            
        </td>
        <td class="post-content">
            <strong>Дано:</strong><br />PC: Dell XPS 2720<br /><pre><code>$ lspci | grep VGA
00:02.0 VGA compatible controller: Intel Corporation Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller (rev 06)
01:00.0 VGA compatible controller: NVIDIA Corporation GK107M [GeForce GT 750M] (rev a1)</code></pre><pre><code># dmidecode -t processor | grep -i version
	Version: Intel(R) Core(TM) i7-4770S CPU @ 3.10GHz</code></pre><pre><code>$ uname -a
Linux dell27 4.4.52-1-lts #1 SMP Sun Feb 26 19:45:38 CET 2017 x86_64 GNU/Linux</code></pre><pre><code># gnome-shell --version
GNOME Shell 3.22.3</code></pre><br />В указанной выше конфигурации все отлично работает, проблем нет.<br /><br /><strong>Проблема:</strong><br />При обновлении на ядро linux-lts-4.9.13-1 при загрузке компьютера на этапе KMS выставляется разрешение FullHD, после загрузки xorg xrandr и конфигурация дисплея gnome отображает FullHD как максимальное доступное разрешение экрана. Попытка выставить разрешение вручную через xrandr ни к чему не приводит (разрешение появляется в списке, но переключение на него не происходит, картинка остается в FullHD).<br />Также система ведет себе на новых не-lts ядрах, точно не выяснял с какого именно началась поломка.<br />Пробовал выгрузить EDID и вручную загружать файл с ним при загрузке, ничего не дало, хотя файл подгружается, судя по dmesg. Ниже расшифровка EDID:<br /><br /><pre><code># parse-edid &lt; /usr/lib/firmware/edid/edid.bin
Checksum Correct

Section &quot;Monitor&quot;
	Identifier &quot;XPS 2720&quot;
	ModelName &quot;XPS 2720&quot;
	VendorName &quot;DEL&quot;
	# Monitor Manufactured week 1 of 2012
	# EDID version 1.3
	# Digital Display
	DisplaySize 600 340
	Gamma 2.20
	Option &quot;DPMS&quot; &quot;true&quot;
	Horizsync 30-90
	VertRefresh 56-76
	# Maximum pixel clock is 90MHz
	#Not giving standard mode: 1280x800, 60Hz
	#Not giving standard mode: 1680x1050, 60Hz
	#Not giving standard mode: 1152x864, 75Hz
	#Not giving standard mode: 1600x1200, 60Hz
	#Not giving standard mode: 1280x1024, 60Hz

	#Extension block found. Parsing...
	Modeline 	&quot;Mode 10&quot; 148.50 1920 2008 2052 2200 1080 1082 1087 1125 +hsync +vsync
	Modeline 	&quot;Mode 0&quot; 241.50 2560 2608 2640 2720 1440 1443 1448 1481 +hsync +vsync
	Modeline 	&quot;Mode 1&quot; 148.500 1920 2008 2052 2200 1080 1084 1089 1125 +hsync +vsync
	Modeline 	&quot;Mode 2&quot; 74.250 1280 1390 1420 1650 720 725 730 750 +hsync +vsync
	Modeline 	&quot;Mode 3&quot; 27.027 720 736 798 858 480 489 495 525 -hsync -vsync
	Modeline 	&quot;Mode 4&quot; 27.027 720 736 798 858 480 489 495 525 -hsync -vsync
	Modeline 	&quot;Mode 5&quot; 25.200 640 656 752 800 480 490 492 525 -hsync -vsync
	Modeline 	&quot;Mode 6&quot; 27.000 720 732 796 864 576 581 586 625 -hsync -vsync
	Modeline 	&quot;Mode 7&quot; 27.000 720 732 796 864 576 581 586 625 -hsync -vsync
	Modeline 	&quot;Mode 8&quot; 74.250 1280 1720 1760 1980 720 725 730 750 +hsync +vsync
	Modeline 	&quot;Mode 9&quot; 148.500 1920 2448 2492 2640 1080 1084 1089 1125 +hsync +vsync
	Modeline 	&quot;Mode 11&quot; 74.25 1920 2008 2052 2200 540 542 547 562 +hsync +vsync
	Modeline 	&quot;Mode 12&quot; 74.25 1280 1390 1430 1650 720 725 730 750 +hsync +vsync
	Modeline 	&quot;Mode 13&quot; 27.00 720 736 798 858 480 489 495 525 -hsync -vsync
	Option &quot;PreferredMode&quot; &quot;Mode 10&quot;
EndSection</code></pre><br />cvt:<br /><pre><code>cvt 2560 1440
# 2560x1440 59.96 Hz (CVT 3.69M9) hsync: 89.52 kHz; pclk: 312.25 MHz
Modeline &quot;2560x1440_60.00&quot;  312.25  2560 2752 3024 3488  1440 1443 1448 1493 -hsync +vsync</code></pre><br /><strong>Вопрос:</strong><br />Что делать, куда копать? :) Надеюсь на помощь сообщества.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184422"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/safocl/">
                <span class="post-username">safocl</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184422/">#</a>
            5 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/safocl/topics/">
                    121
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/safocl/posts/">
                    1570
                </a>
            </div>
            <div>
                Участник с: 08 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            хмм... а в конфиге xorg в секции &quot;monitor&quot; установлены вручную частоты?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184426"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/udarnik/">
                <span class="post-username">udarnik</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184426/">#</a>
            5 лет, 6 месяцев назад
            
                (отредактировано
                
                    5 лет, 6 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/60/17/60177e02a672bf198e73b355bec44b26.png" alt="udarnik avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/udarnik/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/udarnik/posts/">
                    46
                </a>
            </div>
            <div>
                Участник с: 30 ноября 2012
            </div>
            
        </td>
        <td class="post-content">
            Установка в xorg-конфиге секции monitor приводит к незагрузке xorg. Проблема в том, что wayland ведет себя аналогично, пропадает разрешение WQHD. Откат ядра решает проблему. На обычном ядре все ломается при переходе 4.8 -&gt; 4.9.<br />Проблема явно не на уровне xorg<br /><br />вывод xrandr до обновления ядра:<br /><pre><code>% cat ~/problem/n_xrandr.log
Screen 0: minimum 320 x 200, current 2560 x 1440, maximum 8192 x 8192
VGA-1 disconnected (normal left inverted right x axis y axis)
HDMI-1 disconnected (normal left inverted right x axis y axis)
HDMI-2 connected primary 2560x1440+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
   2560x1440     59.95*+
   1920x1080     60.00    60.00    50.00    59.94
   1600x1200     60.00
   1680x1050     59.88
   1280x1024     75.02    60.02
   1920x540      60.05
   1280x800      59.91
   1152x864      75.00
   1280x720      60.00    50.00    59.94
   1024x768      75.08    60.00
   800x600       75.00    60.32
   720x576       50.00
   720x480       60.00    59.94
   640x480       75.00    60.00    59.94
   720x400       70.08
DP-1 disconnected (normal left inverted right x axis y axis)
HDMI-3 disconnected (normal left inverted right x axis y axis)</code></pre><br />после обновления:<br /><pre><code>% xrandr
Screen 0: minimum 320 x 200, current 1920 x 1080, maximum 8192 x 8192
VGA-1 disconnected (normal left inverted right x axis y axis)
HDMI-1 disconnected (normal left inverted right x axis y axis)
HDMI-2 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 597mm x 336mm
   1920x1080     60.00*   60.00    50.00    59.94
   1600x1200     60.00
   1680x1050     59.88
   1280x1024     75.02    60.02
   1920x540      60.05
   1280x800      59.91
   1152x864      75.00
   1280x720      60.00    50.00    59.94
   1024x768      75.03    60.00
   800x600       75.00    60.32
   720x576       50.00
   720x480       60.00    59.94
   640x480       75.00    60.00    59.94
   720x400       70.08
DP-1 disconnected (normal left inverted right x axis y axis)
HDMI-3 disconnected (normal left inverted right x axis y axis)</code></pre><br />Результат попытки выставить правильное разрешение:<br /><pre><code>% xrandr --output HDMI-2 --mode &quot;2560x1440&quot; --verbose
crtc 0:    2560x1440  59.96 +0+0 &quot;HDMI-2&quot;
xrandr: Configure crtc 0 failed
crtc 0: disable
crtc 1: disable
crtc 2: disable
screen 0: revert
crtc 0: revert
crtc 1: revert
crtc 2: revert</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184427"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/safocl/">
                <span class="post-username">safocl</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184427/">#</a>
            5 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/safocl/topics/">
                    121
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/safocl/posts/">
                    1570
                </a>
            </div>
            <div>
                Участник с: 08 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>udarnik</em><br>Установка в xorg-конфиге секции monitor приводит к незагрузке xorg</blockquote>я ваще хател посоветовать убрать енту секцию, ибо написано в вики чо последние версии xorg сами определяют енти параметры<br />просто была да и есть такая весч на ноуте, если xorg по умолчанию законфигурен нвидиавской тулзой, то там не определяются нормальные частоты, поднятие верхней частоты строчной развертки решает проблему...
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184428"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/udarnik/">
                <span class="post-username">udarnik</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184428/">#</a>
            5 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/60/17/60177e02a672bf198e73b355bec44b26.png" alt="udarnik avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/udarnik/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/udarnik/posts/">
                    46
                </a>
            </div>
            <div>
                Участник с: 30 ноября 2012
            </div>
            
        </td>
        <td class="post-content">
            Помог совет с LOR:<br /><blockquote>Числа для «ручных» режимов ЖК мониторов лучше вычислять с помощью программки cvt с параметром -r</blockquote><br />вычисленное с параметром -r значение:<br /><pre><code>% cvt -r 2560 1440
# 2560x1440 59.95 Hz (CVT 3.69M9-R) hsync: 88.79 kHz; pclk: 241.50 MHz
Modeline &quot;2560x1440R&quot;  241.50  2560 2608 2640 2720  1440 1443 1448 1481 +hsync -vsync</code></pre>было съедено xrandr на вход, разрешение выставилось.<br /><br />Теперь думаю, как это автоматизировать для wayland и xorg при загрузке
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-184429"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/safocl/">
                <span class="post-username">safocl</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/184429/">#</a>
            5 лет, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/safocl/topics/">
                    121
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/safocl/posts/">
                    1570
                </a>
            </div>
            <div>
                Участник с: 08 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            <pre><code>HorizSync       30.0 - 83.0</code></pre> у меня вот так на компе, если ставить ниже высшее значение, то убираются бОльшие разрешения
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    



</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/17238/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747b22616d327b5b',m:'YHgox0Mc__2dTh7lg8W286PX2fTmTD4VK9MXQdDRXUQ-1662676286-0-ATUG5ylEq+Q/cGziWs/TzMXp9Zz3CmhWzC/PvrfS28no1+edodv3B26qE43MdIMTK0rcLz4lqujyy8Uhu4yE8IFANxTbcjCo8Y9Kc4ccUsKxc5UmFyQGg3ebQhXGKIrE8YyxBSxw6rZg8k/pe4qU82M=',s:[0x8002ec4a58,0x8c3ee18900],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
