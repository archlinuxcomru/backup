


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/16891/?page=4 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:09:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        sway - что? где? по чём?
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/4/index.html">Рабочие Среды / Менеджеры Окон</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/18/index.html">Другие WM/DE</a> <span class="divider">/</span></li>
            
        
        
            <li>sway - что? где? по чём?</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>sway - что? где? по чём?</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index9ba9.html?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexfdb0.html?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="indexa7f1.html?page=14">14</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index5760.html?page=15">15</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexaf4d.html?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-221702"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/221702/index.html">#</a>
            2 года, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            Было бы интересно узнать как работает sway по сравнению с иксами у счастливых обладателей видеокарт AMD.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228270"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228270/index.html">#</a>
            2 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>redix</em><br>А ну марш на вайланд. )))</blockquote>После известных событий и, возвращаясь к вопросу: &quot;Есть ли жизнь на Марсе?&quot;, вновь щупаю сабж. Из плюсов:<br /><strong>стал ощутимо меньше грузить процессор;<br />нативно работает firefox.</strong><br />В двух словах: ощущения куда приятнее, чем в прошлый раз.<br /><br />Нюансы, конечно, тоже есть. Первое, что бросилось в глаза - не подхватываются настройки gtk3 из ~/.config/gtk-3.0/settings.ini: ни темы, ни шрифты... ничего. Причины и некоторые решения указаны <a href="https://github.com/swaywm/sway/wiki/GTK-3-settings-on-Wayland">тут</a>.<br />Короче, gtk3 берет настройки из gsettings (dconf), а не из конфигурационных файлов. Больше всего меня интересует шрифт, а там по дефолту вот что:<br /><pre><code>$ gsettings get org.gnome.desktop.interface font-name
&#39;Cantarell 11&#39;</code></pre>Меняем:<br /><pre><code>$ gsettings set org.gnome.desktop.interface font-name &quot;Verdana 12&quot;
$ gsettings get org.gnome.desktop.interface font-name
&#39;Verdana 12&#39;</code></pre>Шрифт с размером поменялся, но с фонтконфигом такой вариант не прокатывает - отсутствует необходимая схема.<br />В гноме сим безобразием занимается gnome-settings-daemon. Устанавливать этот пакет я не стал, но вытянул и скомпилировал из него схемы, задал переменную окружения и вуаля - шрифты на месте! Проще говоря, так:<br /><pre><code>$ cd /tmp
$ curl -O <a href="https://ind.mirror.pkgbuild.com/extra/os/x86_64/gnome-settings-daemon-3.36.0-1-x86_64.pkg.tar.zst">https://ind.mirror.pkgbuild.com/extra/os/x86_64/gnome-settings-daemon-3.36.0-1-x86_64.pkg.tar.zst</a>
$ mkdir gsd
$ tar -I zstd -C gsd/ -xvf gnome-settings-daemon-3.36.0-1-x86_64.pkg.tar.zst
$ mkdir ~/.config/gsettings/
$ glib-compile-schemas --strict gsd/usr/share/glib-2.0/schemas/ --targetdir=~/.config/gsettings/</code></pre><pre><code>~/.bash_profile
-----
export GSETTINGS_SCHEMA_DIR=$HOME/.config/gsettings/</code></pre><pre><code>$ source ~/.bash_profile
$ gsettings get org.gnome.settings-daemon.plugins.xsettings hinting
&#39;slight&#39;</code></pre>PROFIT!<br />Разумеется, глобально для пользователя изменения вступят в силу после следующего входа в окружение.<br /><br />ЗЫ. Всякое-разное буду выкладывать по мере прохождения квеста. )
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228280"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228280/index.html">#</a>
            2 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            Гы, из опциональных зависимостей:<br /><em>alacritty: Terminal emulator used by the default config</em>. <a href="https://www.slant.co/topics/5372/~wayland-terminal-emulators#4">Но</a>: <em>It uses xclip for copy paste on linux, makes it useless on wayland.</em><br /><br /><em>dmenu: Application launcher</em> - без xwayland не запустится.<br /><br /><em>mako: Lightweight notification daemon</em>. Тут как бы порядок.<br /><br />В общем терминал - таки <strong>termite</strong>.<br /><br />Вместо <strong>dmenu</strong> - <a href="https://www.archlinux.org/packages/community/x86_64/bemenu/">bemenu</a>:<br /><pre><code># start your launcher ($mod+d)
bindcode $mod+40 exec bemenu-run --tb=#153b58 --tf=#d0d0d0 --hb=#153b58 --hf=#d0d0d0 --fn &quot;Dejavu Sans Mono 10&quot; -p &quot;&gt;&quot;</code></pre>Нюанс: не работают кнопки Home, End, но работают PageUp PageDown.<br /><br /><strong>mako</strong>. Ну кто так строит... (с) Нет дефолтного конфига, т.е. только конструкция &quot;сделай сам&quot; по мотивам man &#39;mako(5)&#39;. Кроме того, notify-send предусматривает три уровня ургентности: <strong>low</strong>, <strong>normal</strong>, <strong>critical</strong>, а mako принимает <strong>low</strong>, <strong>normal</strong> и <strong>high</strong>. Где совместимость?<br />Зато, в отличии от dunst, есть возможность перезагрузить конфиг:<br /><pre><code>$ makoctl reload</code></pre>В общем такая простейшая конфигурация вышла:<br /><pre><code>~/.config/mako/config
-----
font=Dejavu Sans 12
height=300

[urgency=normal]
background-color=#153b58
text-color=#ffffff
default-timeout=7000

# &#39;critical&#39; -&gt; &#39;low&#39;
[urgency=low]
background-color=#900000
text-color=#ffffff
border-color=#c00000
default-timeout=0</code></pre>high (цвета, реакция) заменил на low. Все равно уведомления отсылаю через скрипт-посредник (звук и пр.), там и сделал подмену уровня.<br /><br />Впрочем непосредственно sway это не касается... :-/
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228282"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vs220/index.html">
                <span class="post-username">vs220</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228282/index.html">#</a>
            2 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vs220/topics/index.html">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vs220/posts/index.html">
                    8070
                </a>
            </div>
            <div>
                Участник с: 16 августа 2009
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Aivar</em><br>dconf</blockquote>&quot;Не верной дорогой идёте Товарищи&quot;<br />Долгой жизни иксам:)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228289"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/red/index.html">
                <span class="post-username">red</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228289/index.html">#</a>
            2 года, 5 месяцев назад
            
                (отредактировано
                
                    2 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/fd/eb/fdeb672af87b7c02419e9c58404908a5.png" alt="red avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/red/topics/index.html">
                    30
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/red/posts/index.html">
                    1517
                </a>
            </div>
            <div>
                Участник с: 31 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Aivar</em><br>alacritty: Terminal emulator used by the default config. Но: It uses xclip for copy paste on linux, makes it useless on wayland.</blockquote>комментарий довольно древний(Last updated January 21st, 2019), больше года назад, с тех пор много воды утекло<br />у них там щас <em>своя</em> библиотека <a href="https://github.com/alacritty/copypasta">copypasta</a> для этого есть которая поддерживает и иксы и выйланд<br /><br /><blockquote><em>Aivar</em><br>Вместо dmenu - bemenu:</blockquote>тоже разные перепробовал, но в конечном итоге остановился на <a href="https://github.com/Biont/sway-launcher-desktop">sway-launcher-desktop</a>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228291"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/red/index.html">
                <span class="post-username">red</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228291/index.html">#</a>
            2 года, 5 месяцев назад
            
                (отредактировано
                
                    2 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/fd/eb/fdeb672af87b7c02419e9c58404908a5.png" alt="red avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/red/topics/index.html">
                    30
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/red/posts/index.html">
                    1517
                </a>
            </div>
            <div>
                Участник с: 31 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            добавлю, мож кому пригодится<br />информацию по конкретным(наводим мышкой) окнам удобно смотреть командой:<br /><pre><code>swaymsg -t subscribe &quot;[&#39;window&#39;]&quot;</code></pre>мониторинг<br /><pre><code>swaymsg -t subscribe &quot;[&#39;window&#39;]&quot; -m</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228303"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228303/index.html">#</a>
            2 года, 5 месяцев назад
            
                (отредактировано
                
                    2 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vs220</em><br>Долгой жизни иксам:)</blockquote><strike>Иксы маст дай.</strike> Иксы еще переживут всех своих хоронильщиков... )<br /><br /><blockquote><em>red</em><br>в конечном итоге остановился на sway-launcher-desktop</blockquote>Мне нужен не просто лаунчер. У меня в i3 на dmenu многое завязано. Адаптировал под bemenu - разницы практически никакой. Бурное одобрям. (с)<br /><br /><blockquote><em>red</em><br><pre><code>swaymsg -t subscribe &quot;[&#39;window&#39;]&quot; -m</code></pre></blockquote>Конечно пригодится. Почти аналог xprop. )
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228309"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228309/index.html">#</a>
            2 года, 5 месяцев назад
            
                (отредактировано
                
                    2 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            Если встает вопрос по индикатору раскладки, можно пойти по принципу:<br /><pre><code>$ swaymsg -rt get_inputs | jq -r &#39;.[5].xkb_active_layout_name&#39;
Russian</code></pre>(индекс подставить свой). Однако JSON-processor, аки jq, в цикле несколько напрягает CPU, поэтому помимо правил упростил и накидал на коленке:<br /><pre><code>~/.config/sway/layout.sh
-----
#!/usr/bin/bash

i3status -c ~/.config/sway/i3status.conf | (read line &amp;&amp; echo &quot;$line&quot; &amp;&amp; read line &amp;&amp; echo &quot;$line&quot; &amp;&amp; read line &amp;&amp; echo &quot;$line&quot; &amp;&amp; while :
do
read line
echo &quot;,[{\&quot;full_text\&quot;:\&quot;`swaymsg -t get_inputs | grep -m1 active_layout_name | cut -c 33,34`\&quot;,\&quot;color\&quot;:\&quot;#e3e300\&quot;,\&quot;min_width\&quot;:22,\&quot;separator_block_width\&quot;:20},${line#,\[}&quot; || exit 1
done)</code></pre><pre><code>~/.config/sway/config
-----
bar {
...
status_command ~/.config/sway/layout.sh
...
}</code></pre>Выглядит так:<br /><a href="http://lostpic.net/image/3GwL"><img src="https://img10.lostpic.net/2020/03/25/66cb717edfa5811e532d1567291a03c4.th.png"></a><br />---<br />Есть два пакета:<br /><pre><code>aur/sway-keyboard-layout 1.0.0-2 (0) (0,00)
    Show keyboard layout in the status bar.
aur/swaylay-git r8.df1fff2-1 (0) (0,00)
    Keyboard layouts monitoring utility for Sway WM</code></pre>но что за звери не пробовал.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228310"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/red/index.html">
                <span class="post-username">red</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228310/index.html">#</a>
            2 года, 5 месяцев назад
            
                (отредактировано
                
                    2 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/fd/eb/fdeb672af87b7c02419e9c58404908a5.png" alt="red avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/red/topics/index.html">
                    30
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/red/posts/index.html">
                    1517
                </a>
            </div>
            <div>
                Участник с: 31 августа 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Aivar</em><br>Если встает вопрос по индикатору раскладки, можно пойти по принципу:<br /><pre><code>$ swaymsg -rt get_inputs | jq -r &#39;.[5].xkb_active_layout_name&#39;
Russian</code></pre>(индекс подставить свой).</blockquote>наверное лучше для этого будет использовать тот же идентификатор(подставляем свой), например:<br /><pre><code>$ swaymsg -rt get_inputs | jq -rc --unbuffered &#39;.[] | select(.identifier == &quot;5215:628:SIGMACHIP_Trust_Keyboard&quot;) | .xkb_active_layout_name&#39;
Russian</code></pre>мониторинг:<br /><pre><code>$ swaymsg -mrt subscribe &#39;[&quot;input&quot;]&#39; | jq -rc --unbuffered &#39;select(.change == &quot;xkb_layout&quot;) | .input | select(.identifier == &quot;5215:628:SIGMACHIP_Trust_Keyboard&quot;) | .xkb_active_layout_name&#39;</code></pre><br />сами идентификаторы можно посмотреть командой:<br /><pre><code>$ swaymsg -rt get_inputs | jq -rc &#39;.[] | select(.type == &quot;keyboard&quot;) | .identifier&#39; | awk &#39;!/Control$/&#39;</code></pre>из которых выбрать нужный<br />также id можно легко найти с помощью мониторинга:<br /><pre><code>$ swaymsg -mrt subscribe &#39;[&quot;input&quot;]&#39; | jq -rc  --unbuffered &#39;select(.change == &quot;added&quot;) | .input | select(.type == &quot;keyboard&quot;) | .identifier&#39; | awk &#39;!/Control$/&#39;</code></pre>после чего переподключить клавиатуру<br /><br />теперь вместо, общего указания * или keyboard, пример:<br /><pre><code>input type:keyboard {
    xkb_layout &quot;us,ru&quot;
    xkb_options &quot;grp:caps_toggle&quot;
}</code></pre><br />указываем конкретную привязку:<br /><pre><code>input &quot;5215:628:SIGMACHIP_Trust_Keyboard&quot; {
    xkb_layout &quot;us,ru&quot;
    xkb_options &quot;grp:caps_toggle&quot;
}</code></pre><br />также идентификаторы позволяют при желании легко повесить разные языки на разные физические клавы , например:<br /><pre><code>input &quot;5215:628:SIGMACHIP_Trust_Keyboard&quot; xkb_layout &quot;ru&quot;
input &quot;1:1:AT_Translated_Set_2_keyboard&quot;  xkb_layout &quot;us&quot;</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-228348"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/228348/index.html">#</a>
            2 года, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>red</em><br>мониторинг:</blockquote>Таки да, за это персональное спасибо! Обработка изменений - куда более цивилизованый путь, чем постоянный парсинг.<br />Теперь так:<br /><pre><code>~/.config/sway/layout.sh
-----
#!/usr/bin/bash

func () {
while :; do
read
echo &quot;$REPLY&quot; &gt; /tmp/.swaylay.i3stat
killall i3status -SIGUSR1
done
}

echo En &gt; /tmp/.swaylay.i3stat
swaymsg -mrt subscribe &#39;[&quot;input&quot;]&#39; | jq -rc --unbuffered &#39;select(.change == &quot;xkb_layout&quot;) | .input | select(.identifier == &quot;1112:13137:Genius_SlimStar_335&quot;) | .xkb_active_layout_name&#39; | func</code></pre><pre><code>~/.config/sway/i3status.conf
-----
order += &quot;read_file layout&quot;
---
read_file layout {
path = &quot;/tmp/.swaylay.i3stat&quot;
max_characters = 2
format = &quot;%content&quot;
format_bad = &quot;&quot;
color_good = &quot;#e3e300&quot;
min_width = 22
separator_block_width = 20
}</code></pre><pre><code>~/.config/sway/config
-----
exec --no-startup-id ~/.config/sway/layout.sh
---
bar {
---
status_command i3status -c ~/.config/sway/i3status.conf
---
}</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="index9ba9.html?page=3" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="indexfdb0.html?page=4">4 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="indexa7f1.html?page=14">14</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index5760.html?page=15">15</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexaf4d.html?page=5" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index651b.html?next=/forum/topic/16891/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/16891/?page=4 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:09:35 GMT -->
</html>
