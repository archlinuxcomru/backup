


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/20329/?page=1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Conky Intel i7 и AMD
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/2/index.html">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/12/index.html">Ядро и Железо</a> <span class="divider">/</span></li>
            
        
        
            <li>Conky Intel i7 и AMD</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Conky Intel i7 и AMD</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237086"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/undemeon/index.html">
                <span class="post-username">undemeon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237086/index.html">#</a>
            1 год, 9 месяцев назад
            
                (отредактировано
                
                    1 год, 9 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/13/0f/130f506ac5a984d5f5cf5b5d7f137886.png" alt="undemeon avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/undemeon/topics/index.html">
                    21
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/undemeon/posts/index.html">
                    231
                </a>
            </div>
            <div>
                Участник с: 24 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            В общем вот что было, в свой Dell precision m4600 заказал из Китая карту AMD FierPro m5100, а приехало нечто под названием AMD Venus XT [Radeon HD 8870M / R9 M270X/M370X] при этом, ни в одном мануале из существующих, о поддержке данного зверя даже не упоминается, даже на форумах энтузиастов итд. В общем магическим способом штука завелась и внезапно работает с драйвером  xf86-video-amdgpu, после пары выкрутасов конечно, однако, встройка на процессоре Intel Core i7-2820QM выключилась вообще (я вычитал в спецификациях, что в данных лаптопах так происходит если от красных карту воткнуть, и это нормально) но вот незадача, коньки перестали показывать температуру проца, t° процессора: ${hwmon 2 temp 1}°C как я понимаю данный датчик то же обрубило ну и как вывести температуру видюхи я то же без понятия в коньках, приложение xsensors все показывает верно, а вот с коньками ересь вылазит, может подсказать кто как температуру проца и гпу вывести? уже все перепробовал что попадалось. acpi естественно выводит 25 градусов.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237089"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/indeviral/index.html">
                <span class="post-username">indeviral</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237089/index.html">#</a>
            1 год, 9 месяцев назад
            
                (отредактировано
                
                    1 год, 9 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/indeviral/topics/index.html">
                    38
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/indeviral/posts/index.html">
                    3165
                </a>
            </div>
            <div>
                Участник с: 10 августа 2013
            </div>
            
        </td>
        <td class="post-content">
            <pre><code>$ sensor | grep</code></pre><pre><code>$ cat /sys/class/thermal/thermal_zone*/temp</code></pre>...
            
                
                    <div class="post-signature">
                        Ошибки в тексте-неповторимый стиль автора©
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237091"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237091/index.html">#</a>
            1 год, 9 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>undemeon</em><br>температуру проца</blockquote>если cpu Intel, то можно считать напрямую из регистра msr ... как то уже описывал
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237150"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/MamkinHaker/index.html">
                <span class="post-username">MamkinHaker</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237150/index.html">#</a>
            1 год, 9 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/MamkinHaker/topics/index.html">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/MamkinHaker/posts/index.html">
                    65
                </a>
            </div>
            <div>
                Участник с: 24 июня 2020
            </div>
            
        </td>
        <td class="post-content">
            Вот мой конфиг с амд видюхой<br /><pre><code>conky.config = {
	alignment = &#39;top_left&#39;,
	background = true,
	border_width = 1,
	cpu_avg_samples = 2,
	default_color = &#39;white&#39;,
	default_outline_color = &#39;white&#39;,
	default_shade_color = &#39;white&#39;,
	draw_borders = false,
	draw_graph_borders = true,
	draw_outline = false,
	draw_shades = false,
	use_xft = true,
	font = &#39;DejaVu Sans:size=8&#39;,
	override_utf8_locale = true,
	gap_x = 1800,
	gap_y = 5,
	minimum_width = 5,
	minimum_height = 5,
	net_avg_samples = 2,
	no_buffers = true,
	out_to_console = false,
	out_to_stderr = false,
	extra_newline = false,
	stippled_borders = 0,
	update_interval = 1.0,
	uppercase = false,
	use_spacer = &#39;none&#39;,
	show_graph_scale = false,
	show_graph_range = false,
	own_window = true,
	own_window_class = &#39;Conky&#39;,
	own_window_type = &#39;normal&#39;,
	own_window_hints =&#39;undecorated,below,sticky,skip_taskbar,skip_pager&#39;,
	own_window_transparent = true,
	own_window_argb_value = 0,
	own_window_argb_visual = true,

	};
	conky.text = [[

	# Используемые цвета
# Жёлтый  #ffff00
# Оранжевый  #d76e00
# Зелёный  #00E600
# Синий  #0000ff
# Голубой  #0ABFFF
# Фиолетовый  #ce3fd9

	# Процессор
${color #ce3fd9}AMD Ryzen™5 2600 $alignr${color #ff0000}${hwmon temp 1}°C
${color #ffff00}${cpu cpu1}%  ${goto 30}${color #d76e00}${cpubar cpu1 7}
${color #ffff00}${cpu cpu2}%  ${goto 30}${color #d76e00}${cpubar cpu2 7}

${color #ffff00}${cpu cpu3}%  ${goto 30}${color #d76e00}${cpubar cpu3 7}
${color #ffff00}${cpu cpu4}%  ${goto 30}${color #d76e00}${cpubar cpu4 7}

${color #ffff00}${cpu cpu5}%  ${goto 30}${color #d76e00}${cpubar cpu5 7}
${color #ffff00}${cpu cpu6}%  ${goto 30}${color #d76e00}${cpubar cpu6 7}

${color #ffff00}${cpu cpu7}%  ${goto 30}${color #d76e00}${cpubar cpu7 7}
${color #ffff00}${cpu cpu8}%  ${goto 30}${color #d76e00}${cpubar cpu8 7}

${color #ffff00}${cpu cpu9}%  ${goto 30}${color #d76e00}${cpubar cpu9 7}
${color #ffff00}${cpu cpu10}%  ${goto 30}${color #d76e00}${cpubar cpu10 7}

${color #ffff00}${cpu cpu11}%  ${goto 30}${color #d76e00}${cpubar cpu11 7}
${color #ffff00}${cpu cpu12}%  ${goto 30}${color #d76e00}${cpubar cpu12 7}
${color #0000ff}${hr 1}

#ОПЕРАТИВНАЯ ПАМЯТЬ
${color #0000ff}${hr 1}
${color #ce3fd9}AMD Radeon R7 Performance
${color #0ABFFF}$mem${alignr}$memmax
${color #00E600}${memperc}%  ${goto 30}${membar 7}
${color #0000ff}${hr 1}

#ИНТЕРНЕТ
${color #0000ff}${hr 1}
${color #ce3fd9}Realtek Gigabit LAN
${color #ffcc00}${upspeed enp8s0}${goto 80}${color #333333} up ${alignr}${color #00E600}${totalup enp8s0}
${color #ffcc00}${downspeed enp8s0}${goto 75}${color #333333} down ${alignr}${color #00E600}${totaldown enp8s0}
${color #0000ff}${hr 1}

#ДИСКИ
${color #0000ff}${hr 1}
${color #ce3fd9}Диск:$alignr${color #ff0000}${execi 30 hddtemp /dev/sda | awk &#39;{print $4}&#39;}
${color #FFA300}/ $alignr${fs_used /} / ${fs_size /}
${color #0ABFFF}${fs_bar 7 /}
${color #FFA300}/home $alignr${fs_used /home} / ${fs_size /home}
${color #0ABFFF}${fs_bar 7 /home}
${color #0000ff}${hr 1}

#ВИДЕОКАРТА AMD
${color #0000ff}${hr 1}
${color #ce3fd9}AMD RX 570 $alignr${color #ff0000}${execi 1 sensors amdgpu-pci-0900 | grep &#39;edge&#39; | cut -c 16-22}

${color #0ABFFF}Нагрузка:${color #ffff00}${execi 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;gpu [0-9]\{1,3\}&quot; | cut -c 5-7 }%
${color #00E600}${execigraph 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;gpu [0-9]\{1,3\}&quot; | cut -c 5-7&quot;  20,180 fc8c3b c6396b -t}
${color #0ABFFF}Видеопамять:${color #ffff00}${execi 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;vram [0-9]\{1,3\}&quot; | cut -c 5-7 }%
${color #00E600}${execigraph 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;vram [0-9]\{1,3\}&quot; | cut -c 5-7&quot;  20,180 fc8c3b c6396b -t}

${color #ffff00}GPU Spd: $alignr${color #0ABFFF}${execi 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;sclk .............&quot; | cut -c 12-16 }ГГц
${color #ffff00}VRAM Spd: $alignr${color #0ABFFF}${execi 1 &quot;radeontop -b 09 -d- -l1 | grep -o &quot;mclk ..............&quot; | cut -c 13-17 }ГГц
${color #ffff00}Вентилятор: $alignr${color #00E600}${execi 1 sensors amdgpu-pci-0900 | grep &#39;fan1&#39; | cut -c 14-21}

${color #ffff00}Потребление: $alignr${color #ce3fd9}${execi 1 sensors amdgpu-pci-0900 | grep &quot;power1&quot; | cut -b 14-19} Вт
$alignr${color #ce3fd9}${execi 1 sensors amdgpu-pci-0900 | grep &quot;power1&quot; | cut -b 31-35} Вт
${color #0000ff}${hr 1}

]]</code></pre>А тут подробней  <a href="../../post/236555/index.html">https://archlinux.org.ru/forum/post/236555/</a>
            
                
                    <div class="post-signature">
                        AMD Ryzen™5 2600, AMD RX570, AMD Radeon R7Perfomance
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237152"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/undemeon/index.html">
                <span class="post-username">undemeon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237152/index.html">#</a>
            1 год, 9 месяцев назад
            
                (отредактировано
                
                    1 год, 9 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/13/0f/130f506ac5a984d5f5cf5b5d7f137886.png" alt="undemeon avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/undemeon/topics/index.html">
                    21
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/undemeon/posts/index.html">
                    231
                </a>
            </div>
            <div>
                Участник с: 24 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            после установки radeontop все температуры вообще уходят за 70 градусов по показаниям, короче бред выводить везде начинает<br /><pre><code>t° процессора: ${hwmon 1 temp 1}°C
t° видео карты: $alignr${color #55ffff}${execi 1 sensors amdgpu-pci-0100 | grep &#39;edge&#39; | cut -c 16-22}</code></pre>это показывает одно и то же но с температурами железок то же не совпадает, по крайней мере по xsensors и mangohud, которые кстати после установки radeontop  то же свихнулись, и начали что то адекватное показывать после удаления оной, в общем я в замешательстве.<br />,
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237153"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/undemeon/index.html">
                <span class="post-username">undemeon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237153/index.html">#</a>
            1 год, 9 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/13/0f/130f506ac5a984d5f5cf5b5d7f137886.png" alt="undemeon avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/undemeon/topics/index.html">
                    21
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/undemeon/posts/index.html">
                    231
                </a>
            </div>
            <div>
                Участник с: 24 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            <pre><code>$ sensors
dell_smm-virtual-0
Adapter: Virtual device
Processor Fan:    0 RPM
Video Fan:        0 RPM
CPU:            +58.0 C
Ambient:        +46.0 C
SODIMM:         +44.0 C
SODIMM:         +45.0 C
SODIMM:         +42.0 C
GPU:                N/A

acpitz-acpi-0
Adapter: ACPI interface
temp1:        +25.0 C  (crit = +107.0 C)

coretemp-isa-0000
Adapter: ISA adapter
Package id 0:  +61.0 C  (high = +86.0 C, crit = +100.0 C)
Core 0:        +56.0 C  (high = +86.0 C, crit = +100.0 C)
Core 1:        +60.0 C  (high = +86.0 C, crit = +100.0 C)
Core 2:        +61.0 C  (high = +86.0 C, crit = +100.0 C)
Core 3:        +60.0 C  (high = +86.0 C, crit = +100.0 C)

BAT0-acpi-0
Adapter: ACPI interface
in0:          12.20 V
curr1:       1000.00 uA

amdgpu-pci-0100
Adapter: PCI adapter
edge:         +60.0 C  (crit = +120.0 C, hyst = +90.0 C)</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237166"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237166/index.html">#</a>
            1 год, 9 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>undemeon</strong>, просьба, если будет свободное время, сними показания температуры cpu из регистров … никогда с intel i7 дела не имел, просто интересно, подходит ли эта метода и в данном случае или там устроено по-другому (другие регистры)<br />- установить пакет <strong>msr-tools</strong> (объем маленький)<br />- загрузить модуль msr --- <strong>sudo modprobe msr</strong><br />- считать значение Tj max (максимальное значение)--- <strong>sudo rdmsr 0x1A2 -f 23:16</strong><br />- считать значение Digital Readout (мгновенное значение) --- <strong>sudo rdmsr 0x19C -f 22:16</strong><br />- считать значение Pkg Digital Readout (усредненное значение) --- <strong>sudo rdmsr 0x1B1 -f 22:16</strong>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237242"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/MamkinHaker/index.html">
                <span class="post-username">MamkinHaker</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237242/index.html">#</a>
            1 год, 9 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/MamkinHaker/topics/index.html">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/MamkinHaker/posts/index.html">
                    65
                </a>
            </div>
            <div>
                Участник с: 24 июня 2020
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>undemeon</em><br>но с температурами железок то же не совпадает</blockquote>может обновить датчики нада <strong>#</strong>sensors-detect
            
                
                    <div class="post-signature">
                        AMD Ryzen™5 2600, AMD RX570, AMD Radeon R7Perfomance
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237244"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/undemeon/index.html">
                <span class="post-username">undemeon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237244/index.html">#</a>
            1 год, 9 месяцев назад
            
                (отредактировано
                
                    1 год, 9 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/13/0f/130f506ac5a984d5f5cf5b5d7f137886.png" alt="undemeon avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/undemeon/topics/index.html">
                    21
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/undemeon/posts/index.html">
                    231
                </a>
            </div>
            <div>
                Участник с: 24 октября 2015
            </div>
            
        </td>
        <td class="post-content">
            <blockquote>vasek</blockquote><pre><code>
sudo rdmsr 0x1A2 -f 23:16
64
sudo rdmsr 0x19C -f 22:16
39
sudo rdmsr 0x1B1 -f 22:16
30
</code></pre><blockquote>MamkinHaker</blockquote>Первым делом обновил, дело в том что тут не стандартная ситуация, даже биос карточку отображает как неизвестную, и не определяет корректно , некоторые утилиты показывают правильно, а некоторые ересь показывают, вот и спросил как через коньки вывести, все таки данное железо до меня еще никто не скрещивал, а если и скрещивал, то не задокументировал :) Да и много ли вообще лаптопов с дискретной амд? Вот и чешу репу, не понимая толком за что хвататься.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-237248"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/vasek/index.html">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/237248/index.html">#</a>
            1 год, 9 месяцев назад
            
                (отредактировано
                
                    1 год, 9 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/vasek/topics/index.html">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/vasek/posts/index.html">
                    11320
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>undemeon</strong>, спасибо за представленную информацию. Опишу более подробно обработку полученной информации<br /><blockquote><em>undemeon</em><br>sudo rdmsr 0x1A2 -f 23:16<br />64<br />sudo rdmsr 0x19C -f 22:16<br />39<br />sudo rdmsr 0x1B1 -f 22:16<br />30</blockquote>Приведем сначала полученные значения к нормальному виду<br />1. Значения регистров приведены в 16-ричной системе, а значит переведем в 10-ую систему, например, используя команду  <strong>echo $((0xN))</strong><br />echo $((0x64)) = 100<br />echo $((0x39)) =   57<br />echo $((0x30)) =   48<br />Основная цифра это <strong>Tj max</strong>, ее значение постоянно и должно совпадать со значением, указанным в спецификации для данного cpu. В твоем случае <strong>Tj max = 100 град.С</strong> и для Intel i7, насколько помню, согласно спецификации Tj max = 100, так что это большой плюс к тому, что все нормально.<br />2. Фактические значения температуры cpu определяются как <u>разница между значением  Tj max и значением, считанным из регистра</u><br />- мгновенная температура Тмгн = 100 - 57 = <strong>43 град. С</strong><br />- усредненная температура Тср  =  100 - 48 = <strong>52 град. С</strong><br />На отличие не обращай внимание - <strike>во первых, в расчетах всех прог используется мгновенная температура</strike> НЕ УВЕРЕН ..., а во 2-ых неизвестно что у тебя там было запущено и какая разница во времени между этими считанными значениями. Для проверки лучше делать в спокойной ситуации, когда ничего особо не запущено.<br />В качестве примера привожу мой вывод значений температуры, выводимой системой и температуры, высчитанной из регистров, каждые 2 секунды<br />(1-ое значение (sys) - система, 2-ое значение (reg_m) - мгновенное значение, 3-е значение (reg_S) - усредненное значение)<br /><strong>~/TTT/TEST/bash/cpu_t.sh</strong><br /><pre><code>sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 51 ... reg_m - 49 ... reg_s - 47
sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 53 ... reg_m - 47 ... reg_s - 49
sys - 52 ... reg_m - 48 ... reg_s - 47
sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 52 ... reg_m - 47 ... reg_s - 47
sys - 53 ... reg_m - 47 ... reg_s - 48</code></pre>На всякий случай привожу и содержание скрипта … для использования в нем нужно изменить для своего случая значение <strong>Tmax=85</strong>  (у меня Tj max = 85 град С) ну и можно закомментироать строки, относящиеся к температуре, выводимой системой или вместо этого прописать свой вывод)<br /><pre><code>#!/bin/bash
#
Tmax=85
while true ; do
Tsys=$(awk &#39;{ print $1/1000 }&#39; /sys/class/thermal/thermal_zone6/temp)
Treg_m16=$(sudo rdmsr 0x19C -f 22:16)
Treg_m10=$(echo $((0x$Treg_m16)))
Treg_s16=$(sudo rdmsr 0x19C -f 22:16)
Treg_s10=$(echo $((0x$Treg_s16)))
let Treg_m=$Tmax-$Treg_m10
let Treg_s=$Tmax-$Treg_s10
echo &quot;sys - $Tsys ... reg_m - $Treg_m ... reg_s - $Treg_s&quot;
sleep 2
done
#
exit 0
</code></pre>В принципе способ расчета температуры, используя регистры, самый точный. Все проги/утилиты по идее делают тоже самое, но, имхо, не возможно в одной проге учесть все нюансы разных cpu, всеравно есть какие то различия … а потому и возникают недоверия к показаниям этих прог.<br /><br /><strong>PS</strong> - Ну и можно запомнить разницу показаний температуры выводимой системой и непосредственно считанной из регистров ... и учитывать эту разницу. А если напрямую использовать чтение из регистров, то чтобы не вводить пароль для использования <strong>rdmsr</strong>, удобнее внести изменения в файл sudoers.<br /><br /><strong>EDIT 1</strong> - в части утилит для вывода температуры - они постепенно меняются/обновляются и показываемые ими значения температуры тоже меняются, хотя сам cpu не меняются (думаю и термодиоды тоже особо не стареют), это я к тому, что в данном топике разница между температурами системной и фактической (из регистров) составляет около 5 град, а вот почти 2 года назад эта разница в спокойном режиме составляла около 1-2 градусов <a href="../18977/index9ba9.html?page=3#post-212587">см. топик</a><br />Там разница иногда доходит и до 5 град, но это была запущена утилита stress (нагружал процессор) и это только говорит о том, что утилита вывода температуры показывает завышено в процессе быстрой нагрузки, но вот в покое, там разница была около 1 град.<br /><br /><strong>EDIT 2</strong> - посмотрел <a href="https://ark.intel.com/content/www/ru/ru/ark/products/52227/intel-core-i7-2820qm-processor-8m-cache-up-to-3-40-ghz.html">спецификацию</a> на Intel® Core™ i7-2820QM и да, действительно <strong>Tjunction = 100 C</strong> ... так что все верно ... что смутило. так это рекомендуемая цена - <strong>$570.00</strong> что то уж очень много
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index9011.html?next=/forum/topic/20329/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/20329/?page=1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:13:55 GMT -->
</html>
