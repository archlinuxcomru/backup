


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/19020/?page=7 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 05:39:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Сборка дистрибутивов инструкция для чайников
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/8/index.html">Блоги</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/25/index.html">Блоги</a> <span class="divider">/</span></li>
            
        
        
            <li>Сборка дистрибутивов инструкция для чайников</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Сборка дистрибутивов инструкция для чайников</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="indexc575.html?page=6" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index235c.html?page=7">7 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexfdfa.html?page=8" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-213408"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/213408/index.html">#</a>
            3 года, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            Круто ! Уважаю, кстати этот самый HP был пмною крякнут, по расширенную 128 память,так что можно было в ramtor больше носом не упираться.<br />Но опять таки все писалось в стол. А так да zasm + sts было наше все. Да и паяльник был частым гостем на столе, хотя и сейчас периодически<br />балуюсь итальянским монтажом с макаронами мгтф-а :  <a href="http://forum.russ2.com/index.php?showtopic=3973&amp;view=findpost&amp;p=41923">http://forum.russ2.com/index.php?showtopic=3973&view=findpost&p=41923</a><br />Как говорил капитан Немо ( автор компа KAY256 , подозрительно похожего на скорпион, только без сервис монитора Ларченко ) - кухонное творчество.<br />Хотя мне как то ближе ламеризм , ладно считай познакомились. Вообще , нашего брата в Linux-е довольно много , вот хорошая ностальгическая тема<br />с форума Альта : <a href="https://forum.altlinux.org/index.php?topic=36337.0">https://forum.altlinux.org/index.php?topic=36337.0</a>
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-213410"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/Aivar/index.html">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/213410/index.html">#</a>
            3 года, 7 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/Aivar/topics/index.html">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/Aivar/posts/index.html">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>kostyalamer</em><br>ramtor</blockquote>ramtop.<br />)<br /><br /><blockquote><em>kostyalamer</em><br>вот хорошая ностальгическая тема</blockquote>Есть живые форумы спектрума. Там взрослые дядьки, давно подключившие к спекки винчестеры и TFT-мониторы, до сих пор изголяются в Ассемблере. Я стараюсь избегать такое общество. Как-то погонял эмулятор - не могу. Слишком много воспоминаний...<br />И вообще, хобби - это одно, а когда за ним ничего больше не замечаешь - другое. У меня отец, имея домашнюю лабораторию, всю свою сознательную жизнь, вдыхая ПОС, не выпускал из рука паяльник, чем здорово укоротил себе жизнь. Так что я хоть и знаю с пеленок как работает транзистор (а с юности - ИМС) сейчас стараюсь немного разнообразить свою жизнь. Она одна... )<br /><br />Но мы как бы отвлеклись от темы. Моя вина.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-213413"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/213413/index.html">#</a>
            3 года, 7 месяцев назад
            
                (отредактировано
                
                    3 года, 7 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Aivar</em><br>Но мы как бы отвлеклись от темы. Моя вина.</blockquote>Ничего страшного, я сделал ссылки с одной страницы инструкции для чайников на другую страницу и обратно, так что<br />между этими страницами совершенно спокойно можно обсуждать разные интересные вещи на сам документ никак не влияет.<br />Кстати , по старой спектрумовской памяти, пытался народ на альте подсадить на примитивный игрострой (была у меня хорошая книжка, авторов не помню, как написать игру на ассемблере) :<br /><a href="https://www.altlinux.org/Simply_game">https://www.altlinux.org/Simply_game</a>  <a href="https://www.altlinux.org/Simply_game/2">https://www.altlinux.org/Simply_game/2</a> . и дело как водится пошло <a href="http://forum.russ2.com/index.php?showtopic=4167">http://forum.russ2.com/index.php?showtopic=4167</a><br />но как и следовало ожидать, со временем завяло.<br />О, вспомнил про свои &quot; ботинки Билла &quot;, надо их в Aur пушнуть, крышу сносили не хуже старого спектрумовского manic miner :-)
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-213861"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/213861/index.html">#</a>
            3 года, 6 месяцев назад
            
                (отредактировано
                
                    3 года, 6 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            <a href="../../post/213287/index.html">Предыдущая страница</a><br />Дорогие начинающие сборщики , вот и обещанное продолжение. Сразу извинюсь за растянутость этих публикаций , окостыливание IceArch - а требует довольно много времени ( и к тому же гораздо интереснее написания каких-либо инструкций ), поэтому пишу довольно редко.<br />Будем надеяться , что собрать простейший Live у вас получилось без проблем , теперь немного поговорим  о графике и автологине. Изначально я сделал все это в том же IceArch-е при помощи slim - а, но товарищи на этом форуме сказали что это избыточно и они правы. Наконец , дошли руки все это сделать по человечески, без каких либо dm-ов. Для начала читаем очень полезную инструкцию  написанную уважаемым scorpid:  <a href="../16498/index2679.html?page=1">https://archlinux.org.ru/forum/topic/16498/?page=1</a><br />Прочитали, теперь адаптируем ее к нашему случаю , будем считать что у вас как и у меня дефолтный пользователь root:<br />1) Создадим в вашей сборочнице файл :  /airootfs/root/.xinitrc<br />вот файлик от того же IceArch :<br /><pre><code>
#!/bin/sh
# start some nice programs
if [ -d /etc/X11/xinit/xinitrc.d ] ; then
 for f in /etc/X11/xinit/xinitrc.d/?*.sh ; do
  [ -x &quot;$f&quot; ] &amp;&amp; . &quot;$f&quot;
 done
 unset f
fi

exec icewm-session
</code></pre>Естественно , вместо icewm-session  вы впишите команду запускающую ваш рабочий стол.<br /><br />Делаем юнит для автологина , создаем файл /airootfs/etc/systemd/system/getty@tty1.service.d/override.conf следующего содержания:<br /><pre><code>
[Service]
ExecStart=
ExecStart=-/usr/bin/agetty --autologin root --noclear %I $TERM
</code></pre><br />Понятно, что если у вас дефолтом другой пользователь, вы впишите его сюда вместо root-а.<br />Теперь вишенка на торте, надо создать файл /airootfs/root/.bash_profile_new и подсунуть его при  сборке вместо /airootfs/root/.bash_profile . Втупую делать  /airootfs/root/.bash_profile не нужно, сборочница затрет его дефолтным. Ладно, ближе к делу — создаем /airootfs/root/.bash_profile_new<br />такого содержания :<br /><br /><pre><code>
#
# ~/.bash_profile
#
[[ -f ~/.bashrc ]] &amp;&amp; . ~/.bashrc
[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; exec startx

</code></pre><br />Кстати, когда я делал консольный дистрибутив на альте : <a href="https://forum.altlinux.org/index.php?topic=40909.0">https://forum.altlinux.org/index.php?topic=40909.0</a> я в этом файле сделал отличную менюшку, которая запускала много полезных программ, так что запускать отсюда можно не только вашу сессию а все что угодно .  Но про консольные сборки мы как нибудь в другой раз поговорим, просто запомните для себя такую возможность может пригодиться. Можно в такую менюшку и запуск разных de прописать ,  не обязательно для этого перелогиниваться в другую консоль :-)<br />Ладно, я как обычно отвлекся,  откроем наш /airootfs/root/customize_airootfs.sh и в его конец допишем следующие строки<br /><br /><pre><code>
groupadd  nopasswdlogin
gpasswd -a root nopasswdlogin
cp -f /root/.bash_profile_new /root/.bash_profile
systemctl set-default graphical.target
</code></pre>Еще раз скажу, что никакой Америки я тут не открыл практически все почерпнуто отсюда :<br /><a href="../16498/index2679.html?page=1">https://archlinux.org.ru/forum/topic/16498/?page=1</a><br />Вот собственно и все про графику и автологин. Спасибо товарищам, которые пишут здесь блоги, я их читаю и вам советую. Оставайтесь с нами и учитесь делать свои сборки. В следующей инструкции я поделюсь с вами интересными костылями ( на сей раз своими ), но сначала доделаю очередную альфу IceArch.<br /><a href="../../post/214018/index.html">Продолжение -&gt;</a>
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-213866"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/akorop/index.html">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/213866/index.html">#</a>
            3 года, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/akorop/topics/index.html">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/akorop/posts/index.html">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Aivar</em><br>Как-то погонял эмулятор - не могу. Слишком много воспоминаний&#8230;</blockquote>Гы... Сейчас я, конечно, для  спктрума не программирую, но в эмуляторе Green Beret гоняю регулярно - прекрасный отдых для головного мозга. (Для тех, кто не в курсе. Это стрелялка 1D с элементами 2D и таким сюжетом: бежать слева направо и всех мочить. Участие гловного мозга только мешает.). Использую aur/<strong>fuse-emulator</strong> - вполне добротно.<br />Это я тоже поностальгировал, а теперь внимательно читаю про сброку дистрибутива...
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214018"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214018/index.html">#</a>
            3 года, 6 месяцев назад
            
                (отредактировано
                
                    3 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            <a href="../../post/213861/index.html">Предыдущая страница</a><br />Сегодня поговорим о „живых флешках“. Надеюсь что к этому моменту вы уже попробовали что-нибудь собрать , двигаемся дальше. Для начала посмотрим что получилось в результате наших сборок — а получился классический LiveCD ,  понятно что образ „ гибридный „ ( благодаря xorriso ) и прекрасно работает с флешки, но как говорил персонаж одного хорошего мультфильма „ Маловато будет !“ . Работать то он работает, но занимает весь объем накопителя  и соответственно не позволяет  сохранять информацию , при выключении питания она теряется безвозвратно ( конечно у нас там есть раздел EFI доступный в режиме r/w — но я не буду учить вас плохому ).  Проще говоря LiveCD  без возможности сохранения , просто работающий с флешки так же как с  привода CD/DVD.<br />Надо сказать что в том же Альте инструменты для создания  живых флешек встроены  в виде целей в основной сборочный инструмент , здесь же сборочный инструмент победнее . Зато это позволяет писать очень интересные костыли ,  которыми я с вами и поделюсь в этой части инструкции.  Я бы сказал что на Альте флешки более живые ( как я понимаю это либо фругал, либо что-либо в таком же стиле ) у нас флешка будет полуживая , просто мы примонтируем к освободившемуся на ней месту домашний каталог root-а  в режиме чтение / запись / исполнение.<br />Т.е. все что вы будете делать под root-ом  в этом каталоге не пропадет при выключении питания , а останется на флешке и будет работать при следующих включениях вашей системы.<br />Например , закладки и расширения вашего браузера, скачанные книги, музыка , фильмы останутся с вами , надеюсь что преимущества перед r/o понятны.<br />Будем считать на этом введение законченным, переходим к практике. Да , сразу скажу , что bash-ист из меня тот еще, поэтому попрошу не удивляться не оптимальному и не красивому коду .<br />Для начала займемся первой задачей - сжатием образа и созданием нового раздела на флешке под root-овский хомяк. Кстати, идея посетила меня при чтении этого блога :<br /> <a href="../13105/index.html">https://archlinux.org.ru/forum/topic/13105/</a> за что авторам большое спасибо . Еще раз товарищи сборщики напомню вам о блогах — читайте найдете много интересного !<br /><br />1) Компрессор :<br /><br /><pre><code>
#!/bin/bash
clear ; echo -e &quot;\e[0m&quot;
echo &quot; Эта программа использует свободное место на вашей флешке для создания &quot;
echo &quot; домашнего каталога пользователя root в режиме чтение / запись  ! &quot;
sleep 1
if [ -d /media/IceDisk/root ]
then
  echo -e &quot;\n\n&quot;
  echo -e &quot;\e[1m Домашний каталог на этой флешке уже создан ! &quot;
  echo -e &quot;\e[0m&quot;
  sleep 4
  exit
fi
echo -e &quot;\e[1m Подождите идет сканирование подкдюченных устройств ! \e[0m &quot;
fdisk -l
echo -e &quot;\n\n&quot;
disk=`mount | grep /run/archiso/bootmnt`
disk=${disk:0:8}
echo -e &quot;\e[1mОбнаружена ваша флешка это $disk ! &quot;

echo  -e &quot;\e[1mПроизвести сжатие разделов на устройстве $disk Y/N ?&quot;
echo -e &quot;\e[0m&quot;
while true
do
   read -s -n 1 key
   if [ $key = n ] || [ $key = N ]
   then
     exit
   elif [ $key = y ] || [ $key = Y ]
   then
     break
   fi
done

fdisk $disk &lt;&lt; EOF
n
p
3
# между 3 и w должны быть 3 пустых строки ( форум их вырезает )
w
EOF

mke2fs -t ext4 -L IceDisk $disk&quot;3&quot; &lt;&lt; EOF
y

EOF
echo -e &quot;\e[1m&quot;
echo -n &quot;Создан раздел : &quot; ; e2label $disk&quot;3&quot;
echo &quot; Для вступления этих изменений в силу перезагрузите систему !&quot;
echo -e &quot;\e[0m&quot;
sleep 4

</code></pre><br />Немножко пояснений :<br />первый блок if fi это „защита от дурака“ , на случай если пользователь при последующих запусках системы запустит компрессор.<br />fdisk   - l  нужен для того чтобы сравнить то что выбрала прога в качестве флешки с тем что выбрали вы и если ваши мнения совпали просто согласиться с этим.  Дальше тоже ничего сложного , просто управляем fdisk — ом через EOF для создания нового раздела .<br />Да , если вы никогда с ним не работали запомните, что пустые строки  эмулируют нажатия на Enter которые программа сделает за вас . Все остальное с fdisk -ом думаю понятно.<br />Теперь при помощи    mke2fs -t ext4 L IceDisk $disk&quot;3&quot;  создадим файловую систему на этом разделе. Обратите внимание на метку диска. В моем случае это IceDisk , в вашем случае что -нибудь другое ( эта же метка будет использоваться юнитом, который напишем чуть позже ),<br />только не называйте этот раздел так же как свой дистрибутив , иначе вместо загрузки получите ознакомительный тур по busybox -у (  штука тоже интересная , баловался я на Альте минимальными сборочками с ним , но сейчас речь не об этом ).  Ладно , будем надеяться вам все здесь понятно ( если не понятно — спрашивайте  ) , двигаемся дальше.<br />2) Юнит :<br />Для начала  создадим файл   /airootfs/etc/systemd/system/rwusb.service  следующего содержания :<br /><pre><code>
[Unit]
Description=Loading for usbdrive
After=network.target

[Service]
Type=oneshot
ExecStart=/etc/systemd/scripts/rwusb

[Install]
WantedBy=multi-user.target
</code></pre><br />Теперь делаем сам скрипт :  /airootfs/etc/systemd/scripts/rwusb<br /><br /><pre><code>
#!/bin/bash
clear
if ! [ -d /media/IceDisk ]; then
   echo &quot; Standart loading !&quot;

else
   echo &quot; Loading for USB !&quot;
   cp -r -n -a /root /media/IceDisk
   mount -o rw,uid=0,gid=0 --bind /media/IceDisk/root /root
   cd /media/IceDisk/root
   mount -o remount,exec /root
   export PATH=$PATH:/media/IceDisk/root

fi
sleep 2
</code></pre><br />Да , не забудьте что все это делается из под root-а в вашей сборочнице и скрипт должен быть исполняемым.  Объяснять тут особо нечего , учтите только что IceDisk везде должен быть заменен на ту метку раздела , которую вы задали в компрессоре.<br />Осталось совсем мелочь  в ваш /airootfs/root/customize_airootfs.sh добавить строчки :<br /><br /><pre><code>
systemctl enable rwusb.service
systemctl start rwusb.service
</code></pre><br />После чего собрать всю эту радость. У меня компрессор повешен на кнопку на рабочем столе (IceWM) , можно запихать его в автозагрузку или еще куда-нибудь.<br />Да , чуть не забыл, все это работает у меня при следующем содержании mkinitcpio.conf в моей сборочнице :<br /><pre><code>
MODULES=&quot;ext4 isofs&quot;
HOOKS=(base udev memdisk archiso block filesystems keyboard)
COMPRESSION=&quot;xz&quot;
COMPRESSION_OPTIONS=&quot;-9&quot;
</code></pre><br />Работу при других конфигурациях этого файла не проверял, ничего сказать не могу — либо делайте также , либо экспериментируйте. Как говорит товарищ Столмен : «Счастливого хака !»<br /><a href="../../post/215647/index.html">Продолжение</a>
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214020"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/nafanja/index.html">
                <span class="post-username">nafanja</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214020/index.html">#</a>
            3 года, 6 месяцев назад
            
                (отредактировано
                
                    3 года, 6 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8b/bf/8bbfdb897f0c37710a7d8b4dc072bea1.png" alt="nafanja avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/nafanja/topics/index.html">
                    94
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/nafanja/posts/index.html">
                    9252
                </a>
            </div>
            <div>
                Участник с: 02 июня 2012
            </div>
            
                <div class="label label-warning">заблокирован</div>
            
        </td>
        <td class="post-content">
            <blockquote><em>kostyalamer</em><br>After=network.target</blockquote>а почему именно после <strong>network.target</strong>? ведь скрипту в принципе не нужна поднятая сеть...<br />по идее лучше после <strong>local-fs.target</strong>
            
                
                    <div class="post-signature">
                        <a href="../10992/index.html">Псевдографический инсталлятор Arch Linux ver. 3.8.2</a><br />Благодарности принимаются на ЯД <strong>410012815723874</strong>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-214021"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/214021/index.html">#</a>
            3 года, 6 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            Наверное можно и так, главное скрипт должен быть запущен после того , как автоматически примонтировались носители . Когда это происходит я не вдавался в подробности , хотя судя по выпадению в busybox при неправильной метке достаточно рано .<br />Поэтому чем ближе к залогиванию, тем безопаснее.
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215647"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215647/index.html">#</a>
            3 года, 5 месяцев назад
            
                (отредактировано
                
                    3 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            <a href="../../post/214018/index.html">Предыдущая страница</a><br />Вот и окончание темы о живых флешках и заодно этого блога.  Я начинал эту тему как инструкцию для чайников ,  но если вы дочитали до этого места  ( не просто дочитали , но и попробовали собрать свои archiso-хи ) , то вы уже не совсем чайник  с чем и поздравляю.<br />Долго думал стоит ли выкладывать этот материал и пришел к компромиссному решению — выложить свой старый вариант инсталлера как более простой и понятный для новичка .<br />Новый вариант обвешан окошками zenity и разными плюшками , но гораздо более замудреный<br />То чем мы с вами занимались прошлый раз можно назвать «живой флешкой» достаточно   условно, изменения в хомяке root-а сохраняются , но хочется получить на флешке полноценную<br />систему, сейчас мы с вами этим и займемся.<br />Для начала немножко о логике работы , необходимо скопировать систему из корня в новый раздел ( надеюсь вы внимательно читали мой предыдущий пост ) и организовать загрузку всей этой радости. С первой частью этой задачи справляется мой скрипт installer ( бывший компрессор ) , о второй поговорим немного позже.<br />Вот этот код надо добавить к концу листинга compressor  - а  из моего прошлого поста чтобы получился мой старый инсталлер :<br /><br /><pre><code>
echo -n &quot;Создан раздел : &quot; ; e2label $disk&quot;3&quot;
dsk=${disk:5}

max_disk=$(cat /sys/block/$dsk/size | sort -n -r| head -1)
if [ $max_disk  -ge 14000000 ] ; then
echo &quot; Объем флешки &gt; 7 Gb&quot;
echo &quot; Начинаем программу установки !&quot;
echo -e &quot;\e[0m&quot;
sleep 3
mount -o rw $disk&quot;3&quot; /mnt
echo -e &quot;\e[1m&quot;
echo &quot;      Внимание производится копирование !&quot;
echo &quot; Эта операция занимает много времени, подождите !&quot;
cp -ax / /mnt
cp -vaT /run/archiso/bootmnt/arch/boot/$(uname -m)/vmlinuz /mnt/boot/vmlinuz-linux
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
line=&quot;$(sed -ne 2p /mnt/etc/fstab)&quot;
line=${line:0:58}
echo &quot;$line errors=remount-ro,noatime,commit=120,nodiratime	0 1&quot; &gt; /mnt/etc/fstab
echo &quot;tmpfs     /tmp		tmpfs	rw		0 0 &quot; &gt;&gt; /mnt/etc/fstab
echo &quot;tmpfs     /run		tmpfs	rw		0 0 &quot; &gt;&gt; /mnt/etc/fstab
echo &quot;tmpfs     /var/lock	tmpfs	rw		0 0 &quot; &gt;&gt; /mnt/etc/fstab
echo &quot;tmpfs     /var/log	tmpfs	rw,size=10m	0 0 &quot; &gt;&gt; /mnt/etc/fstab
#arch-chroot /mnt /bin/bash
echo &quot;Работаем в chroot !&quot;
#arch-chroot /mnt sed -i &#39;s/Storage=volatile/#Storage=auto/&#39; /etc/systemd/journald.conf
sed -i &#39;s/Storage=volatile/#Storage=auto/&#39; /mnt/etc/systemd/journald.conf
rm  /mnt/etc/udev/rules.d/81-dhcpcd.rules
arch-chroot /mnt systemctl disable pacman-init.service choose-mirror.service
arch-chroot /mnt rm -r /etc/systemd/system/{choose-mirror.service,pacman-init.service,etc-pacman.d-gnupg.mount}
rm  /mnt/etc/systemd/scripts/choose-mirror
rm  /mnt/etc/mkinitcpio-archiso.conf
rm -r /mnt/etc/initcpio
arch-chroot /mnt mkinitcpio -p linux
syslinux -a $disk&quot;2&quot;
cp -f /mnt/boot/initramfs-linux.img /media/ARCHISO_EFI/initramfs-linux.img
cp -f /mnt/boot/initramfs-linux-fallback.img /media/ARCHISO_EFI/initramfs-linux-fallback.img
cp -f /mnt/boot/vmlinuz-linux /media/ARCHISO_EFI/vmlinuz-linux
rm /media/ARCHISO_EFI/rwusbefi
echo &quot;#!/bin/bash&quot; &gt; /media/ARCHISO_EFI/rwusbefi
echo &quot;clear&quot; &gt;&gt; /media/ARCHISO_EFI/rwusbefi
echo &quot; Установка завершена !&quot;
echo &quot; В меню загрузки выбирайте третий с верху пункт меню &quot;
rm /mnt/root/.idesktop/installer.lnk
else
	echo &quot; Объем флешки &lt; 7 Gb&quot;
	echo &quot; Это не достаточно для полноценной установки&quot;
	echo &quot; Но, теперь все изменения будут сохраняться в вашем домашнем каталоге&quot;
	echo &quot; Он находится в отдельном разделе флешки  в режиме чтение / запись &quot;
	echo &quot; В меню загрузки выбирайте верхний пункт меню &quot;
fi
echo &quot; Для вступления изменений в силу перезагрузите систему !&quot;
echo -e &quot;\e[0m&quot;
sleep 5</code></pre>
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-215648"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/kostyalamer/index.html">
                <span class="post-username">kostyalamer</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/215648/index.html">#</a>
            3 года, 5 месяцев назад
            
                (отредактировано
                
                    3 года, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/kostyalamer/topics/index.html">
                    2
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/kostyalamer/posts/index.html">
                    229
                </a>
            </div>
            <div>
                Участник с: 26 января 2019
            </div>
            
        </td>
        <td class="post-content">
            Немного поясню происходяшее :<br />Сначала проверяем объем флешки, если больше или равно 7 Гб — производим установку , если меньше — ничего не делаем — получаем хомяк в режиме r/w.<br /><br />С копированием , думаю все понятно , ниже идет костыль который переделывает свеже сгенерированный fstab для работы с флешки.<br /><br />То что происходит ниже должно быть вам понятно, если вы внимательно читали wiki.<br />Правда обратите внимание, что мы поставили Syslinux на второй раздел ( тот самый который физически находится внутри iso-хи и используется мною для разных костылей  ), но об этом немного позже.<br /><br />Также на этом разделе мы меняем содержание моего скрипта rwusbefi ( смотри предыдущее занятие ) - заменяем его содержание ( которое нужно было для хомяка r/w ), ничего не делающей заглушкой.<br />Да , напомню что инсталлер должен лежать в сборочнице в хомяке root-а :<br /> сборочница /airootfs/root<br /><br />Теперь поговорим о Syslinux- ах у нас их будет 2 :<br />1-ый  находится на первом разделе флешки, в нем необходимо создать пункт вызывающий Syslinux второго раздела . Поскольку первый раздел это iso-ха , то необходимо сделать это до сборки аrchiso , вот так у меня все это выглядит:   сборочница  /syslinux/archiso_tail.cfg<br /><pre><code>
LABEL copy_to_ram
TEXT HELP
Minimum 2Gb RAM for this option !
ENDTEXT
MENU LABEL Boot IceArch Copy to RAM ( minimum 2GB RAM )
LINUX boot/x86_64/vmlinuz
INITRD boot/intel_ucode.img,boot/amd_ucode.img,boot/x86_64/archiso.img
APPEND archisobasedir=%INSTALL_DIR% archisolabel=%ARCHISO_LABEL% copytoram=y cow_persistet=P

LABEL IceArch_worm
TEXT HELP
Boot IceArch on Disk ( After installyng !!! ).
ENDTEXT
MENU LABEL IceArch_work ( After installyng !!! ).
COM32 boot/syslinux/chain.c32
APPEND hd0 2

LABEL existing
TEXT HELP
Boot another systems (Press TAB to select partition number to boot).
ENDTEXT
MENU LABEL Boot existing OS (Press TAB to select partition number to boot).
COM32 boot/syslinux/chain.c32
APPEND hd0 0

# <a href="http://www.memtest.org/">http://www.memtest.org/</a>
LABEL memtest
MENU LABEL Run Memtest86+ (RAM test)
LINUX boot/memtest
LABEL reboot
MENU LABEL Reboot
COM32 boot/syslinux/reboot.c32

LABEL poweroff
MENU LABEL Power Off
COM32 boot/syslinux/poweroff.c32
</code></pre><br />Обратите внимание на раздел меню :  LABEL IceArch_worm  -  именно он чайнлоадером передает управление Syslinux-у 2-го раздела.<br />С первым Syslinux-ом вроде разобрались переходим ко второму , в корне нашей сборочницы создадим  файл  сборочница /syslinux.cfg  следующего содержания:<br /><pre><code>
# Config file for Syslinux -
# /boot/syslinux/syslinux.cfg
#
# Comboot modules:
#   * menu.c32 - provides a text menu
#   * vesamenu.c32 - provides a graphical menu
#   * chain.c32 - chainload MBRs, partition boot sectors, Windows bootloaders
#   * hdt.c32 - hardware detection tool
#   * reboot.c32 - reboots the system
#
# To Use: Copy the respective files from /usr/lib/syslinux to /boot/syslinux.
# If /usr and /boot are on the same file system, symlink the files instead
# of copying them.
#
# If you do not use a menu, a &#39;boot:&#39; prompt will be shown and the system
# will boot automatically after 5 seconds.
#
# Please review the wiki: <a href="https://wiki.archlinux.org/index.php/Syslinux">https://wiki.archlinux.org/index.php/Syslinux</a>
# The wiki provides further configuration examples

DEFAULT arch
PROMPT 0        # Set to 1 if you always want to display the boot: prompt
TIMEOUT 50
# You can create syslinux keymaps with the keytab-lilo tool
#KBDMAP de.ktl

# Menu Configuration
# Either menu.c32 or vesamenu32.c32 must be copied to /boot/syslinux
UI menu.c32
#UI vesamenu.c32

# Refer to <a href="http://syslinux.zytor.com/wiki/index.php/Doc/menu">http://syslinux.zytor.com/wiki/index.php/Doc/menu</a>
MENU TITLE Arch Linux
#MENU BACKGROUND splash.png
MENU COLOR border       30;44   #40ffffff #a0000000 std
MENU COLOR title        1;36;44 #9033ccff #a0000000 std
MENU COLOR sel          7;37;40 #e0ffffff #20ffffff all
MENU COLOR unsel        37;44   #50ffffff #a0000000 std
MENU COLOR help         37;40   #c0ffffff #a0000000 std
MENU COLOR timeout_msg  37;40   #80ffffff #00000000 std
MENU COLOR timeout      1;37;40 #c0ffffff #00000000 std
MENU COLOR msg07        37;40   #90ffffff #a0000000 std
MENU COLOR tabmsg       31;40   #30ffffff #00000000 std

# boot sections follow
#
# TIP: If you want a 1024x768 framebuffer, add &quot;vga=773&quot; to your kernel line.
#
#-*

LABEL arch
    MENU LABEL IceArch
    LINUX ../vmlinuz-linux
    APPEND root=/dev/sdb3 rw
    INITRD ../initramfs-linux.img

LABEL archfallback
    MENU LABEL Return_to_Menu
    COM32 chain.c32
    APPEND hd0 0

LABEL reboot
        MENU LABEL Reboot
        COM32 reboot.c32
</code></pre><br />Это достаточно примитивное текстовое меню без всяких наворотов, главная задача которого , загружать нашу установленную на 3-ем разделе флешки систему.<br />Естественно надо подсунуть его и недостающие для его работы модули нашей сборочнице, сейчас немного обкостылим наш чудесный сборочный скрипт  сборочница / build.sh :<br /><pre><code>
#----------------------
    cp rwusbefi ${work_dir}/efiboot/
#----------------------
    cp ${work_dir}/x86_64/airootfs/boot/archiso.img ${work_dir}/efiboot/archiso.img
    cp ${work_dir}/x86_64/airootfs/boot/vmlinuz-linux ${work_dir}/efiboot/vmlinuz-linux
    cp ${work_dir}/x86_64/airootfs/boot/initramfs-linux.img ${work_dir}/efiboot/initramfs-linux.img
    cp ${work_dir}/x86_64/airootfs/boot/initramfs-linux-fallback.img ${work_dir}/efiboot/initramfs-linux-fallback.img
   _uname_r=$(file -b ${work_dir}/x86_64/airootfs/boot/vmlinuz-linux| awk &#39;f{print;f=0} /version/{f=1}&#39; RS=&#39; &#39;)
    mkdir -p ${work_dir}/efiboot/syslinux
    for _cfg in ${script_path}/syslinux/*.cfg; do
        sed &quot;s|%ARCHISO_LABEL%|${iso_label}|g;
             s|%INSTALL_DIR%|${install_dir}|g&quot; ${_cfg} &gt; ${work_dir}/efiboot/syslinux/${_cfg##*/}
    done
    cp ${script_path}/syslinux/splash.png ${work_dir}/efiboot/syslinux
    cp ${work_dir}/x86_64/airootfs/usr/lib/syslinux/bios/*.c32 ${work_dir}/efiboot/syslinux
    cp ${work_dir}/x86_64/airootfs/usr/lib/syslinux/bios/lpxelinux.0 ${work_dir}/efiboot/syslinux
    cp ${work_dir}/x86_64/airootfs/usr/lib/syslinux/bios/memdisk ${work_dir}/efiboot/syslinux
    mkdir -p ${work_dir}/efiboot/syslinux/hdt
    gzip -c -9 ${work_dir}/x86_64/airootfs/usr/share/hwdata/pci.ids &gt; ${work_dir}/efiboot/syslinux/hdt/pciids.gz
    gzip -c -9 ${work_dir}/x86_64/airootfs/usr/lib/modules/${_uname_r}/modules.alias &gt; ${work_dir}/efiboot/syslinux/hdt/modalias.gz
    cp -f syslinux.cfg ${work_dir}/efiboot/syslinux/
#----------------------

    umount -d ${work_dir}/efiboot
</code></pre>Этот кусок костыльного кода всунут в конец функции make_efiboot()  в дополнение к rwusbefi-шному костылю там же теперь лежит второй для syslinux-а все ограничено хэшами с минусами — думаю разберетесь. Этот код не оптимизирован, взят из функции  make_syslinux() как есть ( только пути изменены ) , лишнее можно выбросить.<br />Чуть не забыл , чтобы все это  поместилось на EFI- шный раздел необходимо в функции  make_efiboot() указать р-р раздела 128 Мб , вместо умолчательных 64 :<br /><pre><code> truncate -s 128M ${work_dir}/iso/EFI/archiso/efiboot.img  </code></pre>Осталось подправить сборочница / mkinitcpio.conf :<br /><pre><code>
MODULES=&quot;ext4 isofs&quot;
HOOKS=(base udev memdisk archiso_shutdown archiso archiso_loop_mnt block squashfs filesystems keyboard)
COMPRESSION=&quot;xz&quot;
COMPRESSION_OPTIONS=&quot;-9&quot;
</code></pre><br />И можете начинать вашу сборку , надеюсь я более-менее понятно изложил суть своих наработок.<br />Что-бы не вбивать все это пальцами можно скачать с гуглодиска мою старую сборочницу:<br /><a href="https://drive.google.com/open?id=1DIwpywIWvN7Zo3v7jKzmUocHAdP20l42">https://drive.google.com/open?id=1DIwpywIWvN7Zo3v7jKzmUocHAdP20l42</a><br /> ( новая ушла довольно далеко вперед но ,там все еще костыльнее и объяснять эти костыли уже не хочется - итак посты получаются с большим количеством букв ) и собрать немного устаревший IceArch v0.41 . Надеюсь что на его базе вы наделаете своих интересных сборок с разными рабочими столами и пойдете осваивать дистрострой дальше, уже самостоятельно.<br />Дальнейшее развитие ваших сборок предполагает прикручивание к ним инсталлера устанавливающего вашу систему не на флешку а на жесткий диск .<br />Рекомендую посмотреть на Zen ,  Calamares  , инсталлер от уважаемого nafanja или написать свой .<br />Будем считать тему дистростроя для чайников раскрытой, остается пожелать всем кто дочитал до этого места творческих успехов в этом направлении.<br /><br />Как говорит товарищ Столмен :  Счастливого хака !
            
                
                    <div class="post-signature">
                        Spectrum forever
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="indexc575.html?page=6" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="index2679.html?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="index235c.html?page=7">7 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="indexfdfa.html?page=8" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/indexe621.html?next=/forum/topic/19020/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/19020/?page=7 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 05:39:42 GMT -->
</html>
