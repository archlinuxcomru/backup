


<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from archlinux.org.ru/forum/topic/11748/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:10:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Анатомия Awesome WM
    </title>
    <link rel="shortcut icon" href="https://archlinuxcomru.github.io/backup/src/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="../../feeds/posts/index.html" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="../../feeds/topics/index.html" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="../../../index.html">
        <img src="https://archlinuxcomru.github.io/backup/src/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="../../../news/index.html">Новости</a></li>
    <li class="active"><a href="../../index.html">Форум</a></li>
    <li class=""><a href="../../../blogs/index.html">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_(Русский)">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="../../../irc/index.html#chat">IRC</a></li>
      <li class="dropdown">
        <a href="../../../accounts/login/index.html" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="../../../accounts/login/index.html">Вход</a></li>
          <li><a href="../../../accounts/register/index.html">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="../../../messages/inbox/index.html" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="../../../index.html">ArchLinux.org.ru</a></li>


    <li><a href="../../index.html">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="../../category/8/index.html">Блоги</a> <span class="divider">/</span></li>
            
                <li><a href="../../forum/25/index.html">Блоги</a> <span class="divider">/</span></li>
            
        
        
            <li>Анатомия Awesome WM</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Анатомия Awesome WM</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="index42a7.html?page=16">16</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index5c43.html?page=17">17</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111391"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maisvendoo/index.html">
                <span class="post-username">maisvendoo</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111391/index.html">#</a>
            9 лет, 3 месяца назад
            
                (отредактировано
                
                    6 лет, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f4/dc/f4dc0d9e80c61dbb447753a201a2676d.png" alt="maisvendoo avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/maisvendoo/topics/index.html">
                    68
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maisvendoo/posts/index.html">
                    1142
                </a>
            </div>
            <div>
                Участник с: 10 октября 2012
            </div>
            
        </td>
        <td class="post-content">
            Поскольку заметок прибавилось, вперемешку с обсуждением их, решено навести порядок в блоге. Пост про автозагрузку перенесен вниз, вместо него добавлено<br /><br /><strong>ОГЛАВЛЕНИЕ</strong><br /><br /><a href="index2679.html?page=1#post-111477">1. Awesome WM: разбор rc.lua &quot;по косточкам&quot;</a><br /><a href="indexfdb0.html?page=4#post-112373">2. Awesome WM: анимированный виджет на рабочем столе: аналоговые часы</a><br /><a href="indexfdb0.html?page=4#post-112474">3. Список автозагрузки средствами Awesome</a><br /><a href="../../post/139090/index.html">4. Отображение браузерного видео в полноэкранном режиме</a><br /><a href="../../post/156099/index.html">5. Создание всплывающего guake-like терминала (<strong>Haron_Prime</strong>)</a><br /><br />Так я думаю будет удобнее ориентироваться в блоге
            
                
                    <div class="post-signature">
                        Да пребудет с нами Сила...!<br />CPU Intel Core i9 10900-KF/RAM DDR4 128 Gb/NVidia GForce GTX 1080 Ti Turbo 11Gb/SSD M2 512 Gb/HDD Seagate SATA3 2 Tb/HDD Toshiba 3Tb/HDD Toshiba 6Tb<br /><a href="http://rusrailsim.org/">http://rusrailsim.org</a>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111462"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/serkhay/index.html">
                <span class="post-username">serkhay</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111462/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/serkhay/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/serkhay/posts/index.html">
                    304
                </a>
            </div>
            <div>
                Участник с: 06 июня 2012
            </div>
            
        </td>
        <td class="post-content">
            А зачем использовать awesome для автозагрузки? Я понимаю, что он почти как DE, в нем можно реализовать практически все. Но не проще ли использовать для этого более подходящие способы. Самый простой, xinitrc, при этом программы при перезапуске дублироваться не будут. В конце концов можно использовать пользовательскую сессию systemd, оно как раз для этого предназначено.<br/><br/>Но это конечно ваше дело, и наверняка кому то пригодится.  А в целом я только рад, что на форуме появится блог про awesome)<br/>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111477"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maisvendoo/index.html">
                <span class="post-username">maisvendoo</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111477/index.html">#</a>
            9 лет, 3 месяца назад
            
                (отредактировано
                
                    6 лет, 11 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f4/dc/f4dc0d9e80c61dbb447753a201a2676d.png" alt="maisvendoo avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/maisvendoo/topics/index.html">
                    68
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maisvendoo/posts/index.html">
                    1142
                </a>
            </div>
            <div>
                Участник с: 10 октября 2012
            </div>
            
        </td>
        <td class="post-content">
            <strong>Awesome WM: разбор rc.lua &quot;по косточкам&quot;</strong><br /><br />Переходя на awesome, я мотивировался возможностью воспользоваться преимуществами тайлинга, предоставляемого данным WM, при сохранении привычного функционала из Openbox.<br /><br />Под тайлингом (англ. tiling) подразумевается способность менеджера окон управлять ими так, что при открытии каждого окна, оно не перекрывает предыдущие и располагается &quot;встык&quot; с ранее открытыми окнами. Собственно ради этой возможности и был затеян мой переход на awesome.<br /><br />После установки данного WM из коробки доступен базовый функционал и несколько тем оформления. Большая часть настройки awesome осуществляется путем редактирования файла <strong>~/.config/awesome/rc.lua</strong>. При открытии конфига, идущего искаропки, волосы становятся дыбом от обилия непонятного кода на Lua. Собственно этот код позволяет задать весь необходимый Вам функционал Вашей рабочей среды, и хочется того или нет, с ним лучше хорошенько разобраться. С этого начал и я, переписав конфиг заново, в той или иной степени разобрав каждую его часть и откомментил на русском языке. Результаты всего этого излагаю в данной статье.<br /><br />Awesome WM написан на C/C++,  а вот его настройка выполняется с помощью скриптов на языке Lua, причем имеется <a href="http://awesome.naquadah.org/doc/api/">Lua API</a>, документация по которому есть на сайте разработчика, и честно говоря не блещет подробностью.<br /><br />Первое что надо сделать - скопировать содержимое каталога <strong>/usr/share/awesome/</strong> в каталог <strong>~/.config/awesome</strong> для того чтобы использовать идущие в комплекте скрипты тем, картинки иконок для последующей модификации. Мною для издевательств была выбрана тема <strong>Zeburn</strong>, от которой нам понадобится файл <strong>~/.config/awesome/themes/zeburn/theme.lua</strong><br /><br /><strong>1. Начало</strong><br /><br />Результат моих потуг изображен на скриншоте<br /><a href="http://itmages.ru/image/view/2991607/49a5c29c"><img src="http://storage9.static.itmages.ru/i/15/0912/s_1442086147_7591226_49a5c29cd4.jpg"></a><br /><br />Разберу теперь детально какая часть конфига <strong>rc.lua</strong> за что тут отвечает<br /><br />Начинается всё с подключения необходимых библиотек<br /><pre><code>
-------------------------------------------------------------------------------
--	Стандартные библиотеки
-------------------------------------------------------------------------------

local gears = require(&quot;gears&quot;)
local awful = require(&quot;awful&quot;)
local vicious = require(&quot;vicious&quot;)

awful.rules = require(&quot;awful.rules&quot;)

require(&quot;awful.autofocus&quot;)

local wibox = require(&quot;wibox&quot;)

local beautiful = require(&quot;beautiful&quot;)

local naughty = require(&quot;naughty&quot;)

local menubar = require(&quot;menubar&quot;)
</code></pre><br />При первом запуске Awesome удивляют часы на английском языке, исправляем эту ситуацию<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Устанавливаем системную локаль (русскую)
-------------------------------------------------------------------------------
os.setlocale(os.getenv(&quot;LANG&quot;))
</code></pre><br />Задаем тему оформления, которую будем использовать<br /><pre><code>
-------------------------------------------------------------------------------
--	Устанавливаем тему
-------------------------------------------------------------------------------
beautiful.init(&quot;/home/maisvendoo/.config/awesome/themes/zenburn/theme.lua&quot;)
</code></pre><br />Задаем используемые по умолчанию приложения<br /><pre><code>
-------------------------------------------------------------------------------
--	Устанавливаем приложения по умолчанию
-------------------------------------------------------------------------------
terminal = &quot;urxvt&quot; -- Терминал по умолчанию
browser = &quot;firefox&quot; -- Браузер по умолчанию
editor = os.getenv(&quot;EDITOR&quot;) or &quot;nano&quot; -- Консольный редактор по умолчанию
editor_cmd = terminal .. &quot; -e&quot; .. editor -- Команда запуска редактора
</code></pre><br />Определяем главную клавишу-модификатор, от которой пляшут все клавиатурные комбинации. В стандартном конфиге в качестве такой клавиши выбрана Mod4, она же клавиша &quot;Windows&quot; нафиг не нужная в линуксе. Тем же путем пошел и я, хотя есть идея сменить её на Alt, из-за того что виртуальные машины под виндой отбирают клавишу Win на вызов своего меню :(. Собственно делаем это так<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Клавиша-модификатор
-------------------------------------------------------------------------------
modkey = &quot;Mod4&quot;
</code></pre><br />Сразу позаботимся о том, чтобы определить коды кнопок мыши, которые пригодятся нам для создания каждому элементу интерфейса обработчиков. Для этого используем команду<br /><br />$ xev | grep &#39;button&#39;<br /><br />теперь жмем все кнопки мыши и смотрим их номер, выводимый в консоль. У меня получились в итоге глобальные определения для кнопок мыши<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Кнопки мыши
-------------------------------------------------------------------------------
left_button = 1
right_button = 3
wheel_button = 2
plus_button = 9
minus_button = 8
</code></pre><br />Аналогично определим и скан-коды клавиш. В стандартном конфиге используются буквы английского алфавита, но это делает невозможным отработку хоткея на кирилической раскладке, поэтому<br /><br />$ xev | grep &#39;keycode&#39;<br /><br />жмем клавиши и заполняем глобальные определения для клавиатуры<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Скан-коды клавиш
-------------------------------------------------------------------------------
key_J = &quot;#44&quot;
key_K = &quot;#45&quot;
key_N = &quot;#57&quot;
key_M = &quot;#58&quot;
key_F = &quot;#41&quot;
key_R = &quot;#27&quot;
key_L = &quot;#46&quot;
key_C = &quot;#54&quot;
key_W = &quot;#25&quot;
key_Q = &quot;#24&quot;
key_H = &quot;#43&quot;
key_Tab = &quot;#23&quot;
key_Tilda = &quot;#49&quot;
key_U = &quot;#30&quot;
key_I = &quot;#31&quot;
key_T = &quot;#28&quot;
key_P = &quot;#33&quot;
key_O = &quot;#32&quot;
key_Return = &quot;#36&quot;
key_Left = &quot;#113&quot;
key_Right = &quot;#114&quot;
key_Esc = &quot;#9&quot;
key_PrtScn = &quot;#107&quot;
</code></pre><br /><strong>2. Режимы тайлинга</strong><br /><br />Теперь зададим layouts - макеты расположения окон на экране, которые собираемся использовать. Они задаются в виде массива-таблицы<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Layouts - способы расположения окон на экране
-------------------------------------------------------------------------------
local layuots =
{
  awful.layout.suit.tile,		-- Главное окно слева, справа второстепенные (мелкие)
  awful.layout.suit.tile.left,		-- Слева второстепенные окна
  awful.layout.suit.tile.bottom,	-- Внизу второстепенные окна
  awful.layout.suit.tile.top		-- Второстепенные окна вверху
}
</code></pre><br />Я выбрал только тайлинговые макеты, а те окна которые необходимо сделать плавающими настраиваются таковыми принудительно дальше.<br /><br /><a href="http://itmages.ru/image/view/2991619/484b8d63"><img src="http://storage2.static.itmages.ru/i/15/0912/s_1442086310_5692083_484b8d6355.jpeg"></a> <a href="http://itmages.ru/image/view/2991620/979b714d"><img src="http://storage2.static.itmages.ru/i/15/0912/s_1442086311_6160787_979b714d01.jpeg"></a> <a href="http://itmages.ru/image/view/2991621/91f2921c"><img src="http://storage2.static.itmages.ru/i/15/0912/s_1442086311_1012952_91f2921cf9.jpeg"></a><br /><a href="http://itmages.ru/image/view/2991622/a7fdbcf3"><img src="http://storage3.static.itmages.ru/i/15/0912/s_1442086312_4607191_a7fdbcf3f9.jpeg"></a><br />Кладем обои на рабочий стол<br /><pre><code>
-------------------------------------------------------------------------------
--	Обои рабочего стола
-------------------------------------------------------------------------------

-- Если в теме заданы обои
if beautiful.wallpaper then

  -- Перебираем все экраны
  for s = 1, screen.count() do

    -- На каждый экран кладем обои (можно в принципе на каждый экран свои)
    gears.wallpaper.maximized(beautiful.wallpaper, s, true)

  end

end
</code></pre><br />Переменная <strong>beautiful.wallpaper</strong> задается в конфиге темы, и являет собой путь к файлу с обоями<br /><br /><strong>~/.config/awesome/themes/zeburn/theme.lua</strong><br /><pre><code>
-------------------------------------------------------------------------------
--	Обои
-------------------------------------------------------------------------------
theme.wallpaper = &quot;/home/maisvendoo/admin/desktop/0001.jpg&quot;
</code></pre><br /><strong>3. Тэги - виртуальные рабочие столы и не только</strong><br /><br />Дальше создаем массив тэгов - аналог виртуальных рабочих столов в любой другой DE, отличие тэгов от рабочих столов заключается в возножности одновременного отображения нескольких тегов<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Тэги - виртуальные рабочие столы
-------------------------------------------------------------------------------

-- Список тэгов
tags = {}

-- Перебираем все экраны
for s = 1, screen.count() do

  -- На каждом создаем список тэгов, устанавливая 1й макет отображения окон
  tags[s] = awful.tag({1, 2, 3, 4, 5, 6, 7, 8, 9}, s, layuots[1])

end
</code></pre><br /><strong>4. Главное меню</strong><br /><br />Теперь создаем главное меню. В Openbox оно мне было в принципе без надобности, только затем чтобы добраться до перезагрузки/выключения/логаута. Ну а для кого-то наличие такого менб будет необходимо ещё для чего-нибудь<br />Для начала создаем подменю. Они выполняются в виде Lua-таблицы, элементами которой являются таблицы, содержащие строки с названием пункта меню, команды, выполняемой при выборе этого пункта, и пути к иконке, отображаемой в данном пункте подменю<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Интернет-приложения
-------------------------------------------------------------------------------
internet_menu =
{
    -- Формат описания пункта меню
    --
    -- {&lt;Назавание пункта меню&gt;, &lt;Команда запуска&gt;, &lt;Иконка&gt;}

    {&quot;Firefox&quot;, &quot;firefox&quot;, beautiful.firefox_icon},
    {&quot;Opera&quot;, &quot;opera&quot;, beautiful.opera_icon},
    {&quot;Kopete&quot;, &quot;kopete&quot;, beautiful.kopete_icon}

}

-------------------------------------------------------------------------------
--
-------------------------------------------------------------------------------
editors_menu =
{

  {&quot;Kate&quot;, &quot;kate&quot;},
  {&quot;GVim&quot;, &quot;gvim&quot;}

}

-------------------------------------------------------------------------------
--
-------------------------------------------------------------------------------
office_menu = {

  {&quot;Текстовый процессор&quot;, &quot;libreoffice --writer&quot;},
  {&quot;Электронные таблицы&quot;, &quot;libreoffice --calc&quot;}

}
</code></pre><br />Теперь можно делать основное меню, содержащее обычные пункты и подменю<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Главное меню
-------------------------------------------------------------------------------
main_menu = awful.menu({

  -- Таблица пунктов главного меню
  items = {

      { &quot; Интернет&quot;, internet_menu}, 	-- Подменю
      { &quot; Редакторы&quot;, editors_menu},	-- Подменю
      { &quot; LibreOffice&quot;, office_menu},	-- Подменю
      { &quot; &quot;},				-- Пустое место

      -- Обычные пункты меню

      { &quot; Выход&quot;, awesome.quit, beautiful.logout_icon},
      { &quot; Перезагрузка&quot;, function()  awful.util.spawn_with_shell(&quot;systemctl reboot&quot;) end, beautiful.reboot_icon},
      { &quot; Выключение&quot;, function()  awful.util.spawn_with_shell(&quot;systemctl poweroff&quot;) end, beautiful.poweroff_icon}
  }

})
</code></pre><br />Очень кстати здесь пришлись безрутовые команды <strong>systemd</strong> по перезагрузке и выключению компа.<br /><br />Должно получится нечто похожее на это<br /><a href="http://itmages.ru/image/view/2991626/de6fd8fc"><img src="http://storage7.static.itmages.ru/i/15/0912/s_1442086489_6471996_de6fd8fcd4.png"></a><br /><br />Пути к иконкам приложений, используемым в меню, необходимо прописать в теме<br /><br /><strong>~/.config/awesome/themes/zeburn/theme.lua</strong><br /><pre><code>
-- Иконки приложений
theme.firefox_icon	     = &quot;/usr/share/icons/hicolor/128x128/apps/firefox.png&quot;
theme.netbeans_icon	     = &quot;/usr/local/netbeans-7.3/nb/netbeans.png&quot;
theme.vbox_icon		     = &quot;/usr/share/icons/hicolor/64x64/mimetypes/virtualbox.png&quot;
theme.fm_icon		     = &quot;/home/maisvendoo/icons/fm.png&quot;
theme.maple_icon	     = &quot;/home/maisvendoo/maple16/bin/Maple16.png&quot;
theme.doublecmd_icon         = &quot;/usr/share/icons/hicolor/128x128/apps/krusader_user.png&quot;
theme.opera_icon	     = &quot;/usr/share/icons/hicolor/128x128/apps/opera-browser.png&quot;
theme.kopete_icon	     = &quot;/usr/share/icons/hicolor/48x48/apps/kopete.png&quot;

-- Иконки элементов меню
theme.poweroff_icon         = &quot;/home/maisvendoo/icons/PowerOff.png&quot;
theme.logout_icon           = &quot;/home/maisvendoo/icons/logout.png&quot;
theme.reboot_icon           = &quot;/home/maisvendoo/icons/reboot.png&quot;
</code></pre><br />В дальнейшем эти же иконки мы используем для создания кнопок быстрого запуска приложений.<br /><br />Теперь создаем кнопку-лаунчер, и вешаем на неё меню<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Лаунчер - та кнопка что на панели слева
--	(кнопка старт нафиг как виндовсе :)
-------------------------------------------------------------------------------

launcher = awful.widget.launcher({ image = beautiful.archlinux_icon, menu = main_menu })
</code></pre><br />Вместо стандартного авесомовского логотипа повесил патриотичный лого арча, предварительно прописав путь к изображению в теме<br /><br /><strong>~/.config/awesome/themes/zeburn/theme.lua</strong><br /><pre><code>
theme.archlinux_icon	     = &quot;/home/maisvendoo/icons/arch.png&quot;
</code></pre><br /><strong>5. Кнопки быстрого запуска приложений</strong><br /><br />Наличие таковых оказалось принципиальным, в Openbox они реализовывались на tint2-svn, и я, и моя девушка к ним уже привыкли, и реализация таковой же функции в awesome стала одним из условий перехода.<br /><br />Кнопки приложений можно создать с помощью виджета button, например таким образом<br /><pre><code>
-------------------------------------------------------------------------------
--	Кнопки приложений на панели задач
-------------------------------------------------------------------------------

-- Firefox --------------------------------------------------------------------
-- Создаем виджет кнопки с необходимой иконкой
firefox_button = awful.widget.button({image = beautiful.firefox_icon})

-- Программируем реакцию кнопки на нажатие левой кнопки мыши
firefox_button:buttons( awful.util.table.join(

  awful.button({ }, left_button, function() awful.util.spawn_with_shell(&quot;firefox&quot;) end)

))

-- Netbeans -------------------------------------------------------------------
netbeans_button = awful.widget.button({image = beautiful.netbeans_icon})

netbeans_button:buttons( awful.util.table.join(

  awful.button({ }, left_button, function() awful.util.spawn_with_shell(&quot;netbeans&quot;) end)

))
</code></pre><br /><strong>6. Текстовые часы</strong><br /><br />С этим всё ок, данный виджет является стандартным, и создается просто<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Текстовые часы-календарь
-------------------------------------------------------------------------------
text_clock = awful.widget.textclock()
</code></pre><br />При нормально настроенной локализации часы будут отображаться по-русски.<br /><br /><strong>7. Список тэгов</strong><br /><br />Список тегов - панель, отображающая значки тегов, и обеспечивающая возможность переключения между тэгами, перебрасывание клиентов с тега на тэг с помощью мыши. Создается она использованием виджета taglist<br /><br /><pre><code>
-- Декларируем список тэгов
tag_list = {}

-- Задаем обработку кнопок мыши для списка тегов
tag_list.buttons = awful.util.table.join(

  -- Отобразить тэг
  awful.button( { }, left_button, awful.tag.viewonly ),
  -- Переместить клиент на данный тэг
  awful.button( { modkey }, left_button, awful.client.movetotag ),
  -- Отобразить выбранный тэг вместе с текущим
  awful.button( { }, right_button, awful.tag.viewtoggle ),
  -- Отобразить текущий клиент в текущем и выбранном тэге
  awful.button( { modkey }, right_button, awful.client.toggletag ),
  -- Следующий тэг
  awful.button( { }, plus_button, function(t) awful.tag.viewnext(awful.tag.getscreen(t)) end ),
   -- Предыдущий тэг
  awful.button( { }, minus_button, function(t) awful.tag.viewprev(awful.tag.getscreen(t)) end )

)
</code></pre><br />В приведенном коде декларируется таблица, содержащая список тэгов, а так же назначаются действия, выполняемые с тегами и клиентами по нажатию кнопок мыши. О создании экземпляров списка тэгов речь пока не идет, они будут созданы чуть позже.<br /><br /><strong>8. Список задач</strong><br /><br />Список задач - это набор прямоугольных кнопок на панели задач, обозначающих запущенные приложения (как-то так)<br /><br />Его тоже необходимо создать, вернее создать таблицу для хранения этого списка, а так же назначить действия при щелчках мышью на кнопках приложений<br /><br /><pre><code>
-- Декларируем список задач
task_list = {}

-- Задаем обработку кнопок мыши для списка задач
task_list.buttons = awful.util.table.join(

  -- Левая кнопка
  awful.button( { }, left_button,

  function(c)

    -- Если клиент имеет фокус - свернуть его
    if c == client.focus then

      c.minimized = true

    else -- Иначе, передать фокус на клиент не сворачивая

      c.minimized = false

      -- и ещё вот эта хрень, назначение которой мне пока не ясно
      if not c:isvisible() then

	awful.tag.viewonly(c: tags()[1])

      end

      client.focus = c
      c:raise()

    end

  end),

  -- Щелчок правой кнопкой - закрыть окно, как в Openbox c tint2
  awful.button( { }, right_button,

  function(c)

    c:kill()

  end),

  -- Сместить фокус на следующее окно
  awful.button( { }, plus_button,

  function()

    awful.client.focus.byidx(1)

    if client.focus then client.focus:raise() end

  end),

  -- Сместить фокус на предыдущее окно
  awful.button( { }, minus_button,

  function()

    awful.client.focus.byidx(-1)
    if client.focus then client.focus.raise() end

  end)
)
</code></pre><br /><strong>9. Собираем всё вместе</strong><br /><br />Настал момент когда можно собрать то что будет выполнять в нашем WM роль панели задач. Стандартный конфиг подразумевает использование и нескольких мониторов, поэтому имеется цикл, перебирающий все экраны и выполняющий действия по созданию панельки на каждом из них<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Создаем для каждого экрана нижнюю панель задач
-------------------------------------------------------------------------------

-- Цикл, перебирающий все экраны
for s = 1, screen.count() do

  -- Командная строка - виджет реализующий комендную строку на панели задач
  prompt_box[s] = awful.widget.prompt()

  -- Кнопка переключения макетов расположения окон
  layout_box[s] = awful.widget.layoutbox(s)

  -- декларируем для неё назначения кнопок мыши
  layout_box[s]:buttons(

    awful.util.table.join(

       -- Переключить на макет вперед
      awful.button( { }, left_button,	function() awful.layout.inc(layuots, 1)		end ),
      -- Переключить на макет назад
      awful.button( { }, right_button,	function() awful.layout.inc(layuots, -1)	end ),
      -- То же самое для боковых кнопок
      awful.button( { }, plus_button,	function() awful.layout.inc(layuots, 1)		end ),
      awful.button( { }, minus_button,	function() awful.layout.inc(layuots, -1)	end )

    )
  )

  -- Список тэгов: передаем номер экрана, и назначения кнопок мыши
  tag_list[s] = awful.widget.taglist(s, awful.widget.taglist.filter.all, tag_list.buttons)

  -- Список запущенных задач: передаем номер экрана, и назначения кнопок мыши
  task_list[s] = awful.widget.tasklist(s, awful.widget.tasklist.filter.currenttags, task_list.buttons)

  -- Контейнер для всех виджетов - наша панель задач
  -- расположенная внизу экрана номер s и шириной в 27 px
  main_wibox[s] = awful.wibox({ position = &quot;bottom&quot;, height = &quot;27&quot;, screen = s })

  -- Создаем виджеты расположенные слева  (левый блок виджетов)
  local left_layout = wibox.layout.fixed.horizontal()

  -- Добавляем на левый блок виджетов последовательно
  left_layout:add(launcher) -- лаунчер (кнопка главного меню)
  left_layout:add(tag_list[s]) -- список тэгов
  left_layout:add(prompt_box[s]) -- командную строку

  -- Кнопки приложений
  left_layout:add(firefox_button)
  left_layout:add(kopete_button)
  left_layout:add(vbox_button)
  left_layout:add(doublecmd_button)
  left_layout:add(maple_button)
  left_layout:add(netbeans_button)
  left_layout:add(fm_button)

  -- Создаем виджеты расположенные справа
  local right_layout = wibox.layout.fixed.horizontal()

  -- Системный трей делаем почему-то только на первом экране, взято из стандартного конфига
  if s == 1 then right_layout:add(wibox.widget.systray()) end

  -- Добавляем
  right_layout:add(text_clock) -- Текстовые часы
  right_layout:add(layout_box[s]) -- Кнопку переключения макетов

  -- Создаем контейнер для всей панели задач
  local layout = wibox.layout.align.horizontal()

  layout:set_left(left_layout)
  layout:set_middle(task_list[s])
  layout:set_right(right_layout)

  main_wibox[s]:set_widget(layout)

end
</code></pre><br />После добавления в конфиг данного кода панель появится на экране и будет функциональна.<br /><br /><strong>10. Оживляем рабочую среду: программируем мышь и клавиатуру</strong><br /><br />Необходимо определить назначения мыши для всей среды, горячие клавиши для всей среды, а так же назначения для клиентов - окон приложений<br /><br />Глобальных назначений мыши не так много оказалось в стандартном конфиге, их шерстить я не стал. Единственное что было добевлено - номера кнопок мыши поменялись на определенные выше глобальные переменные<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Назначения мыши
-------------------------------------------------------------------------------

root.buttons(

 awful.util.table.join(

   -- Правая кнопка - вызов меню
   awful.button( { }, right_button, function() main_menu:toggle() end ),
   -- Боковые кнопки - переключение тэгов по порядку
   awful.button( { }, plus_button, awful.tag.viewnext ),
   awful.button( { }, minus_button, awful.tag.viewprev )

 )
</code></pre><br />А вот назначений клавиш гораздо больше. Каждая комбинация добавляется вызовом<br /><br /><strong>awful.key({ &lt;клавиша-модификатор1&gt;, &lt;клавиша-модификатор2&gt;, &lt;функция-обработчик&gt;)</strong><br /><br />Таблица назначений клавиш формируется как результат выполнения функции<br /><br /><strong>&lt;имя таблицы&gt; = awful.util.table.join( комбинация 1, комбинация 2,..., комбинация n)</strong><br /><br />Кроме того, для себя заменил обозначения буквенных клавиш со строк латиницы на сканкоды, глобально определив их в переменных в начале конфига. Так удобнее.<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Назначения клавиатуры
-------------------------------------------------------------------------------

-- Глобальные назначения клавиш

globalkeys = awful.util.table.join(

  -- Переключение рабочих столов
  awful.key( { modkey,			}, key_Left, awful.tag.viewprev ),
  awful.key( { modkey,			}, key_Right, awful.tag.viewnext ),
  awful.key( { modkey,			}, key_Esc, awful.tag.history.restore ),

  -- Переключение фокуса клиентских окон

  awful.key( { modkey,			}, key_J,

  function()

      awful.client.focus.byidx(1)

      if client.focus then client.focus.raise() end

  end),

  awful.key( { modkey,			}, key_K,

  function()

      awful.client.focus.byidx(-1)

      if client.focus then client.focus.raise() end

  end),

  awful.key( { modkey,			}, key_W, function() main_menu:show() end ),

  -- Манипуляция областями экрана (перестановка клиентов)

  awful.key( { modkey,	&quot;Shift&quot;		}, key_J, function() awful.client.swap.byidx(1) end ),
  awful.key( { modkey,	&quot;Shift&quot;		}, key_K, function() awful.client.swap.byidx(-1) end ),
  awful.key( { modkey,	&quot;Control&quot;	}, key_J, function() awful.screen.focus_relative(1) end ),
  awful.key( { modkey,	&quot;Control&quot;	}, key_K, function() awful.screen.focus_relative(-1) end ),
  awful.key( { modkey,			}, key_U, awful.client.urgent.jumpto ),
  awful.key( { modkey,			}, key_Tab,

  function()

    awful.client.focus.history.previous()

    if client.focus then client.focus:raise() end

  end ),

  -- Запуск стандартных программ

  -- Терминал
  awful.key( { modkey,			}, key_Return, function() awful.util.spawn(terminal) end ),

  -- Командная строка
  awful.key( { modkey,			}, key_R, function() prompt_box[mouse.screen]:run() end ),

  awful.key( { modkey,			}, key_E, function() awful.util.spawn_with_shell(&quot;kate /home/maisvendoo/.config/awesome/rc.lua&quot;) end ),
  awful.key( { modkey,			}, key_I, function() awful.util.spawn_with_shell(&quot;firefox&quot;) end ),

  -- Перезапуск awesome
  awful.key( { modkey,	&quot;Control&quot;	}, key_R,

  function()

    -- Грохаем весь автозапуск
    for i = 0, num_cmd - 1 do

      local cmd = string.match(autostart_list[i], &quot;%a+&quot;)

      awful.util.spawn_with_shell(&quot;killall &quot; .. cmd)

    end

    -- Перезапускаем awesome
    awful.util.restart()

  end ),

  -- Утилита для изготовления скриншотов от KDE
  awful.key( { 				}, key_PrtScn,

  function()

    awful.util.spawn_with_shell(&quot;ksnapshot&quot;)

  end )
)
</code></pre><br />Аналогично определяем клавиатурные комбинации для клиентских окон<br /><br /><pre><code>
-- Клиентские назначения клавиш

clientkeys = awful.util.table.join(

  -- РАзвернуть на весь экран
  awful.key( { modkey,			}, key_F, 	function(c) c.fullscreen = not c.fullscreen end ),
  -- Закрыть окно
  awful.key( { modkey,	&quot;Shift&quot;		}, key_C, 	function(c) c:kill() end ),
  -- Перевести окно  в плавающий режим
  awful.key( { modkey,	&quot;Control&quot;	}, key_Space, 	awful.client.floating.toggle ),
  -- Сделать данной клиентское окно главным
  awful.key( { modkey,	&quot;Control&quot;	}, key_Return, 	function(c) c:swap( awful.client.getmaster() ) end ),
  -- Переместить окно на другой экран???
  awful.key( { modkey,			}, key_O, 	awful.client.movetoscreen ),
  -- Поместить окно поверх всех
  awful.key( { modkey,			}, key_T, 	function(c) c.ontop = not c.ontop end ),
  -- Минимизировать окно
  awful.key( { modkey,			}, key_N,

  function(c)

    c.minimized = true

  end ),

  -- Максимизировать окно
  awful.key( { modkey,			}, key_M,

  function(c)

    c.maximized_horizontal = not c.maximized_horizontal
    c.maximized_vertical = not c.maximized_vertical

  end )

)
</code></pre><br />Кроме того, к глобальным назначениям добавляются комбинации Mod4 + &lt;цифровая клавиша&gt;, путем перебора в цикле сканкодов цифровых клавиш и добавления в таблицу <strong>globalkeys</strong><br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Переключение тэгов и операции с клиентами и тэгами на каждом из экранов
-------------------------------------------------------------------------------

for i = 1, 9 do

  -- modkey + &lt;номер тэга&gt;
  -- Переключиться в выбранный тэг
  globalkeys = awful.util.table.join( globalkeys,

    awful.key({ modkey }, &quot;#&quot; .. i + 9,

    function()
	local screen = mouse.screen
	local tag = awful.tag.gettags(screen)[i]

	if tag then

	  awful.tag.viewonly(tag)

	end
    end),

    -- modkey + Ctrl + &lt;номер тэга&gt;
    -- Совместить выбранный тэг с текущим
    awful.key({ modkey, &quot;Control&quot; }, &quot;#&quot; .. i + 9,

    function()
	local screen = mouse.screen
	local tag = awful.tag.gettags(screen)[i]

	if tag then

	  awful.tag.viewtoggle(tag)

	end
    end),

    -- modkey + &lt;номер тэга&gt;
    -- Переместить клиент в фокусе на выьранный тэг
    awful.key({ modkey, &quot;Shift&quot; }, &quot;#&quot; .. i + 9,

    function()

	local tag = awful.tag.gettags(client.focus.screen)[i]

	if client.focus and tag then

	  awful.client.movetotag(tag)

	end
    end),

    -- modkey + &lt;номер тэга&gt;
    -- Переместить клиент в фокусе на выбранный тэг, оставив его и в текущем тэге
    awful.key({ modkey, &quot;Control&quot;, &quot;Shift&quot; }, &quot;#&quot; .. i + 9,

    function()

	local tag = awful.tag.gettags(client.focus.screen)[i]

	if client.focus and tag then

	  awful.client.toggletag(tag)

	end
    end)

  )

end
</code></pre><br />Ну и наконец мышиные назначения для клиентских окон<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Назначение кнопок мыши для каждого клиента
-------------------------------------------------------------------------------

clientbuttons = awful.util.table.join(

  -- Переключить фокус
  awful.button( { }, left_button, function(c) client.focus = c; c:raise() end),
  -- Переместить
  awful.button( { modkey }, left_button, awful.mouse.client.move),
  -- Изменить размер
  awful.button( { modkey }, right_button, awful.mouse.client.resize)

)
</code></pre><br />Далее просто активируем глобальные клавиатурные комбинации<br /><br /><pre><code>
-- Задать глобальные клавиши
root.keys(globalkeys)
</code></pre><br />Чтобы активировать клиентские назначения необходимо....<br /><br /><strong>11. Назначение ролей приложениям</strong><br /><br />Роли приложений определяют как каждое из них будет себя вести при запуске в awesome. В моем конфиге роли назначены так<br /><br /><pre><code>
-------------------------------------------------------------------------------
--	Роли приложений
-------------------------------------------------------------------------------

awful.rules.rules = {

  { -- Главная роль для всех приложений
    rule = { },

    properties = { border_width = beautiful.border_width,
		   border_color = beautiful.border_normal,
		   focus = awful.client.focus.filter,
		   keys = clientkeys,
		   buttons = clientbuttons}
  },

  -- Для &quot;копыта&quot;: быть в плавающем режиме, сохранять размеры полученные перед закрытием
  --
  {

    rule = { instance = &quot;kopete&quot; },
    properties = { floating = true, maximized_horizontal = false, maximized_vertical = false }
  },

  -- Запуск терминалов - только на 9м тэге
  {

    rule = { class = &quot;URxvt&quot;},
    properties = { tag = tags[1][9]}

  },

  -- Скриншотница: без рамки, плавающее окно, сохранять размеры
  {

    rule = { class = &quot;Ksnapshot&quot;},
    properties = { border_width = 0,
		   floating = true,
		   maximized_horizontal = false,
		   maximized_vertical = false }

  },

  -- &quot;Коньки&quot;: без рамки и плавать
  {

    rule = { class = &quot;Conky&quot;},
    properties = { border_width = 0, floating = true }

  }
}
</code></pre><br />У всех приложений должна быть одна быть прописана общая роль, определяющая поведение всех окон, и задающая клиентам назначения горячих клавиш и реакцию на мышь<br /><br /><pre><code>
{ -- Главная роль для всех приложений
    rule = { },

    properties = { border_width = beautiful.border_width, -- задается толщина рамки окна
		   border_color = beautiful.border_normal, -- цвет рамки окна не в фокусе
		   focus = awful.client.focus.filter, -- это что не знаю :(
		   keys = clientkeys, -- горячие клавиши
		   buttons = clientbuttons} -- кнопки мыши
  }
</code></pre><br />После добавления этой роли среда оживает, окна открываются, реагируют на заданные нажатия клавиш и мышь.<br /><br />Однако возникает необходимость для конкретного приложения определить особое поведение, скажем ICQ-клиент не совсем удобно запускать в тайлинге, равно как и некоторые другие приложения. Для каких-то приложений может понадобится запуск только в одном или нескольких выбранных тегах. Все это делается настройкой ролей для каждого приложения одновременно. Для этого необходимо указать в роли класс приложения, который можно получить так<br /><br />$ xprop | grep &#39;CLASS&#39;<br /><br />и далее щелкнув курсором мыши по нужному окну, в консольном выводе получим например такое<br /><br /><pre><code>
WM_CLASS(STRING) = &quot;urxvt&quot;, &quot;URxvt&quot;
</code></pre><br />Вторая строка URxvt это и есть искомый класс окна, а первое - свойство под название instance (не помню что это, чесло... :( )<br /><br />Теперь можно определить роль для терминалов быть только в 9м тэге<br /><br /><pre><code>
-- Запуск терминалов - только на 9м тэге
  {

    rule = { class = &quot;URxvt&quot;},
    properties = { tag = tags[1][9]}

  }
</code></pre><br />для ICQ-клиента быть плавающим окном с без максимизации окна<br /><br /><pre><code>
{

    rule = { instance = &quot;kopete&quot; },
    properties = { floating = true, maximized_horizontal = false, maximized_vertical = false }
  }
</code></pre><br /><strong>12. Сигналы</strong><br /><br />Определив роли перейдем к последнему - сигналам, определяющим поведение окна например при переводе фокуса на него, или при перемещении на него курсора мыши, и т.д.<br /><br />Для начала я ограничился действиями при переводе фокуса на окно и уводе фокуса с него<br /><br />Когда окно в фокусе перекрашиваем рамку и добавляем полоску заголовка окна с кнопками управления<br /><pre><code>
-- У окон в фокусе
client.connect_signal(&quot;focus&quot;,

   function(c)

    -- Раскрасить рамку соответствеено
    c.border_color = beautiful.border_focus

    -- Нарисовать заголовок окна

    -- Виджет слева от заголовка окна
    local left_layout = wibox.layout.fixed.horizontal()
    left_layout:add(awful.titlebar.widget.iconwidget(c))

    -- Виджеты в правой части заголовка окна
    local right_layout = wibox.layout.fixed.horizontal()
    right_layout:add(awful.titlebar.widget.floatingbutton(c))
    right_layout:add(awful.titlebar.widget.maximizedbutton(c))
    right_layout:add(awful.titlebar.widget.stickybutton(c))
    right_layout:add(awful.titlebar.widget.ontopbutton(c))
    right_layout:add(awful.titlebar.widget.closebutton(c))

    -- Заголовок окна
    local middle_layout = wibox.layout.flex.horizontal()
    local title = awful.titlebar.widget.titlewidget(c)
    title:set_align(&quot;center&quot;)
    middle_layout:add(title)

    -- Расставляем блоки виджетов по местам
    local layout = wibox.layout.align.horizontal()
    layout:set_left(left_layout)
    layout:set_right(right_layout)
    layout:set_middle(middle_layout)

    -- Добавляем их на заголовок окна
    awful.titlebar(c):set_widget(layout)
    -- Задаем размер заголовка окна
    awful.titlebar(c, {size = 15})

   end)
</code></pre><br />У окон не в фокусе - перекрашиваю рамку и убираю заголовок<br /><br /><pre><code>
client.connect_signal(&quot;unfocus&quot;,

   function(c)

    c.border_color = beautiful.border_normal
    awful.titlebar(c, {size = 0})

   end)
</code></pre><strong>Заключение</strong><br /><br />Выполнив всё это можно получить вполне работоспособную среду Awesome а заодно разобраться с основными механизмами настройки. На этом затянувшийся разбор завершаю :)
            
                
                    <div class="post-signature">
                        Да пребудет с нами Сила...!<br />CPU Intel Core i9 10900-KF/RAM DDR4 128 Gb/NVidia GForce GTX 1080 Ti Turbo 11Gb/SSD M2 512 Gb/HDD Seagate SATA3 2 Tb/HDD Toshiba 3Tb/HDD Toshiba 6Tb<br /><a href="http://rusrailsim.org/">http://rusrailsim.org</a>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111480"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maisvendoo/index.html">
                <span class="post-username">maisvendoo</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111480/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f4/dc/f4dc0d9e80c61dbb447753a201a2676d.png" alt="maisvendoo avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/maisvendoo/topics/index.html">
                    68
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maisvendoo/posts/index.html">
                    1142
                </a>
            </div>
            <div>
                Участник с: 10 октября 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>serkhay</em><br/>Но не проще ли использовать для этого более подходящие способы</blockquote>Проще, хотелось поупражнятся с Lua и заставить среду выполнять то что я хочу :)<br/><br/>Но первый пост переозаглавил.
            
                
                    <div class="post-signature">
                        Да пребудет с нами Сила...!<br />CPU Intel Core i9 10900-KF/RAM DDR4 128 Gb/NVidia GForce GTX 1080 Ti Turbo 11Gb/SSD M2 512 Gb/HDD Seagate SATA3 2 Tb/HDD Toshiba 3Tb/HDD Toshiba 6Tb<br /><a href="http://rusrailsim.org/">http://rusrailsim.org</a>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111522"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/brestows/index.html">
                <span class="post-username">brestows</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111522/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/19/9e19a4ed28262c682bb3ed4e8b4531d8.png" alt="brestows avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/brestows/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/brestows/posts/index.html">
                    189
                </a>
            </div>
            <div>
                Участник с: 06 апреля 2013
            </div>
            
        </td>
        <td class="post-content">
            вот чего хочу добиться, есть 3 приложения они стартуют вместе c системой, так вот надо сделать так что бы они располагались на одном теге, в котором кроме них ничего не будет, и надо что бы они располагались в определенном месте в самом теге. не подскажите как такое реализовать? И да рад что есть тема обсуждения awesome
            
                
                    <div class="post-signature">
                        kdeneur: <a href="https://github.com/brestows/kdeNeur">https://github.com/brestows/kdeNeur</a><br />awesome WM 3.5
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111523"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/serkhay/index.html">
                <span class="post-username">serkhay</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111523/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/serkhay/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/serkhay/posts/index.html">
                    304
                </a>
            </div>
            <div>
                Участник с: 06 июня 2012
            </div>
            
        </td>
        <td class="post-content">
            <strong>brestows</strong>, что вы имеете в виду под определенным местом? Одно из этих трех окон можно с помощью правил сделать главным, и тогда в обычном тайловом режиме оно будет слева, а два остальных окна будут делить оставшееся место
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111527"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/brestows/index.html">
                <span class="post-username">brestows</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111527/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/19/9e19a4ed28262c682bb3ed4e8b4531d8.png" alt="brestows avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/brestows/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/brestows/posts/index.html">
                    189
                </a>
            </div>
            <div>
                Участник с: 06 апреля 2013
            </div>
            
        </td>
        <td class="post-content">
            нет я хочу именно сделать так например что одно конкретное приложение располагалось справа и имело фиксированный размер например 100% по высоте и 25% по ширине, два остальных занимали бы по 50% по высоте и 100% из 75% оставшихся по ширине. Проблема в том что при запуске awesome Делить рабочее пространство между окнами по полам, и не удобно каждый раз изменять размер окон, пусть и горячими клавишами...
            
                
                    <div class="post-signature">
                        kdeneur: <a href="https://github.com/brestows/kdeNeur">https://github.com/brestows/kdeNeur</a><br />awesome WM 3.5
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111528"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/serkhay/index.html">
                <span class="post-username">serkhay</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111528/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="../../users/serkhay/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/serkhay/posts/index.html">
                    304
                </a>
            </div>
            <div>
                Участник с: 06 июня 2012
            </div>
            
        </td>
        <td class="post-content">
            Размер главного окна можно задать так в rc.lua<br/><div class="code"><pre>awful.tag.setproperty(tags[1][1], "mwfact", 0.25)</pre></div>Соответственно на первом таге первого экрана главное окно и будет занимать 100% высоты и 25% ширины.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111567"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/brestows/index.html">
                <span class="post-username">brestows</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111567/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/19/9e19a4ed28262c682bb3ed4e8b4531d8.png" alt="brestows avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/brestows/topics/index.html">
                    24
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/brestows/posts/index.html">
                    189
                </a>
            </div>
            <div>
                Участник с: 06 апреля 2013
            </div>
            
        </td>
        <td class="post-content">
            serkhay, спасибо! Буду дальше ковырять сей прекрасный WM
            
                
                    <div class="post-signature">
                        kdeneur: <a href="https://github.com/brestows/kdeNeur">https://github.com/brestows/kdeNeur</a><br />awesome WM 3.5
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-111662"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="../../users/maisvendoo/index.html">
                <span class="post-username">maisvendoo</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="../../post/111662/index.html">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/f4/dc/f4dc0d9e80c61dbb447753a201a2676d.png" alt="maisvendoo avatar" />
    
</div>

            <div>
                Темы:
                <a href="../../users/maisvendoo/topics/index.html">
                    68
                </a>
            </div>
            <div>
                Сообщения:
                <a href="../../users/maisvendoo/posts/index.html">
                    1142
                </a>
            </div>
            <div>
                Участник с: 10 октября 2012
            </div>
            
        </td>
        <td class="post-content">
            Дописал пост про <strong>rc.lua</strong>. Продолжу по мере расковыривания информации :)<br/><br/><blockquote><em>serkhay</em><br/>Самый простой, xinitrc, при этом программы при перезапуске дублироваться не будут.</blockquote><br/>При перезапуске awesome они просто вырубаются, если из добавить в .xinitrc. Может я что неверно сделал?<br/><br/><div class="code"><pre>
compton &amp;
urxvt -e mc &amp;
urxvt -e htop &amp;
urxvt &amp;
guake &amp;
sbxkb &amp;
conky -c ~/.conky/.conkyrc &amp;
conky -c ~/.conky/.conkyrc_lua_clock &amp;
conky -c ~/.conky/.conkyrc_updates &amp;
exec ck-launch-session dbus-launch awesome &amp;</pre></div><br/>И ещё один глобальный вопрос.<br/><br/>При переключении раскладке на русскую дефолтный awesome не реагирует ни на мышь ни на клавиатурные комбинации. С клавиатурой решилось логичным образом - сменил латинские строки в конфиге на скан-коды. А вот мышь при русской раскладке не работает никак с элементами интерфейса - не жмет кнопки, не закрывает окна. Стоит вернуть юэс инглиш - снова всё работает! Это баг или фича?<br/><br/>P.S.: Нарыл <a href="http://www.linux.org.ru/forum/desktop/9112231">решение</a><br/><br/><blockquote>Проблема решается комментированием соответствующих строк в /usr/share/X11/xkb/compat/basic (комманда выше давалась именно для этого):<br/><br/>group 2 = AltGr;<br/>group 3 = AltGr;<br/>group 4 = AltGr;<br/><br/>Вообще говоря, этот баг и есть костыль, подробности тут: <a href="https://bugs.freedesktop.org/show_bug.cgi?id=50611#c6">https://bugs.freedesktop.org/show_bug.cgi?id=50611#c6</a><br/></blockquote><br/>и, собсна такой вид указанного фйла<br/><br/><div class="code"><pre>
[maisvendoo@arch-host ~]$ cat /usr/share/X11/xkb/compat/basic
// Minimal set of symbol interpretations to provide
// reasonable default behavior (Num lock, shift and
// caps lock and mode switch) and set up the
// automatic updating of common keyboard LEDs.
default xkb_compatibility "basic"  {
    virtual_modifiers NumLock,AltGr;
    interpret.repeat= False;
    setMods.clearLocks= True;
    latchMods.clearLocks= True;
    latchMods.latchToLock= True;
    interpret Shift_Lock+AnyOf(Shift+Lock) {
	action= LockMods(modifiers=Shift);
    };
    interpret Any+Lock {
	action= LockMods(modifiers=Lock);
    };
    interpret Num_Lock+Any {
	virtualModifier= NumLock;
	action= LockMods(modifiers=NumLock);
    };
    interpret Mode_switch {
	useModMapMods= level1;
	virtualModifier= AltGr;
	action= SetGroup(group=+1);
    };
    interpret Any + Any {
	action= SetMods(modifiers=modMapMods);
    };
    //group 2 = AltGr;
    //group 3 = AltGr;
    //group 4 = AltGr;
    include "ledcaps"
    include "lednum"
    indicator "Shift Lock" {
	!allowExplicit;
	whichModState= Locked;
	modifiers= Shift;
    };
};</pre></div><br/>решает проблему
            
                
                    <div class="post-signature">
                        Да пребудет с нами Сила...!<br />CPU Intel Core i9 10900-KF/RAM DDR4 128 Gb/NVidia GForce GTX 1080 Ti Turbo 11Gb/SSD M2 512 Gb/HDD Seagate SATA3 2 Tb/HDD Toshiba 3Tb/HDD Toshiba 6Tb<br /><a href="http://rusrailsim.org/">http://rusrailsim.org</a>
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="index2679.html?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index4658.html?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index9ba9.html?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdb0.html?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexaf4d.html?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexc575.html?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index235c.html?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="indexfdfa.html?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index0b08.html?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index1448.html?page=10">10</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="index42a7.html?page=16">16</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="index5c43.html?page=17">17</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="index4658.html?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="../../../accounts/register/index.html">Зарегистрироваться</a> или <a href="../../../accounts/login/index9978.html?next=/forum/topic/11748/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

</body>

<!-- Mirrored from archlinux.org.ru/forum/topic/11748/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Sep 2022 04:10:57 GMT -->
</html>
