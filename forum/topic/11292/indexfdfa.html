


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Тормоза из ниоткуда
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    

    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/5/">Разное</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/4/">/dev/null</a> <span class="divider">/</span></li>
            
        
        
            <li>Тормоза из ниоткуда</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>Тормоза из ниоткуда</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=7" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=8">8 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=9">9</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=9" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-109983"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/109983/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Имеется одна неплохая утилита <a href="http://habrahabr.ru/post/140010/">atop</a> (точнее сказать три утилиты в  одной).<br/>Можешь помониторить ей. У нее имеется один хороший плюс - она создает лог, что исключает необходимость пялиться в монитор и дает возможность посмотреть прошлую историю.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110031"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/sergo13p/">
                <span class="post-username">sergo13p</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110031/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/sergo13p/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/sergo13p/posts/">
                    11
                </a>
            </div>
            <div>
                Участник с: 31 декабря 2012
            </div>
            
        </td>
        <td class="post-content">
            У меня тоже люто тормозит система. Вроде нашёл свою причину: chromium за несколько секунд выжирал 4Г памяти. Установил Хром - пока htop показывает что использовано памяти 1,8Г. С Firefox используется 1,4Г. Буду наблюдать дальше
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110046"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110046/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Небольшое отступление насчет памяти, потребляемой запущенными процессами (пришлось достать свои старые записи)<br/>Чтобы точно определить сколькой и какой памяти отжирает процесс необходимо использовать адресную карту памяти. А утилиты типа ps, top, htop и другие им подобные  + к этому всевозможные скрипты для определения памяти дают очень приближенную картину и не отображают реально занимаемую процессом память. Основной их плюс — выдача информации в режиме реального иремени.<br/>Реально занимаемая процессом память это память, которую занимает процесс без учета памяти, занимаемой разделяемыми библиотеками.<br/><u>PS......не совсем точно - нужно смотреть загружены или не загружены разделяемые библиотеки (см. ниже)<br/></u><br/> Реально занимаемую память лучше смотреть по карте памяти — это так называемый объем памяти приватного адресного пространства.<br/>Ниже приведен выхлоп разных утилит для firefox (открыто 7 влладок)<br/>1) ps aux  .....    1152  4.1  4.9 <strong>788548..... 151472 </strong>…...... /usr/lib/firefox/firefox<br/><br/>2) top ….......…. 1152  2.3  5.2 <strong>781008....158468</strong> …....../usr/lib/firefox/firefox<br/>3) htop ….......... 1152 …......... <strong>762M ...154M</strong>   …......./usr/lib/firefox/firefox<br/>4) <strong>pmap</strong> (запуск pmap -d 1152) — информацию берет из карты памяти (лишнее убрал)<br/>1152:   /usr/lib/firefox/firefox<br/>08048000     108 r-x-- 0000000000000000 008:00003 firefox<br/>…..............................................................................................<br/>9f13d000     <u>316 r-x-- 0000000000000000 008:00003 libFLAC.so.8.2.0</u><br/>9f18c000      <u>4 rw--- 000000000004e000 008:00003 libFLAC.so.8.2.0</u><br/>…............................................................................................<br/><strong>mapped: 781004K    writeable/private: 391088K    shared: 140916K</strong><br/>Примечание — большинство библиотек упоминается дважды (иногда может и больше) - значение памяти, реально занимаемое процессом без учета памяти, занимаемой разделяемыми библиотеками, имеет режим доступа "rw---"<br/>В последней строке самая нужная и важная информация<br/>- <strong>mapped: 781004K</strong> - общее количество памяти, отведенной под файлы (то есть память которую отвела процессу система, как будто бы он работает один)<br/>-  <strong>writeable/private: 391088K</strong> - общее количество приватного адресного пространства (реально занятая процессом память)<br/>- <strong>shared: 140916K</strong>  - общее количество адресного пространства, которое firefox использует совместно с другими процессами.<br/><strong>Реально занимаемая firefox память составляет  391088K</strong> (эту цифру ни одна из утилит не показывает).<br/><u>PS......это если разделяемые библиотеки загружены, а если не загружены, то  <strong>+140916K</strong> - <strong>итого 532004К</strong>  </u><br/><br/>И как вывод, чтобы сократить отжирание памяти, нужно сокращать одновременный запуск разнотипных процессов, использующих разнотипные  библиотеки (почуствовал на себе, когда используя Gnome 2 запускал для учета трафика и т.п. KDE- ый NEMO). Проверил pmap и пришлось отказаться от части чужеродных программ.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110056"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Natrio/">
                <span class="post-username">Natrio</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110056/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Natrio/topics/">
                    47
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Natrio/posts/">
                    4763
                </a>
            </div>
            <div>
                Участник с: 08 января 2011
            </div>
            
        </td>
        <td class="post-content">
            <strong>vasek</strong>, как насчёт этого:<br/><div class="code"><pre>$ pmap -d `pidof firefox`|tail -n1
mapped: 815020K    writeable/private: 551720K    shared: 1244K
$ free
             total       used       free     shared    buffers     cached
Mem:       1029260     836140     193120          0      60708     307172
-/+ buffers/cache:     468260     561000
Swap:      1060252          0    1060252</pre></div>После выгрузки firefox: <div class="code"><pre>$ free
             total       used       free     shared    buffers     cached
Mem:       1029260     586940     442320          0      60984     312116
-/+ buffers/cache:     213840     815420
Swap:      1060252          0    1060252</pre></div>Смотрим, насколько уменьшилась после выгрузки firefox занятая память без учёта буферов и кэша.<br/>815420 - 561000 = <strong>254420</strong> , что примерно в два раза меньше той цифры, что показывает pmap. Мало того, эта цифра вообще больше общего количества занятой памяти в тот момент :)<br/><br/><em>P.S.</em><br/>Что касается knemo, то вся память, занимаемая им, вместе с kde-шными библиотеками и демонами теряется на фоне объёмов, отжираемых огнелисом, так что экономия на отказе от "разнородных программ" выходит весьма сомнительная.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110076"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110076/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Заранее извиняюсь за длинный ответ.<br/><strong>Natrio</strong>, читая в свое время о вопросах памяти, я понял одно, что это темная дыра — чем больше читаешь и чем больше узнаешь, тем все больше не понимаешь.  Натыкаешься на совершенно новые вещи о которых никогда и неслышал, а, главное, находятся спецы, которые объсняют все возникающие противоречия. Так что дискутировать здесь можно до бесконечности — я буду приводить свои мнения, ты свои и это никогда не кончится.<br/>Так что спорить я не буду.<br/>Приведу для примера несколько моментов, которые для меня были неожиданностью.<br/>1. Кэш. Всем на компьютере управляет операционная система, которая по своему усмотрению влазит в дела по распределению оперативной памяти. И как только часть памяти освобождается, она постепенно заполняется кешем. Но как только запущенным программам понадобится оперативная память, то кеш сразу ее освобождает. И не стоит определять сколько памяти занято и сколько свободно (это ничего не дает) - оперативная память будет освобождена по первому требованию. Именно по этому многие спецы считают, что оперативной памяти нужно ставить как можно больше (то есть ее никогда мало не бывает). И они утверждают, что быстродействие компьютера, во многом, зависит именно от этого. Ну а когда ее не слишком много, тут и начинаешь выскребать, как говорится, по сусекам.<br/>2. Это вообще для меня нонсенс. Если посмотреть внимательно карту памяти некоторых процессов, например, тех же браузеров, то можно увидеть вот такую штуку (это вывод pmap для firefox)<br/>acce3000    8192 rw--- 0000000000000000 000:00000   [ <strong>anon</strong> ]<br/>ad4e3000       4 ----- 0000000000000000 000:00000   [ <strong>anon</strong> ]<br/>ad4e4000   12288 rw--- 0000000000000000 000:00000   [ <strong>anon</strong> ]<br/>ae0e4000       4 ----- 0000000000000000 000:00000   [ <strong>anon</strong> ]<br/>ae0e5000    8192 rw--- 0000000000000000 000:00000   [<strong> anon</strong> ]<br/>ae8e5000       4 ----- 0000000000000000 000:00000   [<strong> anon</strong> ]<br/>ae8e6000    8192 rw--- 0000000000000000 000:00000   [ <strong>anon</strong> ]<br/>И таких строк бывает иногда много (объем памяти, занимаемой ими, то же большой).<br/>Простым языком — это виртуальная память, запрошенная процессом у ОС. Процесс запросил память, ядро ему её выделило, если ресурсы позволяют.<br/>Но, как некоторые считают, это может использоваться и как видеопамять - X  отображают её в своё адресное пространство (вот это я точно не понимаю) и хранят там всякую ерунду, например, взяли для фона какую то картинку, вот она и хранится в памяти Х, а главное, что эта память потом не возвращается или же возвращается не полностью. Картинка приведена только для примера, а основными причинами, как пишут, может быть:<br/>1. Вообще-то время жизни графического контекста напрямую не связано со временем жизни процесса, который его создал (очевидный пример: отрисовка X клиента, выполняющегося на удалённой машине). Так что чего-то заведомо плохого в таком поведении нет.<br/>2. Это может быть глюк в клиентской программе, например, она "забывает" освободить графический контекст.<br/>3. Это может быть глюк в самом Xorg.<br/>4. Это может быть глюк в драйвере видеокарты.<br/><br/>Ну и таких нюансов очень много. Еще раз повторюсь, спорить я не буду — правы будут все, смотря с какой стороны к этому подходить.<br/>Ну и для желающих, поэкспериментировать и узнать куда утекает память — имеются некоторые нестандартные <a href="https://www.opennet.ru/base/dev/memory_leak_debug.txt.html">утилиты</a> - например, valgrind и другие.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110083"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110083/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            Забыл написать вывод - почему я больше доверяю pmap - все таки это карта памяти, которая никого не обманывает и дает реальную картину размещения  процесса в  адрессном пространстве памяти (указаны конкретные адреса ячеек памяти). А уж как эту информацию интерпретировать - дело каждого.<br/><br/>PS.....При этом я имею информацию о совместной (с другими процесами) памяти + информацию о наличии <strong>anon</strong>, и предупрежден чем мне это может грозить.
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110093"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Natrio/">
                <span class="post-username">Natrio</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110093/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Natrio/topics/">
                    47
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Natrio/posts/">
                    4763
                </a>
            </div>
            <div>
                Участник с: 08 января 2011
            </div>
            
        </td>
        <td class="post-content">
            Всё так, только не надо забывать, что адресное пространство само по себе виртуально, то есть оно не равно (а фактически обычно намного больше) физической памяти.<br/>И потом, я не спорю с выводом pmap – я просто пытаюсь его интерпретировать не исходя из комментариев, а сопоставляя с глобальными параметрами памяти, которые выдаёт free, и беру оттуда не "используемую" вообще память, а за вычетом того самого кэша, то есть памяти, которая УЖЕ НЕ принадлежит процессам.<br/><br/>Так вот по-моему,  <strong>writeable/private</strong> в выводе pmap это одна из статей именно ВЫДЕЛЕННОЙ процессу памяти, а разницу между выделенным адресным пространством и физически занятой памятью, думаю, объяснять не надо :)<br/>Соответственно, <strong>mapped</strong> это вся выделенная процессу память, а <strong>writeable/private</strong> – та часть выделенного адресного пространства, которая доступна этому и только этому процессу, в том числе на запись. А уж какая часть её есть физическая память, а какая нет – большой вопрос :)<br/><br/>С тем, что памяти чем больше тем лучше я тоже не спорю, потому что больше памяти – больше кэша, меньше повторных загрузок с диска, даже если не используется свап. В частности, когда нынче модуль памяти меньше 4х гиг уже не сыщешь в магазинах, проблема "разнородных программ" становится всё менее и менее актуальной.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110098"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vasek/">
                <span class="post-username">vasek</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110098/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vasek/topics/">
                    48
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vasek/posts/">
                    11340
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2013
            </div>
            
        </td>
        <td class="post-content">
            <strong>Natrio</strong> со всем согласен.<br/>Спасибо за дискуссию, в ходе ее многое для себя вспомнил и прояснил.<br/><br/>
            
                
                    <div class="post-signature">
                        Ошибки не исчезают с опытом - они просто умнеют
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-110102"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/mehanoid/">
                <span class="post-username">mehanoid</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/110102/">#</a>
            9 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/ba/47/ba47ca8ed8adb93bc487a76a24bdc5c6.png" alt="mehanoid avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/mehanoid/topics/">
                    28
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/mehanoid/posts/">
                    382
                </a>
            </div>
            <div>
                Участник с: 27 апреля 2010
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>marlock</em><br/>Nepomuk отключен?</blockquote>Отключен, да<br/><blockquote><em>marlock</em><br/>Ещё попробовал бы с помощью cpupower выставить performance пресет для процессора.<br/></blockquote>Я пробовал вообще отключить изменение частоты. Позавчера всё равно тормоза словил, хотя тормозило немного поменьше. Ну при максимальной частоте это вполне ожидаемо.<br/><blockquote><em>marlock</em><br/>И ещё - скинь сюда вывод smartctl -s on -a /dev/sda<br/>Может быть проблема в харде.</blockquote>Вроде говорит, что ошибок нет...<br/><a href="https://pastebin.com/xpX2aC0h">ошибок нет</a><br/><br/><blockquote><em>vanoc</em><br/>Течет plasma-desktop, а именно число открытых декрипторов файлов. Наглядно это можно увидеть выполнив <em>sysctl fs.file-nr</em>. Сама по себе plasma-desktop течет довольно медленно, поэтому, как правило, утечка не видна, НО если начать копировать файлы на флешку или еще куда-нить, то можно заметить как число очень быстро побежит <em>watch cat /proc/sys/fs/file-nr</em>.<br/></blockquote>Попробовал покопировать и последить, у себя такого не заметил. Во время тормозов пока не представилось возможности посмотреть.<br/><br/>А так, поставил временно xfce, и за вчера и сегодня тормозов не было. Может быть, действительно в кедах дело. Хотя не стоит делать поспешных выводов.<br/>В общем, пока надо понаблюдать. Потом отпишусь о результатах. Спасибо большое всем за помощь!
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-114121"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/mehanoid/">
                <span class="post-username">mehanoid</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/114121/">#</a>
            9 лет, 2 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/ba/47/ba47ca8ed8adb93bc487a76a24bdc5c6.png" alt="mehanoid avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/mehanoid/topics/">
                    28
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/mehanoid/posts/">
                    382
                </a>
            </div>
            <div>
                Участник с: 27 апреля 2010
            </div>
            
        </td>
        <td class="post-content">
            Итак, продолжение истории.<br/>Под xfce тормоза тоже замечены были, так что дело не в кедах точно.<br/><br/>Дошли у меня руки до того, чтобы поставить систему с нуля. Даже это не помогло =(<br/>В новую систему старые конфиги не копировал (разве что zsh). Особо сервисов в систему тоже не ставил никаких (разве что Network Manager и samba). А что ещё могло общего с предыдущей системой остаться? Ну видеодрайвер. Попробовал свободный поставить - то же самое.<br/><br/>Зато я выяснил, при каких условиях эти тормоза возникают, как оказалось, не в случайное время. Последовательность действий такая:<br/>1. Какое-то время ноут должен поработать от батареи<br/>2. Подключаем ноут к сети<br/>3. Немного ждём<br/>4. Profit!<br/>Видимо я раньше не мог этого обнаружить из-за того, что тормоза не сразу после подключения к сети начинаются. Вначале еле заметные тормоза появляются, а потом уже резко начинает всё тормозить.<br/>Под убунтой такая же последовательность действий никаких тормозов не вызывает.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=7" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=4">4</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=8">8 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=9">9</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=9" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/11292/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747ad885d9619d90',m:'OjQxmpcVwe4_cj.48_HE0VMuJXRS0ct13Vb6m_yjTrI-1662673261-0-AeYI26ncqzHoW+FWu/cKg6wYM26FaVlIOsVJHF1O7Q56GK9JWHG6+/NsUiT54VKGuRN4JVy8bwKOGsUmrnKqmDb6rbQOsjsqrnut51khk6gnQRGyH25B2LduXABg98UTvfq7YYeILFdg2LaHJLdm5bM=',s:[0xc17ebb0db7,0x74d31ee988],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
