


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        [решено] nvidia+sddm -&gt; черный экран
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    

    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/jquery.formset.min.js"></script>

</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
        
            
                <li><a href="/forum/category/2/">Поддержка пользователей</a> <span class="divider">/</span></li>
            
                <li><a href="/forum/forum/9/">Новичкам в Arch Linux</a> <span class="divider">/</span></li>
            
        
        
            <li>[решено] nvidia+sddm -&gt; черный экран</li>
        
    
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    
    <div class="topic">
        <h1>[решено] nvidia+sddm -&gt; черный экран</h1>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        <div class="posts">
            
            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175816"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/zyamilon/">
                <span class="post-username">zyamilon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175816/">#</a>
            5 лет, 10 месяцев назад
            
                (отредактировано
                
                    5 лет, 10 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/05/38/0538daba4df4f04651565001ab83f69b.png" alt="zyamilon avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/zyamilon/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/zyamilon/posts/">
                    68
                </a>
            </div>
            <div>
                Участник с: 02 апреля 2012
            </div>
            
        </td>
        <td class="post-content">
            Доброго времени суток!<br />После недавнего обновления отвалился gui и куда копать я уже не знаю.<br /><br />core-i3 550, GeForce GT 520<br /><pre><code>
$ uname -a
Linux ares 4.8.4-1-ARCH #1 SMP PREEMPT Sat Oct 22 18:26:57 CEST 2016 x86_64 GNU/Linux</code></pre><pre><code>$ pacman -Qi nvidia nvidia-libgl nvidia-utils
Название             : nvidia
Версия               : 370.28-2
Описание             : NVIDIA drivers for linux
Архитектура          : x86_64
URL                  : <a href="https://www.nvidia.com/">http://www.nvidia.com/</a>
Лицензии             : custom
Группы               : Нет
Предоставляет        : Нет
Зависит от           : linux&gt;=4.8  linux&lt;4.9  nvidia-utils=370.28  libgl
Доп. зависимости     : Нет
Требуется            : Нет
Опционально для      : Нет
Конфликтует с        : Нет
Заменяет             : Нет
Установленный размер : 6,96 MiB
Сборщик              : Tobias Powalowski &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7d090d120a1c3d1c0f1e15111413080553120f1a">[email&#160;protected]</a>&gt;
Дата сборки          : Ср 05 окт 2016 15:23:23
Дата установки       : Вс 23 окт 2016 19:44:39
Причина установки    : Явно установлен
Установочный скрипт  : Yes
Проверен             : SHA-256

Название             : nvidia-libgl
Версия               : 370.28-1
Описание             : NVIDIA drivers libraries symlinks
Архитектура          : x86_64
URL                  : <a href="https://www.nvidia.com/">http://www.nvidia.com/</a>
Лицензии             : custom
Группы               : Нет
Предоставляет        : libgl  libegl  libgles
Зависит от           : nvidia-utils
Доп. зависимости     : Нет
Требуется            : cairo  freeglut  glu  libva  mesa-demos  nvidia  qt5-base  sdl2  xorg-server
Опционально для      : Нет
Конфликтует с        : libgl  libegl  libgles
Заменяет             : Нет
Установленный размер : 33,00 KiB
Сборщик              : Sven-Hendrik Haase &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="77041f371b02030d1f161604125914181a">[email&#160;protected]</a>&gt;
Дата сборки          : Чт 08 сен 2016 21:26:43
Дата установки       : Вс 23 окт 2016 19:44:37
Причина установки    : Установлен как зависимость другого пакета
Установочный скрипт  : No
Проверен             : SHA-256

Название             : nvidia-utils
Версия               : 370.28-1
Описание             : NVIDIA drivers utilities
Архитектура          : x86_64
URL                  : <a href="https://www.nvidia.com/">http://www.nvidia.com/</a>
Лицензии             : custom
Группы               : Нет
Предоставляет        : Нет
Зависит от           : xorg-server  libglvnd
Доп. зависимости     : nvidia-settings: configuration tool
                       xorg-server-devel: nvidia-xconfig
                       opencl-nvidia: OpenCL support
Требуется            : nvidia  nvidia-libgl
Опционально для      : Нет
Конфликтует с        : Нет
Заменяет             : Нет
Установленный размер : 100,56 MiB
Сборщик              : Sven-Hendrik Haase &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="45362d052930313f2d242436206b262a28">[email&#160;protected]</a>&gt;
Дата сборки          : Чт 08 сен 2016 21:26:08
Дата установки       : Вс 23 окт 2016 19:44:39
Причина установки    : Установлен как зависимость другого пакета
Установочный скрипт  : Yes
Проверен             : SHA-256</code></pre><pre><code>$ lsmod | grep nvi
nvidia_drm             24576  0
nvidia_modeset        770048  1 nvidia_drm
nvidia              11866112  1 nvidia_modeset
drm                   294912  2 nvidia_drm</code></pre><pre><code>
$ lspci | grep VGA
05:00.0 VGA compatible controller: NVIDIA Corporation GF119 [GeForce GT 520] (rev a1)</code></pre><br />Т.е. последнее ядро, 370.28 драйвер.<br />Модуль ядра загружается, nvidia-modprobe также работает. При запуске sddm черный экран.<br />При запуске xorg из tty2 <strong>появляется графический логотип nvidia</strong> в нормальном разрешении, а потом снова черный экран, даже курсора нет.<br />Приходится убивать через &quot;killall Xorg&quot;.<br /><br />Был конфиг xorg.conf, сделанный через nvidia-xconfig. Удалил его - поведение тоже самое, только лог вырос.<br />В логах причем какой-то явной ругани не вижу...<br /><br />Если запускать openbox-session, он пишет &quot;невозможно открыть экран из переменной окружения DISPLAY&quot;.<br /><br />В общем и драйвер грузится, и монитор работает, и логотип выводится, и все должно работать. Но нет, шиш. В чем может быть проблема? :)<br /><br />Лог xorg:<br /><a href="https://dl.dropboxusercontent.com/u/4360324/trash/nvid/Xorg.0.log">https://dl.dropboxusercontent.com/u/4360324/trash/nvid/Xorg.0.log</a><br /><br />Лог sddm:<br /><pre><code>-- Reboot --
окт 23 19:46:22 ares systemd[1]: Started Simple Desktop Display Manager.
окт 23 19:46:24 ares sddm[697]: Initializing...
окт 23 19:46:24 ares sddm[697]: Starting...
окт 23 19:46:24 ares sddm[697]: Adding new display on vt 1 ...
окт 23 19:46:24 ares sddm[697]: Display server starting...
окт 23 19:46:24 ares sddm[697]: Running: /usr/bin/X -nolisten tcp -auth /var/run/sddm/{dbc1c60c-f30d-4d92-8dca-fc4c7175db61} -background none -noreset -displayfd 18 vt1
окт 23 19:46:27 ares sddm[697]: Running display setup script  &quot;/usr/share/sddm/scripts/Xsetup&quot;
окт 23 19:46:27 ares sddm[697]: Display server started.
окт 23 19:46:27 ares sddm[697]: Socket server starting...
окт 23 19:46:27 ares sddm[697]: Socket server started.
окт 23 19:46:27 ares sddm[697]: The configured theme &quot;archlinux&quot; doesn&#39;t exist, using the embedded theme instead
окт 23 19:46:27 ares sddm[697]: Greeter starting...
окт 23 19:46:27 ares sddm[697]: Adding cookie to &quot;/var/run/sddm/{dbc1c60c-f30d-4d92-8dca-fc4c7175db61}&quot;
окт 23 19:46:27 ares sddm[697]: sh: /usr/bin/xauth: Нет такого файла или каталога
окт 23 19:46:27 ares sddm-helper[766]: [PAM] Starting...
окт 23 19:46:27 ares sddm-helper[766]: [PAM] Authenticating...
окт 23 19:46:27 ares sddm-helper[766]: [PAM] returning.
окт 23 19:46:27 ares sddm-helper[766]: pam_unix(sddm-greeter:session): session opened for user sddm by (uid=0)
окт 23 19:46:38 ares sddm[697]: Greeter session started successfully
окт 23 19:46:39 ares sddm[697]: Message received from greeter: Connect</code></pre>
            
                
                    <div class="post-signature">
                        You will release your life<br />Joining with the god damned world of the dead and the lonely.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175821"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/RusWolf/">
                <span class="post-username">RusWolf</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175821/">#</a>
            5 лет, 10 месяцев назад
            
                (отредактировано
                
                    5 лет, 10 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8a/00/8a00073bdfb852ab8504f1e6d4c044f4.png" alt="RusWolf avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/RusWolf/topics/">
                    11
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/RusWolf/posts/">
                    2395
                </a>
            </div>
            <div>
                Участник с: 16 июля 2016
            </div>
            
        </td>
        <td class="post-content">
            <br /><br /><blockquote><em>zyamilon</em><br><pre><code>$ lsmod | grep nvi<br />nvidia_drm             24576  0<br />nvidia_modeset        770048  1 nvidia_drm<br />nvidia              11866112  1 nvidia_modeset<br />drm                   294912  2 nvidia_drm</code></pre></blockquote>модуль nvidia_drm загружен, но не используется.<br /><br /><pre><code>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="35425a5953755447565d18425a5953">[email&#160;protected]</a> ~]$ lsmod | grep nvi
nvidia_drm             24576  1
nvidia_modeset        770048  5 nvidia_drm
drm                   294912  3 nvidia_drm
nvidia              11866112  75 nvidia_modeset
</code></pre><br />При <strong>sudo mkinitcpio -p linux</strong> на модуль nvidia нет ругани?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175824"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/zyamilon/">
                <span class="post-username">zyamilon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175824/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/05/38/0538daba4df4f04651565001ab83f69b.png" alt="zyamilon avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/zyamilon/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/zyamilon/posts/">
                    68
                </a>
            </div>
            <div>
                Участник с: 02 апреля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>RusWolf</em><br>модуль nvidia_drm загружен, но не используется.</blockquote>Его уже во время вечерних тестов загружал руками (мало ли).<br /><blockquote>При <strong>sudo mkinitcpio -p linux</strong> на модуль nvidia нет ругани?</blockquote>Неа, все прекрано. Точнее сказать, про него вообще нет упоминаний.<br /><pre><code>==&gt; Building image from preset: /etc/mkinitcpio.d/linux.preset: &#39;default&#39;
  -&gt; -k /boot/vmlinuz-linux -c /etc/mkinitcpio.conf -g /boot/initramfs-linux.img
==&gt; Starting build: 4.8.4-1-ARCH
  -&gt; Running build hook: [autodetect]
  -&gt; Running build hook: [base]
  -&gt; Running build hook: [udev]
  -&gt; Running build hook: [modconf]
  -&gt; Running build hook: [block]
  -&gt; Running build hook: [mdadm_udev]
Custom /etc/mdadm.conf file will be used in initramfs for assembling arrays.
  -&gt; Running build hook: [lvm2]
  -&gt; Running build hook: [filesystems]
  -&gt; Running build hook: [keyboard]
  -&gt; Running build hook: [fsck]
==&gt; Generating module dependencies
==&gt; Creating gzip-compressed initcpio image: /boot/initramfs-linux.img
==&gt; Image generation successful
</code></pre>Кстати, то, что там отличаются версии nvidia и nvidia-libgl (370.28-2 / 370.28-1) тоже не влияет - проблема возникла еще при одинаковых версиях.
            
                
                    <div class="post-signature">
                        You will release your life<br />Joining with the god damned world of the dead and the lonely.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175825"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/RusWolf/">
                <span class="post-username">RusWolf</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175825/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/8a/00/8a00073bdfb852ab8504f1e6d4c044f4.png" alt="RusWolf avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/RusWolf/topics/">
                    11
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/RusWolf/posts/">
                    2395
                </a>
            </div>
            <div>
                Участник с: 16 июля 2016
            </div>
            
        </td>
        <td class="post-content">
            <strong>zyamilon</strong>, попробуй удалить драйвер nvidia и запустить с nouveau.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175857"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/zyamilon/">
                <span class="post-username">zyamilon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175857/">#</a>
            5 лет, 10 месяцев назад
            
                (отредактировано
                
                    5 лет, 10 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/05/38/0538daba4df4f04651565001ab83f69b.png" alt="zyamilon avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/zyamilon/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/zyamilon/posts/">
                    68
                </a>
            </div>
            <div>
                Участник с: 02 апреля 2012
            </div>
            
        </td>
        <td class="post-content">
            Блиин... только заметил, что тему создал не в разделе &quot;для новичков&quot;, а в новостях. Ребят, извините, я случайно. Перенесите пожалуйста :)<br /><blockquote><em>RusWolf</em><br><strong>zyamilon</strong>, попробуй удалить драйвер nvidia и запустить с nouveau.</blockquote>Учитывая, что подобная проблема случается раз в год/пол года, как раз таки подумываю над такими вариантами:<br />- попробовать lts-ядро и lts-драйвер<br />- nouveau (как у него со стабильностью и производительностью?)<br />- попробовать последние драйверы из aur<br />- откатить драйвер+ядро (муторно)
            
                
                    <div class="post-signature">
                        You will release your life<br />Joining with the god damned world of the dead and the lonely.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175858"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/Aivar/">
                <span class="post-username">Aivar</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175858/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/Aivar/topics/">
                    4
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/Aivar/posts/">
                    6897
                </a>
            </div>
            <div>
                Участник с: 17 февраля 2011
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>RusWolf</em><br>попробуй удалить драйвер nvidia и запустить с nouveau.</blockquote><a href="https://wiki.archlinux.org/index.php/nouveau#Keep_NVIDIA_driver_installed">Не удаляя</a>.<br /><br /><blockquote><em>zyamilon</em><br>- попробовать lts-ядро и lts-драйвер</blockquote>Почему нет?<br /><br /><blockquote><em>zyamilon</em><br>- nouveau (как у него со стабильностью и производительностью?)</blockquote>Со стабильностью нормально, с производительностью похуже чем с блобом.<br /><br /><blockquote><em>zyamilon</em><br>- попробовать последние драйверы из aur</blockquote>Пробовать можно.<br /><br /><blockquote><em>zyamilon</em><br>- откатить драйвер+ядро (муторно)</blockquote>Ничего муторного.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175860"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vadik/">
                <span class="post-username">vadik</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175860/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vadik/topics/">
                    55
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vadik/posts/">
                    5395
                </a>
            </div>
            <div>
                Участник с: 17 августа 2009
            </div>
            
        </td>
        <td class="post-content">
            <strong>zyamilon</strong>, помимо lts (что само по себе полезно) - попробуйте вообще не запускать графического окружения. Т.е. загрузиться в голую консоль.<br />Как один из кучи вариантов - вывод изображения идет не на тот видеовыход, куда подключен монитор. До загрузки Х-ов изображение как бы передается на все видеовыходы видеокарты, а после старта Х-ов выбирается неправильный видеовыход.<br />И еще, сейчас настроки Х-ов лежат в <em>/etc/X11/xorg.conf.d/</em>. Смотрите что там.<br />
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175862"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/zyamilon/">
                <span class="post-username">zyamilon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175862/">#</a>
            5 лет, 10 месяцев назад
            
                (отредактировано
                
                    5 лет, 10 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/05/38/0538daba4df4f04651565001ab83f69b.png" alt="zyamilon avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/zyamilon/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/zyamilon/posts/">
                    68
                </a>
            </div>
            <div>
                Участник с: 02 апреля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vadik</em><br>попробуйте вообще не запускать графического окружения</blockquote>О, мысль интересная!<br />Сделал<br /><pre><code>$ sudo systemctl disable sddm</code></pre>перезагрузился, попал в tty1. Но увы, при старте Xorg все тоже самое - переключение режима, логотип, черный экран.<br /><br /><blockquote><em>vadik</em><br>И еще, сейчас настроки Х-ов лежат в /etc/X11/xorg.conf.d/. Смотрите что там.</blockquote>xorg.conf.d смотрел, конечно. Там 1 файл лежит с настройками раскладки.<br /><pre><code>
$ cat /etc/X11/xorg.conf.d/01-keyboard-layout.conf
Section &quot;InputClass&quot;
        Identifier             &quot;keyboard-layout&quot;
        MatchIsKeyboard        &quot;on&quot;
        Option                 &quot;XkbLayout&quot; &quot;us,ru&quot;
        Option &quot;grp:alt_shift_toggle,grp:switch,grp_led:scroll,terminate:ctrl_alt_bksp&quot;
EndSection
</code></pre><br /><blockquote><em>Aivar</em><br>Ничего муторного.</blockquote>Хз. Искать linux+headers+nvidia+utils, переставлять, нарушать тем самым bleeding-edge, частичные обновления...<br />Раньше проделывал такое, но это все равно в какой-то степени костыль. И опять таки потом обновляться с надеждой &quot;а вдруг заработает&quot; - не очень.<br /><br /><strong>Буду пробовать варианты с lts и nouveau.</strong> Спасибо за перенос темы.
            
                
                    <div class="post-signature">
                        You will release your life<br />Joining with the god damned world of the dead and the lonely.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175865"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/zyamilon/">
                <span class="post-username">zyamilon</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175865/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/05/38/0538daba4df4f04651565001ab83f69b.png" alt="zyamilon avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/zyamilon/topics/">
                    6
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/zyamilon/posts/">
                    68
                </a>
            </div>
            <div>
                Участник с: 02 апреля 2012
            </div>
            
        </td>
        <td class="post-content">
            <strong>nouveau:</strong><br />1. Установил xf86-video-nouveau mesa-libgl<br />, удалил nvidia-libgl<br /><br />2. /etc/modprobe.d/<br />убрал блеклистинг nouveau,<br />добавил в блеклист nvidia nvidia_modeset nvidia_drm<br /><br />3. создал /etc/X11/xorg.conf.d/20-nouveau.conf<br /><pre><code>
Section &quot;Device&quot;
    Identifier &quot;Nvidia card&quot;
    Driver &quot;nouveau&quot;
EndSection
</code></pre><br />4. после перезагрузки толку еще меньше - Xorg даже не запускается.<br />В логах жалобы на то, что нет дисплея. Без пункта 3 история примерно такая же.<br />nouveau, понятно дело, был загружен.<br /><br /><strong>testing:</strong><br />вспомнил про arch-testing. Сделал:<br /><pre><code>sudo pacman -S testing/nvidia testing/nvidia-libgl
Пакеты (3) nvidia-utils-375.10-1  nvidia-375.10-1  nvidia-libgl-375.10-1</code></pre>Эффект тот же, только на логотипе появилась надпись &quot;beta drivers&quot;.<br /><br /><strong>lts:</strong><br />Удалил тестинг, сделал:<br /><pre><code>sudo pacman -S linux-lts linux-lts-docs nvidia-lts</code></pre>Перезагрузился, выбрал lts. Без изменений. Правда меня смутило, что версия драйвера идентична обычному.<br /><br />Да что за магия такая?! То-ли лыжи не едут, то-ли я ***. Но ведь раньше работало!
            
                
                    <div class="post-signature">
                        You will release your life<br />Joining with the god damned world of the dead and the lonely.
                    </div>
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
                
                




<table class="table table-bordered post post-row
       "
       id="post-175898"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vadik/">
                <span class="post-username">vadik</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/175898/">#</a>
            5 лет, 10 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vadik/topics/">
                    55
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vadik/posts/">
                    5395
                </a>
            </div>
            <div>
                Участник с: 17 августа 2009
            </div>
            
        </td>
        <td class="post-content">
            <strong>zyamilon</strong>, я там еще про видеовыходы писал. ))<br />Попробуйте подключить монитор в другой разъем.<br /><br />Еще. Чтоб исключить проблему с настройками видеокарты для локального пользователя - попробуйте стартануть Х-ы под новым пользователем.<br />Под текущим пользователем можно попробовать убрать (хотя бы временно) файл ~/.nvidia-settings-rc.<br /><br /><blockquote><em>zyamilon</em><br>нарушать тем самым bleeding-edge, частичные обновления...</blockquote>ничего не нарушается, все оффициально, все по &quot;фэншую&quot;. У меня уже давно и обычное ядро со всем обвесом и lts-овское. Удобно и полезно.<br /><br /><blockquote><em>zyamilon</em><br>Правда меня смутило, что версия драйвера идентична обычному.</blockquote>На &quot;сегодня&quot; так и есть. Как вариант, можно попробовать поставить nvidia-304xx, но сомневаюсь что поможет.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

            
        </div>
        <div>&nbsp;</div>
        
            <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

        

        

        
            
<a href="/accounts/register/">Зарегистрироваться</a> или <a href="/accounts/login/?next=/forum/topic/16645/">войдите</a> чтобы оставить сообщение.

        

        
    </div>

        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747abb77bd0d9d86',m:'9ZEiDFOgsarY9TTmsA9Jdza.qWTTue0h1nYAt8dcGI4-1662672074-0-Afm1TT1U8cwnzt8U0uqbmE3i16MQ8JQvVnoGPBw4cI+RIbE+ahSYMDXz8srOEsNfgwkS77bz5vc0WjEJjMY/Nn7OYJ6k53w0gVweiJiJyC+lbdI8pN7vveNJ/ZZ7waPcqn52OaVmDLT/EvbrgWJ1s2E=',s:[0x6ea64e5032,0x4a0f124b6d],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
