


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        artes Сообщения
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
    
        <li>Сообщения</li>
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    <div class="posts">
        
            




<table class="table table-bordered post post-row
       "
       id="post-172679"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172679/">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Сделал downgrade до версии 2.4.0 (кстати данная версия используется в UNetLab) и проблема ушла.<br />В данной версии эта функция имеет совершенно другой вид<br /><pre><code>static uint64_t
e1000_mmio_read(void *opaque, hwaddr addr, unsigned size)
{
    E1000State *s = opaque;
    unsigned int index = (addr &amp; 0x1ffff) &gt;&gt; 2;

    if (index &lt; NREADOPS &amp;&amp; macreg_readops[index])
    {
        return macreg_readops[index](s, index);
    }
    DBGOUT(UNKNOWN, &quot;MMIO unknown read addr=0x%08x\n&quot;, index&lt;&lt;2);
    return 0;
}
</code></pre><br />Остается большой загадкой с какой целью разработчики сделали данное условие<br /><pre><code>if (mac_reg_access[index] &amp; MAC_ACCESS_PARTIAL) {
   DBGOUT(GENERAL, &quot;Reading register at offset: 0x%08x. &quot;
                   &quot;It is not fully implemented.\n&quot;, index&lt;&lt;2);
}
</code></pre><br />В итоге я решил в версии 2.6.0 закомментировать данное условие.<br /><pre><code>--- a/qemu-2.6.0/hw/net/e1000.c	2016-05-12 01:56:09.000000000 +1000
+++ b/qemu-2.6.0/hw/net/e1000.c	2016-08-14 19:09:34.133938177 +1000
@@ -1485,10 +1485,12 @@
     if (index &lt; NWRITEOPS &amp;&amp; macreg_writeops[index]) {
         if (!(mac_reg_access[index] &amp; MAC_ACCESS_FLAG_NEEDED)
             || (s-&gt;compat_flags &amp; (mac_reg_access[index] &gt;&gt; 2))) {
+            /*
             if (mac_reg_access[index] &amp; MAC_ACCESS_PARTIAL) {
                 DBGOUT(GENERAL, &quot;Writing to register at offset: 0x%08x. &quot;
                        &quot;It is not fully implemented.\n&quot;, index&lt;&lt;2);
             }
+            */
             macreg_writeops[index](s, index, val);
         } else {    /* &quot;flag needed&quot; bit is set, but the flag is not active */
             DBGOUT(MMIO, &quot;MMIO write attempt to disabled reg. addr=0x%08x\n&quot;,
@@ -1512,10 +1514,12 @@
     if (index &lt; NREADOPS &amp;&amp; macreg_readops[index]) {
         if (!(mac_reg_access[index] &amp; MAC_ACCESS_FLAG_NEEDED)
             || (s-&gt;compat_flags &amp; (mac_reg_access[index] &gt;&gt; 2))) {
+            /*
             if (mac_reg_access[index] &amp; MAC_ACCESS_PARTIAL) {
                 DBGOUT(GENERAL, &quot;Reading register at offset: 0x%08x. &quot;
                        &quot;It is not fully implemented.\n&quot;, index&lt;&lt;2);
             }
+            */
             return macreg_readops[index](s, index);
         } else {    /* &quot;flag needed&quot; bit is set, but the flag is not active */
             DBGOUT(MMIO, &quot;MMIO read attempt of disabled reg. addr=0x%08x\n&quot;,
</code></pre><br />Решение так себе, но другого варианта я не вижу. Cisco vIOS работает вполне нормально.<br />Кстати заглянул в 2.7.0 и там эта функция такая же как и в 2.6.0
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-172619"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172619/">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Исходный код <strong>qemu</strong> я брал с офф. сайта. Точнее пробовал пересобрать пакет через <strong>abs</strong>, играясь параметрами <em>cflags</em>, а она собственно его скачивает с офф. сайта.<br /><br />Нашел функцию которая выводит это сообщение в файле <strong>qemu-2.6.0/hw/net/e1000.c</strong><br /><pre><code>static uint64_t
e1000_mmio_read(void *opaque, hwaddr addr, unsigned size)
{
    E1000State *s = opaque;
    unsigned int index = (addr &amp; 0x1ffff) &gt;&gt; 2;

    if (index &lt; NREADOPS &amp;&amp; macreg_readops[index]) {
        if (!(mac_reg_access[index] &amp; MAC_ACCESS_FLAG_NEEDED)
            || (s-&gt;compat_flags &amp; (mac_reg_access[index] &gt;&gt; 2))) {
            if (mac_reg_access[index] &amp; MAC_ACCESS_PARTIAL) {
                DBGOUT(GENERAL, &quot;Reading register at offset: 0x%08x. &quot;
                       &quot;It is not fully implemented.\n&quot;, index&lt;&lt;2);
            }
            return macreg_readops[index](s, index);
        } else {    /* &quot;flag needed&quot; bit is set, but the flag is not active */
            DBGOUT(MMIO, &quot;MMIO read attempt of disabled reg. addr=0x%08x\n&quot;,
                   index&lt;&lt;2);
        }
    } else {
        DBGOUT(UNKNOWN, &quot;MMIO unknown read addr=0x%08x\n&quot;, index&lt;&lt;2);
    }
    return 0;
}
</code></pre><br />На <em><strong>С</strong></em> писал очень давно, практически в другой жизни, но насколько я понял какая то проблема с <em>mac</em>-адресом?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-172605"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172605/">#</a>
            6 лет назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            в файле <strong><em>drivers/net/ethernet/intel/e1000/e1000_hw.c</em></strong> есть упоминания регистров, которые фигурируют в сообщениях, но больше понять и найти ничего не смог.<br /><pre><code>. . .
#define E1000_RDFH     0x02410  /* RX Data FIFO Head - RW */
#define E1000_RDFT     0x02418  /* RX Data FIFO Tail - RW */
. . .
#define E1000_82542_RDFH     E1000_RDFH
#define E1000_82542_RDFT     E1000_RDFT
. . .
</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-172574"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172574/">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Сделал как Вы посоветовали.<br /><pre><code>$ sudo modprobe -r e1000
$ sudo modprobe -v e1000 debug=16
insmod /lib/modules/4.6.4-1-ARCH/kernel/drivers/net/ethernet/intel/e1000/e1000.ko.gz debug=1
</code></pre><br />Ничего не изменилось<br /><pre><code>$ cat /sys/module/e1000/parameters/copybreak
256
$ ls -al /sys/module/e1000/parameters/
-rw-r--r-- 1 root root 4096 авг 11 23:18 copybreak
</code></pre><br /><pre><code>$ systool -v -m e1000
Module = &quot;e1000&quot;

  Attributes:
    coresize            = &quot;122880&quot;
    initsize            = &quot;0&quot;
    initstate           = &quot;live&quot;
    refcnt              = &quot;0&quot;
    srcversion          = &quot;9695902D12379E95A2112CA&quot;
    taint               = &quot;&quot;
    uevent              = &lt;store method only&gt;
    version             = &quot;7.3.21-k8-NAPI&quot;

  Parameters:
    copybreak           = &quot;256&quot;
</code></pre><br /><pre><code>[  750.833637] br0: port 2(tap0) entered disabled state
</code></pre>Это когда я процесс qemu убиваю, тогда и появляется эта запись.<br />С tap-интерфейсами режим однозначно рабочий. Пробовал его на ios-xr, juniper vsrx, а так же со всеми виртуальными машинами. Проблема вылезла только на vios.<br />Причем есть одна особенность, как только мне почти вслепую получается из vios выключить интерфейс, сообщения прекращаются, но возобновляются при обратном его включении.<br /><br />Может проблема в этих сообщениях ?<br /><pre><code>[  702.144847] kvm: zapping shadow pages for mmio generation wraparound
[  702.145724] kvm: zapping shadow pages for mmio generation wraparound
</code></pre>Но пока разумного объяснения не нашел
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-172557"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172557/">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Загрузил модуль e1000 с параметром debug=16, но не уверен что debug активировался исходя из вывода команды systool<br /><br /><pre><code>$ sudo modprobe e1000 debug=16
$ systool -v -m e1000
Module = &quot;e1000&quot;

  Attributes:
    coresize            = &quot;122880&quot;
    initsize            = &quot;0&quot;
    initstate           = &quot;live&quot;
    refcnt              = &quot;0&quot;
    srcversion          = &quot;9695902D12379E95A2112CA&quot;
    taint               = &quot;&quot;
    uevent              = &lt;store method only&gt;
    version             = &quot;7.3.21-k8-NAPI&quot;

  Parameters:
    copybreak           = &quot;256&quot;

  Sections:
    .bss                = &quot;0xffffffffa0817f80&quot;
    .data               = &quot;0xffffffffa0816000&quot;
    .data..read_mostly  = &quot;0xffffffffa0817c18&quot;
    .data.unlikely      = &quot;0xffffffffa0817c1c&quot;
    .exit.text          = &quot;0xffffffffa080fa39&quot;
    .gnu.linkonce.this_module= &quot;0xffffffffa0817c40&quot;
    .init.text          = &quot;0xffffffffa07bd000&quot;
    .note.gnu.build-id  = &quot;0xffffffffa0810000&quot;
    .parainstructions   = &quot;0xffffffffa0814ab8&quot;
    .rodata             = &quot;0xffffffffa0810040&quot;
    .rodata.str1.1      = &quot;0xffffffffa08120c0&quot;
    .rodata.str1.8      = &quot;0xffffffffa0812ca8&quot;
    .smp_locks          = &quot;0xffffffffa0812c10&quot;
    .strtab             = &quot;0xffffffffa07c1e70&quot;
    .symtab             = &quot;0xffffffffa07be000&quot;
    .text               = &quot;0xffffffffa07fc000&quot;
    .text.unlikely      = &quot;0xffffffffa080f426&quot;
    __bug_table         = &quot;0xffffffffa0814b74&quot;
    __mcount_loc        = &quot;0xffffffffa0814e80&quot;
    __param             = &quot;0xffffffffa0814c28&quot;
    __verbose           = &quot;0xffffffffa08169a8&quot;
</code></pre><br />Тем не менее всё равно решил попробовать. Внес небольшие изменения в схему:<br />1. Привязал сетевой интерфейс Cisco к tap0 (схема стабильная и не раз опробованная)<br />2. Поменял на более новый vIOS (в надежде что данная проблема уйдет)<br /><br /><pre><code>$ brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.002354ed7e4c       no              eth0
                                                        tap0
$ qemu-system-x86_64 \
  -m 1024 \
  -nographic \
  -smp cores=2,sockets=8 \
  -enable-kvm \
  -drive file=&quot;vios-adventerprisek9-m-15.6.2T.qcow2&quot;,if=virtio \
  -net nic,vlan=0,macaddr=00:aa:00:00:03:01,model=e1000 \
  -net tap,ifname=tap0,vlan=0,script=no,downscript=no
</code></pre><br />К сожаления ничего не изменилось и проблема осталась<br /><br /><pre><code>Booted IOSv. Boot args: [/vios-adventerprisek9-m]

Smart Init is enabled

              Restricted Rights Legend

Use, duplication, or disclosure by the Government is
subject to restrictions as set forth in subparagraph
(c) of the Commercial Computer Software - Restricted
Rights clause at FAR sec. 52.227-19 and subparagraph
(c) (1) (ii) of the Rights in Technical Data and Computer
Software clause at DFARS sec. 252.227-7013.

           cisco Systems, Inc.
           170 West Tasman Drive
           San Jose, California 95134-1706
Cisco IOS Software, IOSv Software (VIOS-ADVENTERPRISEK9-M), Version 15.6(2)T, RELEASE SOFTWARE (fc2)
Technical Support: <a href="https://www.cisco.com/techsupport">http://www.cisco.com/techsupport</a>
Copyright (c) 1986-2016 by Cisco Systems, Inc.
Compiled Tue 22-Mar-16 16:19 by prod_rel_team
This product contains cryptographic features and is subject to United
States and local country laws governing import, export, transfer and
use. Delivery of Cisco cryptographic products does not imply
third-party authority to import, export, distribute or use encryption.
Importers, exporters, distributors and users are responsible for
compliance with U.S. and local country laws. By using this product you
agree to comply with applicable laws and regulations. If you are unable
to comply with U.S. and local laws, return this product immediately.

A summary of U.S. laws governing Cisco cryptographic products may be found at:
<a href="https://www.cisco.com/wwl/export/crypto/tool/stqrg.html">http://www.cisco.com/wwl/export/crypto/tool/stqrg.html</a>

If you require further assistance please contact us by sending email to
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4d28353d223f390d2e243e2e22632e222063">[email&#160;protected]</a>

Cisco IOSv (revision 1.0) with  with 1021177K/25600K bytes of memory.Installed image archive
e1000: Reading register at offset: 0x00002410. It is not fully implemented.
e1000: Reading register at offset: 0x00002418. It is not fully implemented.

Processor board ID 95F1YHINODNGKNAH3GLYQ
1 Gigabit Ethernet interface
DRAM configuration is 72 bits wide with parity disabled.
256K bytes of non-volatile configuration memory.
2097152K bytes of ATA System CompactFlash 0 (Read/Write)
0K bytes of ATA CompactFlash 1 (Read/Write)
0K bytes of ATA CompactFlash 2 (Read/Write)
0K bytes of ATA CompactFlash 3 (Read/Write)
e1000: Reading register at offset: 0x00002410. It is not fully implemented.
e1000: Reading register at offset: 0x00002418. It is not fully implemented.
e1000: Reading register at offset: 0x00002410. It is not fully implemented.
e1000: Reading register at offset: 0x00002418. It is not fully implemented.
</code></pre><br />И на всякий случай, вдруг полезно будет<br /><br /><pre><code>$ dmesg
...
[  523.701545] e1000: Intel(R) PRO/1000 Network Driver - version 7.3.21-k8-NAPI
[  523.701548] e1000: Copyright (c) 1999-2006 Intel Corporation.
[  554.652536] IPv6: ADDRCONF(NETDEV_CHANGE): tap0: link becomes ready
[  554.652575] br0: port 2(tap0) entered blocking state
[  554.652577] br0: port 2(tap0) entered forwarding state
[  555.234045] kvm: zapping shadow pages for mmio generation wraparound
[  555.234823] kvm: zapping shadow pages for mmio generation wraparound
[  620.832080] br0: port 2(tap0) entered disabled state
[  701.664149] br0: port 2(tap0) entered blocking state
[  701.664154] br0: port 2(tap0) entered forwarding state
[  702.144847] kvm: zapping shadow pages for mmio generation wraparound
[  702.145724] kvm: zapping shadow pages for mmio generation wraparound
[  750.833637] br0: port 2(tap0) entered disabled state
</code></pre><br />Может нужно какие нибудь манипуляции с модулями kvm и kvm_intel?<br /><br /><pre><code>$ systool -v -m kvm
Module = &quot;kvm&quot;

  Attributes:
    coresize            = &quot;499712&quot;
    initsize            = &quot;0&quot;
    initstate           = &quot;live&quot;
    refcnt              = &quot;1&quot;
    taint               = &quot;&quot;
    uevent              = &lt;store method only&gt;

  Parameters:
    allow_unsafe_assigned_interrupts= &quot;N&quot;
    halt_poll_ns        = &quot;400000&quot;
    halt_poll_ns_grow   = &quot;2&quot;
    halt_poll_ns_shrink = &quot;0&quot;
    ignore_msrs         = &quot;N&quot;
    kvmclock_periodic_sync= &quot;Y&quot;
    lapic_timer_advance_ns= &quot;0&quot;
    min_timer_period_us = &quot;500&quot;
    mmu_audit           = &quot;N&quot;
    tsc_tolerance_ppm   = &quot;250&quot;
    vector_hashing      = &quot;Y&quot;
</code></pre><br /><pre><code>$ systool -v -m kvm_intel
Module = &quot;kvm_intel&quot;

  Attributes:
    coresize            = &quot;184320&quot;
    initsize            = &quot;0&quot;
    initstate           = &quot;live&quot;
    refcnt              = &quot;0&quot;
    taint               = &quot;&quot;
    uevent              = &lt;store method only&gt;

  Parameters:
    emulate_invalid_guest_state= &quot;Y&quot;
    enable_apicv        = &quot;N&quot;
    enable_shadow_vmcs  = &quot;N&quot;
    ept                 = &quot;Y&quot;
    eptad               = &quot;N&quot;
    fasteoi             = &quot;Y&quot;
    flexpriority        = &quot;Y&quot;
    nested              = &quot;Y&quot;
    ple_gap             = &quot;0&quot;
    ple_window_grow     = &quot;2&quot;
    ple_window_max      = &quot;1073741823&quot;
    ple_window_shrink   = &quot;0&quot;
    ple_window          = &quot;4096&quot;
    pml                 = &quot;N&quot;
    unrestricted_guest  = &quot;N&quot;
    vmm_exclusive       = &quot;Y&quot;
    vpid                = &quot;Y&quot;
</code></pre>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-172484"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/172484/">#</a>
            6 лет назад
            
                (отредактировано
                
                    6 лет назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Столкнулся с проблемой запуска Cisco IOSv_15.5(3)M в QEMU. Запускаю следующей командой:<br /><br /><pre><code>$ qemu-system-x86_64 \
  -m 1024 \
  -nographic \
  -smp cores=2,sockets=8 \
  -enable-kvm \
  -drive file=&quot;IOSv-L3.qcow2&quot;,if=ide \
  -net socket,connect=localhost:9002,vlan=10 \
  -net nic,vlan=10,model=e1000,macaddr=00:01:00:ff:03:01</code></pre><br />Версии ОС и QEMU:<br /><br /><pre><code>$ uname -a
Linux osiris 4.6.4-1-ARCH #1 SMP PREEMPT Mon Jul 11 19:12:32 CEST 2016 x86_64 GNU/Linux

$ qemu-system-x86_64 --version
QEMU emulator version 2.6.0, Copyright (c) 2003-2008 Fabrice Bellard</code></pre><br />На выходе получаю следующее сообщение (последние строки крутятся в цикле и загрузка на этом останавливается)<br /><br /><pre><code>Cisco IOSv (revision 1.0) with  with 1021185K/25600K bytes of memory.Installed image archive

Processor board ID 9GVPXCRKO5K8655EEJU85
1 Gigabit Ethernet interface
DRAM configuration is 72 bits wide with parity disabled.
256K bytes of non-volatile configuration memory.
2097144K bytes of ATA System CompactFlash 0 (Read/Write)
0K bytes of ATA CompactFlash 1 (Read/Write)
0K bytes of ATA CompactFlash 2 (Read/Write)
0K bytes of ATA CompactFlash 3 (Read/Write)

e1000: Reading register at offset: 0x00002410. It is not fully implemented.
e1000: Reading register at offset: 0x00002418. It is not fully implemented.
e1000: Reading register at offset: 0x00002410. It is not fully implemented.
e1000: Reading register at offset: 0x00002418. It is not fully implemented.</code></pre><br />Гугл ничего внятного найти не смог. Какие у кого нибудь будут идеи по этому поводу?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-166620"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/166620/">#</a>
            6 лет, 5 месяцев назад
            
                (отредактировано
                
                    6 лет, 5 месяцев назад)
                
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Интересный проект. Могу помочь с 3 вопросом. Правда я этим пользовался в chromium, а не в firefox. И проблема у меня была с <strong>capture://&lt;IP_ADDR&gt;/&lt;BRIDGE&gt;</strong>, но думаю проблема решается аналогичным образом. Как минимум на 4 шаге.<br /><br />1. Настроить без парольный доступ по ssh ключу.<br /><br />2. Создать скрипт и положить его например в <strong>/usr/local/sbin/capture</strong><br /><pre><code>#!/bin/bash

HOST=`echo $1 | awk -F&quot;://&quot; &#39;{print $2}&#39; | cut -d/ -f1`
INT=`echo $1 | awk -F&quot;://&quot; &#39;{print $2}&#39; | cut -d/ -f2 | sed &#39;s/vunl_/vunl0_/&#39;`

wireshark -k -i &lt;(ssh -l root $HOST tcpdump -s 0 -U -n -v -w - -i $INT)
</code></pre><br />3. Создать <strong>.local/share/applications/Capture UNL.desktop</strong><br /><pre><code>[Desktop Entry]
Version=1.0
Name=Capture UNL
Generic Name=Capture UNL
Comment=Capture UNL
Icon=wireshark
Exec=/usr/local/sbin/capture %U
TryExec=/usr/local/sbin/capture
Terminal=false
Type=Application
Categories=Network;Capture;Internet;
MimeType=x-scheme-handler/capture
X-KDE-Protocols=capture
Keywords=Wireshark;Capture;Network;Internet;Client;
</code></pre><br />4. Обновить mime<br /><pre><code>$ xdg-mime default &#39;Capture UNL.desktop&#39; x-scheme-handler/capture</code></pre><br />На telnet у меня следующая настройка по умолчанию в системе была<br /><pre><code>$ xdg-mime query default x-scheme-handler/telnet
ktelnetservice5.desktop</code></pre><br />С <strong>qemu</strong> после конвертации проблем не испытывал. Использую <strong>libvirt</strong>. Но проблема в том что <strong>qemu</strong> в <strong>qemu</strong> врят ли получится запустить.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-152539"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/152539/">#</a>
            7 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Вот и появляются нюансы. Далее есть ли какой либо регламент по ведению репозитория? Как оформлять коммиты? Или пустить всё на самотек, а там будь что получится. Кто как хочет, так и коммитит.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-152532"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/152532/">#</a>
            7 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Первое что приходит в голову. Русский язык. Все коммиты на протяжении 3 лет на русском. В AUR принято общаться на английском.<br />Да и в принципе в вики не особо расписано что делать в таком случае. Не особо хочется терять наработанный опыт.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-152517"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/artes/">
                <span class="post-username">artes</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/152517/">#</a>
            7 лет, 3 месяца назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/06/ae/06ae7cd1590bcc203e44895ebae9b0cf.png" alt="artes avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/artes/topics/">
                    3
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/artes/posts/">
                    36
                </a>
            </div>
            <div>
                Участник с: 12 июня 2009
            </div>
            
        </td>
        <td class="post-content">
            Это всё хорошо. А если я свои пакеты уже пару лет веду в git. Как в таком случае поступать?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
    </div>
    <div>&nbsp;</div>
    
        <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </span>
                </li>
            

            
                
                    
                        <li class="active">
                            <a href="?page=1">1 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=3">3</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=4">4</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=2" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

    


        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747ba5553f4d8f37',m:'DSO8KL6Yq0AY5Q0kPVPTGE7lIlokE9Ym6UP2aEnUQX0-1662681652-0-Ac+ZZVqq0xERQF73NHj+3AqDNh+E22qTYoFSsz1qCedlRvA25JjKZTQsWV33rx9C7WLKlNzT/PbAsDJsbc2DKxwacLD9QNKTZWuryEjuvVi2jhI4H6XPx6QEvDcm2+Ow0x7rQdn36SsrNpCcYQ3HswE=',s:[0xbadb1b7d06,0x3c31f6fc3b],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
