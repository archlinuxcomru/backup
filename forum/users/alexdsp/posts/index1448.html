


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        alexdsp Сообщения
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
    
        <li>Сообщения</li>
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    <div class="posts">
        
            




<table class="table table-bordered post post-row
       "
       id="post-98388"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98388/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            В общем, взял я вот этот - PLEXTOR PX-128M5S<br/>Систему уже поставил начерно, сделал всякие типовые настройки - локаль, часы, груб, просто чтоб загружалась система.<br/>Статья в вики про SSD годная, всё толково разжёвано, и что приятно, русская версия практически синхронна английской.<br/>Вот что я сделал. Потом поругайте, что не так.<br/>Разметил SSD - сначала идёт выровненный раздел на 124Г под корень и дом, а в конце 4Г под swap на всякий случай.<br/>Каждый из двух магнитных HDD разделил пополам так, что первые разделы объединяются в страйп raid0 - (md0), а вторые два в зеркало raid1 - (md1) соответственно. Оба эти раздела форматировал в ext4 (как и на SSD) и смонтировал через fstab по UUID в /home/ftp (raid0) и /home/arc (raid1) соответственно. Последний видимо будет для всяких шибко важных данных, проектов, исходников и т.д., которые очень боязно терять. Первый будет содержать всякое восполнимое барахло типа кино и музыки, которое ещё будет видно через ftp наружу в локалку.<br/>Теперь вот какой момент&#8230; рассуждаю как бы&#8230;<br/>Наверное, нужно вынести весь /var куда-то, желательно в raid0 для скорости. Но пока получается как-то оно костыльно. Т.е. нужно создать каталог /home/ftp/var, который потом будет монтироваться в /var (или надо делать bind?). Сейчас в /var (который пока что на SSD) всякая чепуха, что положена после нормальной установки, кэши всякие, логи и т.д. Можно ли всё это содержимое тупо перекинуть в /home/ftp/var, а потом в fstab прописать точку монтирования для /var, которая указывает не на раздел, а на каталог? (bind?) Записи в fstab вообще по порядку обрабатываются? Нужно ведь, чтобы оно срабатывало уже после монтирования рэйдов. Или не парить мозги себе и окружающим и под /var (да и под /tmp до кучи) сделать отдельный раздел. Вопрос опять же какого размера&#8230; Ээх&#8230; неохота плодить разделы без жизненной необходимости.<br/><br/><blockquote><em>gluk</em><br/>SSD сейчас умирают из-за контроллера, а не из-за износа ячеек.<br/>/tmp в памяти можно держать, а для крупных пакетов запускать yaourt как написано в man:<br/><div class="code"><pre>--tmp &lt;dir&gt;
     Use &lt;dir&gt; as temporary folder. default to /tmp</pre></div></blockquote>Ну&#8230; это одно с другим связано наверное. Скорее, ячейки изнашиваются по вине не шибко мудрого контроллера. Чтоб прямо так железо дохло&#8230; очень редко такое встречал, это уже скорее в облась брака можно отнести. Типа, радиатор плохо наклеили, перегрев и т.д.<br/>За tmp и yaourt - спасибо за наводку. Это хороший вариант. Больших пакетов, которые не лезут при сборке в оперативку, считанные единицы.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98334"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98334/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>sleepycat</em><br/>не знаю, зеркальный массив у меня ассоциируется с бекапом. Но может дейсвительно я слегка приукрасил словцом. По поводу снапшота, я рекомендую если все таки бекап нужен инкрементный и частый осилить бакулу, а не этот инструмент. Как говорил известный персонаж, &ldquo;меня терзают смутные соменния&rdquo;, но это имхо.</blockquote>Меня вот они тоже просто затерзали :))) Почитал форумы, поглядел тесты - выходит как бы так, что даже один SSD, даже на SATA2 будет в разы быстрее моего рейда, который сам по себе - спящий катаклизм. При таком подсознании трудно успокоиться и уже начать заниматься делами. Осознание, что плоды этих &ldquo;делов&rdquo; могут в одночасье помахать ручкой, просто парализует.<br/>С бэкапами буду разбираться, спасибо за &ldquo;тычки&rdquo; в нужном направлении.<br/><br/><blockquote><em>gluk</em><br/>Crucial M4 - один из лучших, проверено временем. Это однозначно хороший вариант.<br/>Плекстор - быстрое гугление говорит что он на марвеловском контроллере. Скорее всего тоже будет долго работать, много больше чем год.<br/><br/>Я бы для успокоения поискал в других магазинах M4 на 128ГБ.<br/><br/>/tmp у меня в оперативной памяти, при перезагрузке стирается.</blockquote>Они вроде как на одинаковых контроллерах сделаны, но в плексторе какая-то &ldquo;toggle nand&rdquo; стоит. Говорят, что служит дольше (слухи), да и чуток побыстрее он. По надёжности вроде как на оба отзывы хорошие, хотя этот Crucial М4 конечно по массовым опросам явный фаворит.<br/>Осталось разобраться что конкретно надо держать на SSD, а что выносить на HDD. Тут как-то тоже не всё понятно.<br/>/tmp в оперативку мне нельзя выносить, у меня только 4G памяти (DDR2 1066). Как-то был там у меня /tmp, так крупные пакеты не собирались.<br/>Ну и&#8230; например кэш пакмана держать на SSD смысла нет. Логи всякие тоже. Наверняка всё это проработано и описано до мелочей, в арч-вики есть статья, например. Думаю, разберусь, хотя советы внимательно слушаю :)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98333"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98333/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>sleepycat</em><br/>не знаю, зеркальный массив у меня ассоциируется с бекапом. Но может дейсвительно я слегка приукрасил словцом. По поводу снапшота, я рекомендую если все таки бекап нужен инкрементный и частый осилить бакулу, а не этот инструмент. Как говорил известный персонаж, &ldquo;меня терзают смутные соменния&rdquo;, но это имхо.</blockquote>Меня вот они тоже просто затерзали :))) Почитал форумы, поглядел тесты - выходит как бы так, что даже один SSD, даже на SATA2 будет в разы быстрее моего рейда, который сам по себе - спящий катаклизм. При таком подсознании трудно успокоиться и уже начать заниматься делами. Осознание, что плоды этих &ldquo;делов&rdquo; могут в одночасье помахать ручкой, просто парализует.<br/>С бэкапами буду разбираться, спасибо за &ldquo;тычки&rdquo; в нужном направлении.<br/><br/><blockquote><em>gluk</em><br/>Crucial M4 - один из лучших, проверено временем. Это однозначно хороший вариант.<br/>Плекстор - быстрое гугление говорит что он на марвеловском контроллере. Скорее всего тоже будет долго работать, много больше чем год.<br/><br/>Я бы для успокоения поискал в других магазинах M4 на 128ГБ.<br/><br/>/tmp у меня в оперативной памяти, при перезагрузке стирается.</blockquote>Они вроде как на одинаковых контроллерах сделаны, но в плексторе какая-то &ldquo;toggle nand&rdquo; стоит. Говорят, что служит дольше (слухи), да и чуток побыстрее он. По надёжности вроде как на оба отзывы хорошие, хотя этот Crucial М4 конечно по массовым опросам явный фаворит.<br/>Осталось разобраться что конкретно надо держать на SSD, а что выносить на HDD. Тут как-то тоже не всё понятно.<br/>/tmp в оперативку мне нельзя выносить, у меня только 4G памяти (DDR2 1066). Как-то был там у меня /tmp, так крупные пакеты не собирались.<br/>Ну и&#8230; например кэш пакмана держать на SSD смысла нет. Логи всякие тоже. Наверняка всё это проработано и описано до мелочей, в арч-вики есть статья, например. Думаю, разберусь, хотя советы внимательно слушаю :)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98319"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98319/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            Да уж&#8230; что-то сомнения меня терзают всё больше и больше. Просто чисто подсознательно очень страшно полностью переезжать со своими ценными, а также бесценными данными на массив рэйд0. Несмотря на то, что система работает, что-то в моей голове отчаянно протестует&#8230;<br/>Предположим, всё-таки поставлю я SSD под систему&#8230; а два диска в рэйд1 под всё остальное. Какая-то должна быть особенная стратегия разбивки и монтирования разделов? Понятно, корень надо на SSD. Наверное, /home тоже, а иначе смысл теряется. /var /tmp наверное, надо выносить куда-то на внешний магнитный HDD. Что-то ещё надо&#8230; в гугле умных мыслей, вероятно.<br/>Потом, выбрать правильный SSD тоже вроде как непросто.<br/>После непродолжительного поиска, чтения отзывов и faq-ов остановился на двух моделях (просто ещё в добавок ко всему они есть в данный момент в ближайшем Ситилинке):<br/>CRUCIAL M4 CT064M4SSD2, 64Гб<br/>PLEXTOR PX-128M5S, 128Гб<br/>Это &ldquo;правильные&rdquo; SSD? Второй, наверное, несколько избыточен, но на вырост (если не сдохнет как обычно через год) был бы неплох, к тому же ведь и /home предполагается на него пихать&#8230;
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98276"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98276/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            Спасибо, очень интересный комментарий&#8230;<br/>Есть некоторая тревога конечно. Данные всё-таки планируется далеко не пятиминутные держать. С другой стороны, сколько ни было за всю жизнь у меня дисков - ни один из них не подох физически так чтоб вообще ничего вытащить нельзя было. Намного чаще встречались проблемы рассыпания самой файловой системы либо от потери питания, либо от софтовых зависаний. Один из дисков моего рэйда (Хитачи 7K3000 2Тб) проработал больше года без каких-то проблем (тьфу три раза), второй такой же проработал намного меньше, но&#8230; в общем, видно будет. UPS у меня стоит, правда, батарея уже не очень&#8230;<br/>Насчёт fakeraid в гугле пишут, что по сути оно тоже использует CPU в той же степени, что и mdadm. Просто при fakeraid в биосе на уровне прерывания 13 этот рэйд обрабатывается, что даёт возможность его видеть даже в DOS. А так, чисто софтовый вариант по сути. Плюс, как Вы правильно заметили, иногда не работает NCQ, что очень преочень важно. Разница на однодисковой конфигурации просто разительная. При включенном NCQ в загрузке grub вообще стоит указать elevator=noop, т.к. в самом HDD упорядочивание делается, да и центральный процессор ещё немного разгружается.<br/>Над бэкапами надо думать&#8230; Я не сисадмин и далёк от этих премудростей. Обычно просто копирую важные файлы, проекты всякие, фотки и прочее личное в укромное место (на внешний диск), а какой-то регулярной системы восстановления не использую. В принципе, ведь для восстановления системы нужны только список установленных пакетов, да и файлы настроек из /etc и домашнего каталога, и ещё по мелочи. Это не большой объём. Наверняка можно как-то автоматизировать такие бекапы. Вот утеря собственных наработок, что невосполнимы по сути, очень болезненна&#8230; Её надо исключить. Тут-то raid0  уверенности совсем не прибавляет&#8230;<br/>В общем, что-то наверное не то я сделал&#8230; Наверное, надо было просто ограничиться только страйпом на корень, а остальное либо зазеркалить, либо вообще вывести из рэйда. Или как советовали для скорости докупить небольшой SSD, который всяко будет быстрее того, что у меня сейчас.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98259"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98259/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>kurych</em><br/><blockquote><em>alexdsp</em><br/>сначала swap 4Г, потом 64Г под корень, 512Г /home, и примерно 1.5Г на всё остальное (архивы, локальный ftp и т.д.) Соответственно, при объединении в рейд, размеры разделов будут удваиваться.</blockquote>Раз уж все равно бъете диски на разделы, то почему же не сделать рутовый раздел на RAID1? <u>Если один из дисков навернется</u>, то, хотя бы, останется рабочая система на одном из зеркал. А для root-раздела 64Гига на 100 лет хватит. Зачем еще удваивать?</blockquote>Дело в том, что ценность этого раздела очень невелика по сравнению с утраченными данными в /home и прочих архивных местах. Хотя, конечно, систему восстанавливать проще. Ну и фактор скорости&#8230; Для  корневого раздела, где лежат все программы, это актуально. Ради скорости всё это и затевалось (из того, что имелось в наличии).
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98250"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98250/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>gluk</em><br/>SATA2 и 300+МБ/с это как? Все что свыше 300 - погрешность или результат работы кеширования. Ибо не 3ГБит, а 300 МБайт. Ну да неважно.<br/><br/>Когда закончите настройку системы - не забудьте отписаться есть ли существенный прирост скорости.</blockquote>3+3 Гбит/сек, или чуть меньше чем 300Мбайт/сек + 300Мбайт/сек = 600Мбайт/сек - суммарный предел пропускной способности двух каналов SATA2.<br/>Никаких парадоксов. Два жёстких диска на разных каналах. На каждом канале скорость линейного чтения примерно 165 Мбайт/сек.<br/>Естественно, всё измерялось на некешированном разделе прямо после загрузки системы.  md0 - раздел свопа, который находится в самом начале диска. Прирост скорости получается двукратный.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98244"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98244/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            В общем, запустил я софтовый RAID0 через mdadm. С dmraid и всякими биосовыми штучками связываться не стал. Компьютер грузится и работает, начальные настройки по вики сделал, но остальное требует всяческой доработки. Пишу с другого компьютера.<br/><br/>GRUB2 нормально грузит прямо с raid0 раздела! Никаких /boot разделов на raid1 делать не надо. Грузит прямо с корня.<br/>Главное, как написано тут - <a href="http://travishegner.com/2012/02/boot-arch-linux-from-an-mdadm-array/">http://travishegner.com/2012/02/boot-arch-linux-from-an-mdadm-array/</a><br/>надо перед первым разделом каждого из дисков рэйда зарезервировать хотя бы пару мегабайт пустого места. Туда вроде как grub будет что-то полезное для загрузки записывать. В остальном, делал всё по вики.<br/>На каждом диске сделал четыре первичных раздела с типом &ldquo;авто рэйд&rdquo; (создал на одном диске, потом при помощи dd скопировал MBR на второй диск, так как разделы должны быть идентичными).<br/>Сделал как-то так: сначала swap 4Г, потом 64Г под корень, 512Г /home, и примерно 1.5Г на всё остальное (архивы, локальный ftp и т.д.) Соответственно, при объединении в рейд, размеры разделов будут удваиваться.<br/>Померил скорость при помощи &ldquo;dd if=/dev/md0 of=/dev/null bs=1G count=1&rdquo; - получилось чуть более 320 Мб/сек.<br/>Но как-то оно страшненько чисто подсознательно&#8230;<br/>Надо читать systemd, очень всё неудобно стало. Где логи, почему квадраты в русской консоли? В общем, материться и ковырять до посинения.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98104"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98104/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            Тут вот ещё что&#8230; На моей материнке только SATA 3Gb/s. Современные SSD будут буксовать&#8230; Посмотрел цифры тестов на блоки 4К - действительно скорость на порядок выше, чем у среднего диска. У дорогих моделей SSD может быть и на два порядка. Но такой режим - это всё-таки не слишком типовой режим работы. Запуск крупного приложения, обработка всяких фоток, стриминг видео, звукозапись - это обычно либо вообще линейное чтение-запись, либо более менее таковое. Думаю, всё же оставлю я покупку SSD на потом, когда будет апгрейд системы. А будет он скорее всего довольно таки нескоро. Да и в корпус у меня оно просто не полезет. Сейчас там установлены 2Тб(Arch) + 1Тб(WinXP). Если поставить туда второй 2Тб, да ещё и SSD впридачу&#8230; то ставить придётся в нештатные места, либо вообще оставлять лежать на дне корпуса&#8230; Это как-то не тру&#8230;<br/>В принципе и один HDD удовлетворяет моим запросам, просто их у меня два одинаковых и хочется из того что уже есть получить более менее оптимальную конфигурацию. Просто JBOD - как-то оно не очень тру тоже&#8230;<br/>Вот, кстати, циферки с моего одиночного диска.<br/># dd if=/dev/sda of=/dev/null bs=1G count=1<br/>1+0 записей получено<br/>1+0 записей отправлено<br/> скопировано 1073741824 байта (1,1 GB), 6,54628 c, 164 MB/c<br/><br/>За ссылку на e4rat спасибо. Посмотрим что это, хотя к таким штучкам у меня есть предубеждение. Я когда-то давно пробовал preload и оно у меня со временем как-то довольно сильно заглючило, и я отказался от этого. Может, это годится для более менее статичной системы, а у меня постоянно что-то устанавливается, собирается пересобирается и т.д. В общем, я за относительную ванильность.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-98084"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/alexdsp/">
                <span class="post-username">alexdsp</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/98084/">#</a>
            9 лет, 8 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/alexdsp/topics/">
                    22
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/alexdsp/posts/">
                    307
                </a>
            </div>
            <div>
                Участник с: 07 февраля 2008
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>gluk</em><br/><div class="code"><pre>gluk ~ $ sudo dd if=/dev/sda of=/dev/null bs=1G count=1
[sudo] password for gluk:
1+0 записей получено
1+0 записей отправлено
 скопировано 1073741824 байта (1,1 GB), 5,86606 c, 183 MB/c</pre></div>Всего-то 180 МБ/с, правда уныло как для SSD? Я ради интереса смотрел как оно под виндой работает. Холодный старт фотошопа 1-2 секунды. С винта на 7200 оборотов 20+ секунд.</blockquote>Оспаривать не буду, но что-то всё же не верится&#8230; Скорость линейного чтения имеет огромное значение, не меньшее, чем время доступа. Ясное дело, всё зависит от пропорции мелких и больших файлов, от степени фрагментации HDD, но как-то сомнительно, чтобы SSD с 183 Мб/сек могло обогнать HDD RAID0 со скоростью 320 Мб/сек. На мелких файлах вероятно и обгонит, а вот на запуске крупных приложений, где файлы далеко не мелкие&#8230; не думаю&#8230; Опять же технология NCQ для мелких файлов ощутимо сокращает это преимущество.<br/>Ну и всё-таки диски - они уже у меня есть, а SSD нет&#8230; На фоне этого не особо хочется что-то ещё покупать.<br/>Кстати, при включении NCQ у 7K3000 был очень похожий эффект с запуском firefox. Время старта сократилось разительно, секунд с 5 до примерно 1.5 сек, но том же железе. Вот меня и беспокоит как оно себя поведёт в рэйде, который в биосе. Хотя, конечно, на чисто софтовый рэйд через mdadm это никак повлиять не может.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
    </div>
    <div>&nbsp;</div>
    
        <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=9" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="?page=5">5</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=6">6</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=7">7</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=8">8</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=9">9</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=10">10 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=11">11</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=12">12</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=13">13</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=14">14</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=15">15</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="?page=30">30</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=31">31</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=11" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

    


        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747b0087ec1a9da4',m:'r2qy4ex7kx.1aNrq.THVeR8tmv4q8_Klp.lZTLBUSNk-1662674899-0-AeJahswG1VpjDsMxKoO7Bn0lH2a5a6vq1xRsT+qDoLtdjKg1Yxan4HvmfIclsdianXIzghSM3wib9TaorQC6Q8pmm7IgqYW7lBKUlXtuwrhUCueGFrpFwFOjAYDBBk69eeizuHHjuhMHfdYHeXp/xHjEsXHk+PlOWAir1D+6v/mI',s:[0xafc932419d,0x8f147bd738],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
