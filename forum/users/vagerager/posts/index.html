


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        vagerager Сообщения
    </title>
    <link rel="shortcut icon" href="https://archlinuxcomru.github.io/backup/src/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://archlinuxcomru.github.io/backup/src/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
    
        <li>Сообщения</li>
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    <div class="posts">
        
            




<table class="table table-bordered post post-row
       "
       id="post-120288"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vagerager/">
                <span class="post-username">vagerager</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/120288/">#</a>
            8 лет, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/2b/9e2bc60d0228ebbe26623e206ccb6589.png" alt="vagerager avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vagerager/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vagerager/posts/">
                    5
                </a>
            </div>
            <div>
                Участник с: 21 марта 2012
            </div>
            
        </td>
        <td class="post-content">
            Если мне не изменяет память, редактирование через visudo позволяет застраховатся от случайных "косяков". Когда выполняется visudo, создается /temp/sudoers и вы редактируете его. Далее при сохранении /etc/sudoers заменяется тем, что нацарапали вы. Возможно еще и какая-то проверка при этом происходит.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-120273"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vagerager/">
                <span class="post-username">vagerager</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/120273/">#</a>
            8 лет, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/2b/9e2bc60d0228ebbe26623e206ccb6589.png" alt="vagerager avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vagerager/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vagerager/posts/">
                    5
                </a>
            </div>
            <div>
                Участник с: 21 марта 2012
            </div>
            
        </td>
        <td class="post-content">
            В общем-то можно тему можно считать закрытой. Благодарствую.<br/>P.S. <blockquote>и даже на русском... </blockquote>- в русской вики о <em>sudo -E</em> и пр. ничего =\
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-120266"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vagerager/">
                <span class="post-username">vagerager</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/120266/">#</a>
            8 лет, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/2b/9e2bc60d0228ebbe26623e206ccb6589.png" alt="vagerager avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vagerager/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vagerager/posts/">
                    5
                </a>
            </div>
            <div>
                Участник с: 21 марта 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>naszar</em><br/>Можно еще проще сказать: так как <em>sudo</em> не запускает никаких командных оболочек, то соответственно настройки переменных окружения для этих оболочек никак не сказываются на выполнении программ через <em>sudo</em>. И кстати, чем вам <strong>su</strong> не угодило?</blockquote>о_О Теперь я запутался. Согласно man'a sudo использует переменные окружения, но далеко не все (см. <em>sudo -V</em>) - или я не так понимаю?<br/>И я не против <em>su</em>, просто хотелось разобраться.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-120265"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vagerager/">
                <span class="post-username">vagerager</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/120265/">#</a>
            8 лет, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/2b/9e2bc60d0228ebbe26623e206ccb6589.png" alt="vagerager avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vagerager/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vagerager/posts/">
                    5
                </a>
            </div>
            <div>
                Участник с: 21 марта 2012
            </div>
            
        </td>
        <td class="post-content">
            Использую bash. Приведенное мной решение с редактированием <em>/etc/sudoers</em> разве не является аналогом <em>sudo -E</em>? И кажется я понял в чем загвоздка. Внимательно просмотрев вывод команды <em>sudo -V</em> (от root), находим строку "Reset the environment to a default set of variables", т.е. все переменные сбрасываются в дефолт, более того ниже еще указаны переменные "to remove". Поправьте, если я не прав. Спасибо за помощь. Снова убеждаюсь, что следует тщательнее читать man'ы =)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-120258"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/vagerager/">
                <span class="post-username">vagerager</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/120258/">#</a>
            8 лет, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
        <img src="https://storage.yandexcloud.net/aor-static/media/cache/9e/2b/9e2bc60d0228ebbe26623e206ccb6589.png" alt="vagerager avatar" />
    
</div>

            <div>
                Темы:
                <a href="/forum/users/vagerager/topics/">
                    1
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/vagerager/posts/">
                    5
                </a>
            </div>
            <div>
                Участник с: 21 марта 2012
            </div>
            
        </td>
        <td class="post-content">
            Доброго дня! Столкнулся с проблемой обновления через прокси. Свежеустановленный Arch не хотел обновлятся через <em>sudo</em>, обновление проходило только под root. Методом проб и ошибок и чтения гуглов пришел к выводу, что проблема в переменных http_proxy, https_proxy, ftp_proxy, no_proxy, а точнее в том, что они существуют только для root (заранее извиняюсь, с точной терминологией не знаком - полагаю следует называть это "окружением"). Чтоб сделать эти переменные доступными для всех пользователей добавил их в <em>/etc/profile</em>, но и это не помогло. Ранее где-то на форуме (не смог найти, к сожалению) читал о работе <em>sudo</em> - о том что редактируя <em>/etc/sudoers</em> следует добавить свои переменные в Defaults env_keep (после строк "You may wish to keep some of the following environment variables when running commands via sudo..."), чтобы эти переменные передавались выполняемой команде (в нашем случае pacman). После таких манипуляций все заработало. К слову все можно было "починить" организовав работу pacman через <em>wget</em>, как это уже обсуждалось на форуме, но загвоздка была в том что я забыл его установить :) и принципиально хотел найти выход без <em>wget</em>. Но теперь никак не могу понять, почему же pacman отказывался работать после добавления переменных в <em>/etc/profile</em>, ведь после этого переменные уже существовали и для root и для других пользователей (проверял командой <em>set</em>)?<br/>Спасибо!
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
    </div>
    <div>&nbsp;</div>
    
        <div class="text-center">
    



</div>

    


        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747c10da4b02163d',m:'9qDFQvCBWQV8edYx8rB.QUd7sGWNSwSE5lQMD2965lQ-1662686055-0-ARNWyLuRo5cvo4yiQi5MK0jQYQFLMSHflsPy4iwnKRqEUIM2lTHN7vxCKeEQiTBOuMO9OqwXUlMCMPBAKhmTracfRxt3ZjPBVK/hakGR1Kg45LOyuwDSdBMB2ifB/d+HjHktfhOKJ3kdyEJ6rrJ2P7E=',s:[0x0f35fde458,0x39d508a062],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
