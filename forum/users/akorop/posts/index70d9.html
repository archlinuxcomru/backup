


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        akorop Сообщения
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://archlinuxcomru.github.io/backup/src/css/bootstrap.css">
    
    
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/bootstrap.js"></script>
    <script type="text/javascript" src="https://archlinuxcomru.github.io/backup/src/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
    
        <li>Сообщения</li>
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    <div class="posts">
        
            




<table class="table table-bordered post post-row
       "
       id="post-105707"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105707/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>vadik</em><br/>Как всегда: при запуске ругань есть? /etc/hosts правильно заполнен? на чистом профиле пробовали?</blockquote>Ругани нет; hosts я не трогал, там только localhost; про чистый профиль - не понимаю профиль чего.<br/>Раньше у меня был Archbang с ModemManager - там этот эффект тоже возникал во время "пересменки" (когда модем уже соединился с компьютером, но ещё не соединился с интернетом). Сейчас Arch, поставленный честно с нуля, никаких автоматических сетевизмов нет вообще. В rc.local (запуск которого включён) сеть конфигурируется вот так:<br/><div class="code"><pre>ip link set enp2s0 down
ip link set enp3s5 down
ip link set dev enp2s0 name eth0
ip link set dev enp3s5 name eth1
ip link set eth0 up
ip addr add 192.168.1.21/24 dev eth0
ip link set eth1 up
ip addr add 192.168.2.3/24 dev eth1
ip route del default
ip route add default via 192.168.2.1</pre></div>Eth0 - связь с другим компьютером, который почти всегда выключен. Eth1 - связь с ADLS-модемом.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105705"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105705/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            (Не знаю, соответствует ли это тематике данного формуа, но более подходящего  не нашёл.)<br/>Обычно mc запускается быстро (менее секунды), но <u>иногда</u> тормозит на несколько секунд, а то и десятков секунд. И если уж торомозит, то тормозит везде - хоть первый экземпляр, хоть второй, хоть в эмуляторе терминала, хоть в ядерной консоли. Тема эта вечная, опубликована куча заклинаний, и все они мне не помогают.<br/>Так вот, я нашёл закономерность, когда он у меня тормозит: когда (1) сеть как бы есть, и (2) реального выхода в интернет нет. У меня интернет через ADSL-модем, подключён через интерфейс eth1 (eth0 ведёт к выключенному компьютеру). NetworkManager-а и прочей такой фигни с некоторых пор нет, всё конфигурируется при загрузке командами ip. Ситуацию показывают следующие примеры.<br/>Пример 1. Модем связался с интернетом, линк поднят - запуск mc не тормозит.<br/>Пример 2. Выдёргиваю сетевой кабель из модема  (eth1 остаётся при это UP) - запуск mc тормозит.<br/>Пример 3. Ввожу ip set down eth1 - запуск mc не тормозит.<br/>Всё то же самое я проделывал в ubuntu 12.04, предварительно прибив NetworkManager, - там mc не тормозит никогда. То есть, похоже, это Arch-специфический глюк.<br/>Вот как выглядит сеть, когда mc тормозит:<br/><div class="code"><pre>2: eth0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN qlen 1000
    link/ether 40:61:86:85:ce:69 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.21/24 scope global eth0
3: eth1: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN qlen 1000
    link/ether 00:02:44:88:e0:e5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.2.3/24 scope global eth1</pre></div>Кто виноват? Что делать?
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105599"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105599/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>lampslave</em><br/>И поверьте, лучше не извращаться и grub4dos сюда не привлекать.</blockquote>А какие подводные камни-то? У меня дома grub4dos грузит 5 линуксов, WinXP, Win7 и DOS. На нескольких компах на работе он грузит Windows (7 или XP) и два линукса (боевой и спасательный). Никаких проблем.<br/>Достоинство grub4dos в том, что его файлы (которых всего два) могут лежать на любом разделе. С grub всё заковыристее. Например, поставит человек Линукс (с grub в MBR), наиграется, и решит снести, переформатировать раздел в NTFS и записать туда фильмы. Надо достаточно хорошо разбиратся в этой кухне, чтобы в результате не получить компьютер, который вообще не грузится. А с grub4dos - никаких проблем: кладём 2 файла на самый "надёжный" раздел, и всё. А если, вдруг, не угадали, и именно этот раздел надо переформатировать - перекинуть файлы на любой другой раздел.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105557"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105557/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>littlefuntik</em><br/>В данный момент установлен Windows 7<br/>Нужно установить Arch на <strong>sda5</strong>.<br/>GRUB не охота ставить, пусть будет стандартный виндовый загрузчик.<br/></blockquote>Виндовый загрузчик не умеет грузить Линукс. Проще всего поставить grub4dos на самый верхний уровень - он умеет грузить и Windows, и Linux.<br/>Но, вообще-то, странная задача. А почему бы не поставить grub? Это самое простое решение. Положить в корень виндового раздела menu.lst и grldr, и запустить гуёвый установщик загрузочной записи. Всё это из-под windows, заранее. Ключевые слова grub4dos, grubinst_gui.exe.<br/><blockquote><em>littlefuntik</em><br/>Знаю что такое возможно, но еще раз спрошу: "<strong>Возможно ли решить такую задачку?</strong>"<br/></blockquote>Возможно, наверно, только очень уж нетривиальная задача. Какой смысл насиловать виндовый загрузчик тем, чего он не умеет?<br/><blockquote><em>littlefuntik</em><br/>Если да, то поясните, пожалуйста, в двух словах, что нужно сделать?<br/>Чем подробнее, тем луче. А то я нашел только установку арча на чистый HDD. Дошел до fdisk и завис....<br/></blockquote>Хм... если разбивка уже сделана в винде, то зачем fdisk?<br/>А может, не надо нырять сразу в в ручную инсталляцию Arch с нуля? Сперва поставить archbang для адаптации, а там, глядишь, на нём и остаться :)
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105414"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105414/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>domov0y</em><br/>тут я увы полностью согласен. на  меньше чем 3*128 мб рамы +P3 такое чудо будет почти бесполезно. Слишком уж прожорлив нынешний софт до памяти.  хотя по чтению записи оно наверное сможет потягаться со свапом на жестком диске. Но не более того.</blockquote>А при чём тут именно <strong>нынешний</strong> софт, равно как и многоядерные процессоры?<br/>Это ж вечнозелёная идея, и софт был всегда прожорлив до современной ему памяти, и память была всегда быстрее, чем любой внешний носитель. Ещё во времен ДОС и Windows 3 (не Win NT 3, а просто Win 3 - это было до Windows 95) была утилита MagnaRam с практически таким же подходом - часть памяти отводилось под сжатый "своп". А в OS/2 сжатый промежуточный буфер был частью штатного функционирования системной системы свопинга, и, кстати, в физический своп данные, если и записывались, то сжатые (что уменьшало обмен с винтом).
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105412"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105412/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>nafanja</em><br/>qbittorrent хороший был до 3 версии, а сейчас вылетает постоянно...</blockquote>Не так однозначно. Я использую qbittorrent давно, постоянно обновляюсь, и никаких проблем нет. Был момент, когда действительно были падения (возможно, это как раз был переход на версию 3), но и это сразу вылечилось полным удалением конфигов и историй - и в ~/.config, и в ~.local, и в ~.cache. Сейчас стоит версия 3.0.9-1 - последняя на AUR.<br/>Клиент хорошой. Для какого-то торрент-профи он, может, и простоват, но мне на 100% хватает. Последоваательное скачивание, естественно, есть, пользуюсь часто.<br/>Пожалуй, единственное, что напрягает, это что приоритет скачивания нормально работает только внутри одного торрента, а между торрентами, похоже, просто игнорируется.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105113"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105113/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Natrio</em><br/><strong>akorop</strong>, вставьте обе флешки и выполните <div class="code"><pre>lsblk -f</pre></div></blockquote>Вот так это выглядит до всех монтирований. То есть флэшки воткнуты, но нет ни правила udev, ни запущенных демонов-монтировщиков.<br/><div class="code"><pre>sdb     vfat   GDF2      33FC-C8D7
└─sdb1  vfat   GDF2      33FC-C8D7
sdc
└─sdc1  vfat   AK-4G     A313-32A4</pre></div><br/>Теперь выдёргиваю флэшки, копирую правило udev на рабочее место, и опять вставляю.<br/><div class="code"><pre>sdb     vfat   GDF2      33FC-C8D7
└─sdb1  vfat   GDF2      33FC-C8D7                            /media/GDF2
sdc
└─sdc1  vfat   AK-4G     A313-32A4                            /media/AK-4G</pre></div><br/>Таперь выдёргиваю флэшки, удаляю правило, запускаю devmon из пакета udevil и опять вставляю флэшки.<br/><div class="code"><pre>sdb
└─sdb1  vfat   AK-4G     A313-32A4                            /media/AK-4G
sdc     vfat   GDF2      33FC-C8D7
└─sdc1  vfat   GDF2      33FC-C8D7</pre></div><br/>В этих данных я вижу одно отличие: для заколдованной флэшки выводится UUID диска в целом, а для нормальной - не выводится. Что это за uuid - непонятно. Но, с другой стороны, для винта тоже выводится, притом и для sda2, который extended partition:<br/><div class="code"><pre>sda     vfat   DOS       4E05-3164
├─sda1  vfat   DOS       4E05-3164                            /home/ftp1/pub/c
├─sda2  vfat   DOS       4E05-3164</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105088"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105088/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>honaht</em><br/><blockquote><em>akorop</em><br/>Я боюсь udisks, и всего, что с ним связано.</blockquote>udevil может использоваться без udisks. Так что udevil и сам по себе же внушает тревогу.<br/></blockquote>Да, я присмотрелся - если я просто запускаю devmon, то udisks в памяти отсутствует. А фигня присутствует. Так что от этой флэшки udevil глючит точно так же, как глючит udidkie+udisks.<br/><blockquote><em>akorop</em><br/>Вот какая фигня с одной флэшкой  у меня получается при использовании udevil, udiskie и т.п.<br/></blockquote><blockquote><em>honaht</em><br/>УМВР:<br/><div class="code"><pre>@arch ~]$ mount|grep sdb &amp;&amp; lsblk|grep sdb
/dev/sdb1 on /media/sdb1-usb-USB3.0_FLASH_DRI type vfat /.../
sdb       8:16   1  58,9G  0 disk
└─sdb1    8:17   1  58,9G  0 part /media/sdb1-usb-USB3.0_FLASH_DRI</pre></div>udisks'опроблемы?</blockquote>Как оказалось, не только udisks, но и udevil тоже.<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="63110c0c17231051">[email&#160;protected]</a> rules.d]# top -b -n 1 | grep  "udisks\|udevil"
 8250 root      20   0  8000 1648 1304 S   0,0  0,0   0:00.00 udevil
[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d7a5b8b8a397a4e5">[email&#160;protected]</a> rules.d]# lsblk | grep sdb ; mount | grep sdb
sdb       8:16   1   1,9G  0 disk
└─sdb1    8:17   1   1,9G  0 part
/dev/sdb on /media/GDF2 type vfat (&lt;skip&gt;)</pre></div>А вот другая флэшка, с ней всё нормально. В чём разница - нопонятно<br/><div class="code"><pre>[<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c0b2afafb480b3f2">[email&#160;protected]</a> rules.d]# lsblk | grep sdb ; mount | grep sdb
sdb       8:16   1   3,7G  0 disk
└─sdb1    8:17   1   3,7G  0 part /media/AK-4G
/dev/sdb1 on /media/AK-4G type vfat (&lt;skip&gt;)</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-105039"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/105039/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>Natrio</em><br/>Однако, в пакете ntfs-3g есть программы, работающие с NTFS-разделами целиком. Они НЕ заменяют форточный chksdk, к примеру, но зато позволяют вполне успешно проделывать с NFTS такие операции, которые форточка никогда не умела – например, изменять размер ФС (ntfsresize).</blockquote>Отродясь не умела, а теперь умеет (в семёрке).<br/><blockquote>В том же пакете есть программа <strong>ntfsclone</strong>, которая умеет копировать разделы NTFS, без ненужного перетаскивания пустых блоков.<br/>Обе программы я успешно использовал много раз :)</blockquote>О! Спасибо, это как раз то, что надо для бэкапа винды! <strong>icast</strong>, Вам тоже на это стОит посмотреть.<br/>Для большей наглядности я сваял такие скрипты:<br/><div class="code"><pre># cat n_copy
DEV=$1
FILE=$2
echo "Create gzip-compressed copy of NTFS partition."
if [ -z $DEV ] ; then
  echo "Parameters: dev-name [file-name]"
  echo "By default file-name is dev-name-0.tgz"
  echo "Example: \"n_copy sda19\" or \"n_copy sda19 sda19-1.imz\" "
  exit 1
fi
if [ -z $FILE ] ; then
  FILE=$DEV-0.imz
fi
echo partition="/dev/$DEV file=$FILE"
read -p "Press Enter for process, or Ctrl-c for break"
CLUSTER=`ntfsinfo -m /dev/$DEV | grep "Cluster Size" | cut -c 15-40`
SIZE=`ntfsinfo -m /dev/$DEV | grep "Volume Size in Clusters" | cut -c 26-40`
FREE=`ntfsinfo -m /dev/$DEV | grep "Free Clusters" | cut -d " " -f 3`
TO_COPY=$(expr $SIZE - $FREE)
TO_COPY=$(expr $TO_COPY \* $CLUSTER)
echo "Cluster (bytes):" $CLUSTER "   Total (clusters)": $SIZE "  Free (clusters):" $FREE
echo "To copy (bytes):" $TO_COPY
time ntfsclone --save-image /dev/$DEV -o - 2&gt; /dev/null | pv -s $TO_COPY | pigz -c &gt; $FILE</pre></div><div class="code"><pre># cat n_restore
DEV=$1
FILE=$2
echo "Restore NTFS partition from the gzip-compressed copy."
if [ -z $DEV ] ; then
  echo "Parameters: dev-name [file-name]"
  echo "By default file-name is dev-name-0.tgz"
  echo "Example: \"n_restore sda19\" or \"n_restore sda20 sda19-1.imz\" "
  exit 1
fi
if [ -z $FILE ] ; then
  FILE=$DEV-0.imz
fi
echo partition="/dev/$DEV file=$FILE"
read -p "Press Enter to process it or Ctrl-c to break"
TO_COPY=`stat -c %s $FILE`
echo "To copy compressed (bytes):" $TO_COPY
time  dd if=$FILE bs=8M | pv -s $TO_COPY | unpigz -dc | ntfsclone -r --overwrite /dev/$DEV - &gt; /dev/null</pre></div>
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-104994"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/akorop/">
                <span class="post-username">akorop</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/104994/">#</a>
            9 лет, 5 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/akorop/topics/">
                    111
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/akorop/posts/">
                    1755
                </a>
            </div>
            <div>
                Участник с: 29 февраля 2012
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>honaht</em><br/><blockquote><em>Koluchka</em><br/><a href="https://ignorantguru.github.com/udevil/">udevil</a></blockquote>Крайне плюсую, очень удобный скрипт и тонко настраивается, при необходимости.</blockquote>Я боюсь udisks, и всего, что с ним связано. Вот какая фигня с одной флэшкой  у меня получается при использовании udevil, udiskie и т.п.<br/><div class="code"><pre>mount | grep sdb
/dev/sdb on /media/GDF2 type vfat (&lt;skip&gt;)
lsblk | grep sdb
sdb       8:16   1   1,9G  0 disk
└─sdb1    8:17   1   1,9G  0 part</pre></div>То есть (1) файловая система как бы смониторована для sdb, хотя на самом деле она на sdb1, и (2) точку мониторования lsblk почему-то не видит.<br/>С другой флэшкой, на которой тоже один fat-раздел, всё нормально.<br/>А при использовании правила udev, которое я приводил в стартовом посте, с той же заколдованной флэшкой всё выглядит так, как и должно быть:<br/><div class="code"><pre>mount | grep sdb
/dev/sdb1 on /media/GDF2 type vfat (&lt;skip&gt;)
lsblk | grep sdb
sdb       8:16   1   1,9G  0 disk
└─sdb1    8:17   1   1,9G  0 part /media/GDF2</pre></div>Страшно использовать систему мониторования с явными глюками. Пусть эти глюки, вроде, чисто визуальные, но мало ли...
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
    </div>
    <div>&nbsp;</div>
    
        <div class="text-center">
    


    <nav>
        <ul class="pagination">
            
                <li class="previous">
                    <a href="?page=173" aria-label="предыдущая страница">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="hidden-xs">предыдущая страница</span>
                    </a>
                </li>
            

            
                
                    
                        <li>
                            <a href="?page=1">1</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=2">2</a>
                        </li>
                    
                
            
                
                    <li class="disabled">
                        <span>...</span>
                    </li>
                
            
                
                    
                        <li>
                            <a href="?page=166">166</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=167">167</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=168">168</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=169">169</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=170">170</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=171">171</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=172">172</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=173">173</a>
                        </li>
                    
                
            
                
                    
                        <li class="active">
                            <a href="?page=174">174 <span class="sr-only">(текущая страница)</span></a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=175">175</a>
                        </li>
                    
                
            
                
                    
                        <li>
                            <a href="?page=176">176</a>
                        </li>
                    
                
            

            
                <li class="next">
                    <a href="?page=175" aria-label="следующая страница">
                        <span class="hidden-xs">следующая страница</span>
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            
        </ul>
    </nav>


</div>

    


        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>(function(){var js = "window['__CF$cv$params']={r:'747b8ae43de41625',m:'nzk45CrfWLlg47lqH9gKwzXdbY8fUuyPgeV0kN3avP8-1662680566-0-AVbTiLB/PXK+9OV4B90STPQ/DVdB5Z0NGp0mCdY8ZCfq9TbNr2ncysY0uyABGBt3h3kDkyPT8mcAS0R4Z31tC7TG+BPIvaa4HRebgypUUHcUvOZgW9DI3OHvp0uV81UAMPARorHKIBXRaHFv7dpODZk/h6qKTxEpyS4uiMkCycCv',s:[0xb1b6991393,0x6a4586d6cf],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
