


<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        WhiteRiver Сообщения
    </title>
    <link rel="shortcut icon" href="https://storage.yandexcloud.net/aor-static/static/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="https://storage.yandexcloud.net/aor-static/static/css/default.css">
    
    
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://storage.yandexcloud.net/aor-static/static/pybb/js/pybbjs.js"></script>
    
    
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/posts/" title="Последние сообщения на форуме" >
    <link rel="alternate" type="application/atom+xml" href="/forum/feeds/topics/" title="Последние темы на форуме" >

    
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid wrapper">
        
    
<ul class="nav navbar-nav">
    <li>
      <a class="navbar-brand" href="/">
        <img src="https://storage.yandexcloud.net/aor-static/static/logo.png" alt="" style="opacity: .7; vertical-align: top">
      </a>
    </li>
    <li class=""><a href="/news/">Новости</a></li>
    <li class="active"><a href="/forum/">Форум</a></li>
    <li class=""><a href="/blogs/">Блоги</a></li>
    <li><a href="https://archlinux.org/">Eng</a></li>
    <li><a href="https://wiki.archlinux.org/index.php/Main_page_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29">Wiki</a></li>
    <li class="dropdown">
      <a href="https://www.archlinux.org/packages/" class="dropdown-toggle" data-toggle="dropdown">
        Пакеты
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><a href="https://www.archlinux.org/packages/">Официальные репозитории</a></li></li>
        <li><a href="https://aur.archlinux.org/?setlang=ru">AUR</a></li>
      </ul>
    <li><a href="https://archlinux.org/download/">Скачать</a></li>
</ul>

<form class="navbar-form navbar-left" role="search" action="https://www.google.ru/cse">
    <input type="hidden" name="cx" value="018428664132160064944:ntsma9ch2ug"/>
    <input type="hidden" name="ie" value="UTF-8"/>
    <div class="input-group">
      <input type="text" name="q" class="form-control" placeholder="Что ищем?">
      <span class="input-group-btn">
        <button type="submit" name="sa" class="btn btn-default">Найти</button>
      </span>
    </div>
</form>

<ul class="nav navbar-nav navbar-right">


    
      <li><a href="/irc/#chat">IRC</a></li>
      <li class="dropdown">
        <a href="/accounts/login/" class="dropdown-toggle" data-toggle="dropdown">
          Профиль
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="/accounts/login/">Вход</a></li>
          <li><a href="/accounts/register/">Регистрация</a></li>
        </ul>
      </li>
    
</ul>


    </div>
</nav>



<div class="modal fade" id='new_pm_notify' role="dialog" aria-labelledby="gridSystemModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content navbar-default">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">Новые личные сообщения</h4>
      </div>
      <div class="modal-body">
        <a href="/messages/inbox/" class="center-block btn btn-primary">Перейти в папку Входящие <span class="badge"></span></a>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid wrapper">
    <div class="row">
        <div class="col-md-12">
            
    
        
<ul class="breadcrumb">
    

    <li><a href="/">ArchLinux.org.ru</a></li>


    <li><a href="/forum/">Начало</a> <span class="divider">/</span></li>
    
    
        <li>Сообщения</li>
    
</ul>

    

        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            
    <div class="row">
        <div class="col-md-12 forum">
            
    <div class="posts">
        
            




<table class="table table-bordered post post-row
       "
       id="post-209270"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/WhiteRiver/">
                <span class="post-username">WhiteRiver</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/209270/">#</a>
            3 года, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/WhiteRiver/topics/">
                    0
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/WhiteRiver/posts/">
                    2
                </a>
            </div>
            <div>
                Участник с: 17 сентября 2018
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>blackboar</em><br>Так вот вопрос, делает ли POL что-то большее (например стабильнее ли с ним работает) или нет. Описание вроде большую часть прочитал на его родном сайте, на эту тему ни слова не увидел (что впрочем не удивляет). В этом смысле нужен ли он вообще.</blockquote>Основная задача, возникающая при применении Wine — это собрать правильный wineprefix со всеми нужными библиотеками и правильными настройками именно для той программы, которую мы хотим запустить. И мы можем  собирать его как вручную с winetricks, так и с использованием уже написанных решений для вспомогательных программ вроде PoL и Lutris. И естественно, если мы не совсем хорошо понимаем, чего хочет эта программа (или просто хотим сделать всё чуть побыстрее), то мы можем воспользоваться последними. Но если мы знаем всё хорошо, или просто хотим поэкспериментировать, или же изучаем, так скажем, <em>не совсем официальную</em> версию программы, которая не отражена в установочных скриптах — нашим выбором будет собирать префикс вручную (разве что подглядывая в исходные тексты тех же самых скриптов с PoL или Lutris).<br /><br />Но как бы то ни было, как только правильный префикс создан — запускать из него программу можно как угодно, хоть с использованием вспомогательных программ, хоть без, тут уже дело вкуса и удобства. Таким образом, PoL (а точнее его установочные скрипты) конечно же делает нечто для повышения стабильности — но скорее <em>до</em> запуска, чем во время. И если нам от него не нужен ни архив бинарных версий Wine, ни его установочные скрипты, ни его способности по управлению префиксами — от него вполне можно отказаться, ничего особенно не потеряв по части стабильности. Если мы, конечно, знаем сами, как собрать правильный префикс.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
            




<table class="table table-bordered post post-row
       "
       id="post-209268"
       >
    <thead>
    <tr>
        <td class="post-author">
            <a href="/forum/users/WhiteRiver/">
                <span class="post-username">WhiteRiver</span>
            </a>
        </td>
        <td class="post-date">
            <div class="post-control">
                
                    
                
            </div>
            <a class="permalink" href="/forum/post/209268/">#</a>
            3 года, 11 месяцев назад
            
            
        </td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="post-info">
            

<div class="avatar">
    
</div>

            <div>
                Темы:
                <a href="/forum/users/WhiteRiver/topics/">
                    0
                </a>
            </div>
            <div>
                Сообщения:
                <a href="/forum/users/WhiteRiver/posts/">
                    2
                </a>
            </div>
            <div>
                Участник с: 17 сентября 2018
            </div>
            
        </td>
        <td class="post-content">
            <blockquote><em>blackboar</em><br>Имеется: archlinux, все пакеты актуальных версий + набор стрых версий вайна установленых с помощью playonlinux.<br />Версия 2.20 и новее запускаются без проблем.<br />Версии древнее падают с однотипной ошибкой:<br /><pre><code>
wine: Unhandled page fault on read access to 0x00000004 at address 0x7e488d44 (thread 0009), starting debugger...
winedbg: Internal crash at 0x7e7b3d44
</code></pre></blockquote>Вот именно это — из-за того, что во Freetype 2.8.1 что-то то ли сломали, то ли починили, но все существующие на тот момент версии Wine стали с ним падать с этой ошибкой.<br />Здесь об этом чуть подробнее, со ссылками на багтрекер Wine: <a href="https://bugs.archlinux.org/task/55667">https://bugs.archlinux.org/task/55667</a><br />Впоследствии Wine, конечно, подстроился, но все предыдущие версии теперь тоже следует обязательно пересобирать, наложив патчи для совместимости с Freetype 2.8.1 и новее.<br /><br />Таким образом, архив Playonlinux стал после этого только очень ограниченно полезным! В нём ведь не стали всё заново пересобирать.<br /><br />Ну и ещё более ранние версии Wine могут требовать и других патчей для сборки на актуальной системе, как вот та 1.7.55. Ну или может быть действительно ещё и ранних версий GCC. И хорошо ещё, если эти проблемы со сборкой в своё время всплывали в багтрекере Wine — их можно будет найти по тексту ошибок и взять оттуда патчи. А если нет и эти изменения просто тихо закоммитили непонятно где — всё становится намного печальнее...<br /><br />Вот например, где-то недели две назад некоторые версии из ветки 1.9.x прекрасно собирались (с патчами, конечно же), но буквально после следующего обновления — перестали. И по тексту ошибки тоже ничего вразумительного применительно именно к Wine не находится.<br /><pre><code>make[1]: Entering directory &#39;/home/user/src/asp/wine/repos/multilib-x86_64/src/wine-64-build/dlls/wpcap&#39;
gcc -m64 -c -o wpcap.o ../../../wine/dlls/wpcap/wpcap.c -I. -I../../../wine/dlls/wpcap -I../../include \
  -I../../../wine/include -D__WINESRC__ -D_REENTRANT -fPIC -Wall -pipe -fno-strict-aliasing \
  -Wdeclaration-after-statement -Wempty-body -Wignored-qualifiers -Wshift-overflow=2 \
  -Wstrict-prototypes -Wtype-limits -Wunused-but-set-parameter -Wvla -Wwrite-strings -Wpointer-arith \
  -Wlogical-op -D_FORTIFY_SOURCE=2 -march=native -O2 -pipe -fstack-protector-strong -fno-plt -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=0
../../tools/winegcc/winegcc -o wnaspi32.dll.so -B../../tools/winebuild -m64 -fasynchronous-unwind-tables -shared ../../../wine/dlls/wnaspi32/wnaspi32.spec \
  aspi.o winaspi32.o -ladvapi32 ../../libs/port/libwine_port.a -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now
In file included from ../../../wine/dlls/wpcap/wpcap.c:21:
../../../wine/include/winsock.h:395:18: error: two or more data types in declaration specifiers
 typedef UINT_PTR SOCKET;
                  ^~~~~~
In file included from ../../../wine/include/winsock2.h:47,
                 from ../../../wine/dlls/wpcap/wpcap.c:22:
../../../wine/include/winsock.h:395:1: warning: useless type name in empty declaration
 typedef UINT_PTR SOCKET;
 ^~~~~~~
../../../wine/include/winsock.h:401: warning: &quot;INVALID_SOCKET&quot; redefined
 #define INVALID_SOCKET             (SOCKET)(~0)

In file included from ../../../wine/dlls/wpcap/wpcap.c:21:
/usr/include/pcap/pcap.h:958: note: this is the location of the previous definition
   #define INVALID_SOCKET -1

../../../wine/dlls/wpcap/wpcap.c: In function &#39;wine_pcap_lookupdev&#39;:
../../../wine/dlls/wpcap/wpcap.c:183:5: warning: &#39;pcap_lookupdev&#39; is deprecated: use &#39;pcap_findalldevs&#39; and use the first device [-Wdeprecated-declarations]
     return pcap_lookupdev(errbuf);
     ^~~~~~
In file included from ../../../wine/dlls/wpcap/wpcap.c:21:
/usr/include/pcap/pcap.h:326:16: note: declared here
 PCAP_API char *pcap_lookupdev(char *)
                ^~~~~~~~~~~~~~
../../../wine/dlls/wpcap/wpcap.c: At top level:
../../../wine/dlls/wpcap/wpcap.c:234: warning: &quot;PCAP_OPENFLAG_PROMISCUOUS&quot; redefined
 #define PCAP_OPENFLAG_PROMISCUOUS 1

In file included from ../../../wine/dlls/wpcap/wpcap.c:21:
/usr/include/pcap/pcap.h:690: note: this is the location of the previous definition
 #define PCAP_OPENFLAG_PROMISCUOUS  0x00000001

make[1]: Leaving directory &#39;/home/user/src/asp/wine/repos/multilib-x86_64/src/wine-64-build/dlls/wpcap&#39;
../../tools/winegcc/winegcc -o wnaspi32.dll.fake -B../../tools/winebuild -m64 -fasynchronous-unwind-tables -shared ../../../wine/dlls/wnaspi32/wnaspi32.spec \
  aspi.o winaspi32.o -ladvapi32 ../../libs/port/libwine_port.a -Wl,-O1,--sort-common,--as-needed,-z,relro,-z,now
make[1]: *** [Makefile:167: wpcap.o] Error 1
make: *** [Makefile:16625: dlls/wpcap] Error 2
</code></pre><br />И что с этим теперь делать — тоже не очень понятно. Конечно, можно попробовать временно это всё откатить, но... словом, это не самая хорошая идея. Наверное.
            
                
            

            <div class="post-related">
                <div class='attachments'>
                    
                </div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

        
    </div>
    <div>&nbsp;</div>
    
        <div class="text-center">
    



</div>

    


        </div>
    </div>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6 footer">
            
                <p class="copyright">&copy; 2006-2022, Русскоязычное сообщество
                    Arch Linux.<br>Название и логотип Arch Linux &trade;
                    являются признанными торговыми
                    марками.<br>Linux &reg; &mdash; зарегистрированная торговая
                    марка Linus Torvalds и LMI.</p>
            
        </div>
    </div>
</div>

<script>(function(){var js = "window['__CF$cv$params']={r:'747a78163fe49d52',m:'RPfJgb2YRAI1aGoNlcl.UaYI.BG9aVarbCQ0eRTQ9ls-1662669310-0-Accqt9ewKlPrPpg7kGJn+w2PrMqpNt3CaiB85kRyzSz0D52BoNxWJ1/vTQsZf4f8o9lIgdunE0V/taNDot6RZgjA6oMly9NfEXoE8X03uthkPKATvlzaIuY2kafawLG4TtTLHEdw+1q1uZmRMIFTyEQ=',s:[0xeaf1774be8,0x489274c31c],u:'/cdn-cgi/challenge-platform/h/g'};var now=Date.now()/1000,offset=14400,ts=''+(Math.floor(now)-Math.floor(now%offset)),_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/h/g/scripts/alpha/invisible.js?ts='+ts,document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.nonce = '';_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script></body>
</html>
